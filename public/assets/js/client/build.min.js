!function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function i(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function o(e){return function(){return this[e].apply(this,arguments)}}function s(t,n){function i(e,t){return t.toLowerCase()}var o,s=e(t).data(),r={},a=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var l in s)n.test(l)&&(o=l.replace(a,i),r[o]=s[l]);return r}function r(t){var n={};if(m[t]||(t=t.split("-")[0],m[t])){var i=m[t];return e.each(f,function(e,t){t in i&&(n[t]=i[t])}),n}}var a=e(window),l=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,i=this.length;n<i;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.splice(0)},copy:function(){var e=new l;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),c=function(t,n){this.dates=new l,this.viewDate=i(),this.focusDate=null,this._process_options(n),this.element=e(t),this.isInline=!1,this.isInput=this.element.is("input"),this.component=!!this.element.is(".date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.picker=e(p.template),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("tfoot th.today").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_process_options:function(t){this._o=e.extend({},this._o,t);var n=this.o=e.extend({},this._o),i=n.language;switch(m[i]||(i=i.split("-")[0],m[i]||(i=h.language)),n.language=i,n.startView){case 2:case"decade":n.startView=2;break;case 1:case"year":n.startView=1;break;default:n.startView=0}switch(n.minViewMode){case 1:case"months":n.minViewMode=1;break;case 2:case"years":n.minViewMode=2;break;default:n.minViewMode=0}n.startView=Math.max(n.startView,n.minViewMode),n.multidate!==!0&&(n.multidate=Number(n.multidate)||!1,n.multidate!==!1?n.multidate=Math.max(0,n.multidate):n.multidate=1),n.multidateSeparator=String(n.multidateSeparator),n.weekStart%=7,n.weekEnd=(n.weekStart+6)%7;var o=p.parseFormat(n.format);n.startDate!==-(1/0)&&(n.startDate?n.startDate instanceof Date?n.startDate=this._local_to_utc(this._zero_time(n.startDate)):n.startDate=p.parseDate(n.startDate,o,n.language):n.startDate=-(1/0)),n.endDate!==1/0&&(n.endDate?n.endDate instanceof Date?n.endDate=this._local_to_utc(this._zero_time(n.endDate)):n.endDate=p.parseDate(n.endDate,o,n.language):n.endDate=1/0),n.daysOfWeekDisabled=n.daysOfWeekDisabled||[],e.isArray(n.daysOfWeekDisabled)||(n.daysOfWeekDisabled=n.daysOfWeekDisabled.split(/[,\s]*/)),n.daysOfWeekDisabled=e.map(n.daysOfWeekDisabled,function(e){return parseInt(e,10)});var s=String(n.orientation).toLowerCase().split(/\s+/g),r=n.orientation.toLowerCase();if(s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),n.orientation={x:"auto",y:"auto"},r&&"auto"!==r)if(1===s.length)switch(s[0]){case"top":case"bottom":n.orientation.y=s[0];break;case"left":case"right":n.orientation.x=s[0]}else r=e.grep(s,function(e){return/^left|right$/.test(e)}),n.orientation.x=r[0]||"auto",r=e.grep(s,function(e){return/^top|bottom$/.test(e)}),n.orientation.y=r[0]||"auto";else;},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n,i,o,s=0;s<e.length;s++)n=e[s][0],2===e[s].length?(i=t,o=e[s][1]):3===e[s].length&&(i=e[s][1],o=e[s][2]),n.on(o,i)},_unapplyEvents:function(e){for(var n,i,o,s=0;s<e.length;s++)n=e[s][0],2===e[s].length?(o=t,i=e[s][1]):3===e[s].length&&(o=e[s][1],i=e[s][2]),n.off(i,o)},_buildEvents:function(){this.isInput?this._events=[[this.element,{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}]]:this.component&&this.hasInput?this._events=[[this.element.find("input"),{focus:e.proxy(this.show,this),keyup:e.proxy(function(t){e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])===-1&&this.update()},this),keydown:e.proxy(this.keydown,this)}],[this.component,{click:e.proxy(this.show,this)}]]:this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:e.proxy(this.show,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{"mousedown touchstart":e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var i=n||this.dates.get(-1),o=this._utc_to_local(i);this.element.trigger({type:t,date:o,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return p.formatDate(n,t,this.o.language)},this)})},show:function(){this.isInline||this.picker.appendTo("body"),this.picker.show(),this.place(),this._attachSecondaryEvents(),this._trigger("show")},hide:function(){this.isInline||this.picker.is(":visible")&&(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this._trigger("hide"))},remove:function(){this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){return new Date(this.dates.get(-1))},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,t),this._trigger("changeDate"),this.setValue()},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue()},setDate:o("setDates"),setUTCDate:o("setUTCDates"),setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e).change():this.component&&this.element.find("input").val(e).change()},getFormattedDate:function(n){n===t&&(n=this.o.format);var i=this.o.language;return e.map(this.dates,function(e){return p.formatDate(e,n,i)}).join(this.o.multidateSeparator)},setStartDate:function(e){this._process_options({startDate:e}),this.update(),this.updateNavArrows()},setEndDate:function(e){this._process_options({endDate:e}),this.update(),this.updateNavArrows()},setDaysOfWeekDisabled:function(e){this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){var t=this.picker.outerWidth(),n=this.picker.outerHeight(),i=10,o=a.width(),s=a.height(),r=a.scrollTop(),l=parseInt(this.element.parents().filter(function(){return"auto"!==e(this).css("z-index")}).first().css("z-index"))+10,c=this.component?this.component.parent().offset():this.element.offset(),u=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),h=c.left,f=c.top;this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(h-=t-d)):(this.picker.addClass("datepicker-orient-left"),c.left<0?h-=c.left-i:c.left+t>o&&(h=o-t-i));var m,p,g=this.o.orientation.y;"auto"===g&&(m=-r+c.top-n,p=r+s-(c.top+u+n),g=Math.max(m,p)===p?"top":"bottom"),this.picker.addClass("datepicker-orient-"+g),"top"===g?f+=u:f-=n+parseInt(this.picker.css("padding-top")),this.picker.css({top:f,left:h,zIndex:l})}},_allow_update:!0,update:function(){if(this._allow_update){var t=this.dates.copy(),n=[],i=!1;arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),i=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.element.find("input").val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return p.parseDate(e,this.o.format,this.o.language)},this)),n=e.grep(n,e.proxy(function(e){return e<this.o.startDate||e>this.o.endDate||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate&&(this.viewDate=new Date(this.o.endDate)),i?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill()}},fillDow:function(){var e=this.o.weekStart,t="<tr>";if(this.o.calendarWeeks){var n='<th class="cw">&nbsp;</th>';t+=n,this.picker.find(".datepicker-days thead tr:first-child").prepend(n)}for(;e<this.o.weekStart+7;)t+='<th class="dow">'+m[this.o.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=0;t<12;)e+='<span class="month">'+m[this.o.language].monthsShort[t++]+"</span>";this.picker.find(".datepicker-months td").html(e)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s=new Date;return t.getUTCFullYear()<i||t.getUTCFullYear()===i&&t.getUTCMonth()<o?n.push("old"):(t.getUTCFullYear()>i||t.getUTCFullYear()===i&&t.getUTCMonth()>o)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===s.getFullYear()&&t.getUTCMonth()===s.getMonth()&&t.getUTCDate()===s.getDate()&&n.push("today"),this.dates.contains(t)!==-1&&n.push("active"),(t.valueOf()<this.o.startDate||t.valueOf()>this.o.endDate||e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)!==-1)&&n.push("disabled"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),e.inArray(t.valueOf(),this.range)!==-1&&n.push("selected")),n},fill:function(){var i,o=new Date(this.viewDate),s=o.getUTCFullYear(),r=o.getUTCMonth(),a=this.o.startDate!==-(1/0)?this.o.startDate.getUTCFullYear():-(1/0),l=this.o.startDate!==-(1/0)?this.o.startDate.getUTCMonth():-(1/0),c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,u=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,d=m[this.o.language].today||m.en.today||"",h=m[this.o.language].clear||m.en.clear||"";this.picker.find(".datepicker-days thead th.datepicker-switch").text(m[this.o.language].months[r]+" "+s),this.picker.find("tfoot th.today").text(d).toggle(this.o.todayBtn!==!1),this.picker.find("tfoot th.clear").text(h).toggle(this.o.clearBtn!==!1),this.updateNavArrows(),this.fillMonths();var f=n(s,r-1,28),g=p.getDaysInMonth(f.getUTCFullYear(),f.getUTCMonth());f.setUTCDate(g),f.setUTCDate(g-(f.getUTCDay()-this.o.weekStart+7)%7);var y=new Date(f);y.setUTCDate(y.getUTCDate()+42),y=y.valueOf();for(var v,w=[];f.valueOf()<y;){if(f.getUTCDay()===this.o.weekStart&&(w.push("<tr>"),this.o.calendarWeeks)){var b=new Date(+f+(this.o.weekStart-f.getUTCDay()-7)%7*864e5),C=new Date(Number(b)+(11-b.getUTCDay())%7*864e5),_=new Date(Number(_=n(C.getUTCFullYear(),0,1))+(11-_.getUTCDay())%7*864e5),x=(C-_)/864e5/7+1;w.push('<td class="cw">'+x+"</td>")}if(v=this.getClassNames(f),v.push("day"),this.o.beforeShowDay!==e.noop){var S=this.o.beforeShowDay(this._utc_to_local(f));S===t?S={}:"boolean"==typeof S?S={enabled:S}:"string"==typeof S&&(S={classes:S}),S.enabled===!1&&v.push("disabled"),S.classes&&(v=v.concat(S.classes.split(/\s+/))),S.tooltip&&(i=S.tooltip)}v=e.unique(v),w.push('<td class="'+v.join(" ")+'"'+(i?' title="'+i+'"':"")+">"+f.getUTCDate()+"</td>"),f.getUTCDay()===this.o.weekEnd&&w.push("</tr>"),f.setUTCDate(f.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join(""));var T=this.picker.find(".datepicker-months").find("th:eq(1)").text(s).end().find("span").removeClass("active");e.each(this.dates,function(e,t){t.getUTCFullYear()===s&&T.eq(t.getUTCMonth()).addClass("active")}),(s<a||s>c)&&T.addClass("disabled"),s===a&&T.slice(0,l).addClass("disabled"),s===c&&T.slice(u+1).addClass("disabled"),w="",s=10*parseInt(s/10,10);var N=this.picker.find(".datepicker-years").find("th:eq(1)").text(s+"-"+(s+9)).end().find("td");s-=1;for(var E,D=e.map(this.dates,function(e){return e.getUTCFullYear()}),k=-1;k<11;k++)E=["year"],k===-1?E.push("old"):10===k&&E.push("new"),e.inArray(s,D)!==-1&&E.push("active"),(s<a||s>c)&&E.push("disabled"),w+='<span class="'+E.join(" ")+'">'+s+"</span>",s+=1;N.html(w)},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:this.o.startDate!==-(1/0)&&t<=this.o.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault();var i,o,s,r=e(t.target).closest("span, td, th");if(1===r.length)switch(r[0].nodeName.toLowerCase()){case"th":switch(r[0].className){case"datepicker-switch":this.showMode(1);break;case"prev":case"next":var a=p.modes[this.viewMode].navStep*("prev"===r[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveMonth(this.viewDate,a),this._trigger("changeMonth",this.viewDate);break;case 1:case 2:this.viewDate=this.moveYear(this.viewDate,a),1===this.viewMode&&this._trigger("changeYear",this.viewDate)}this.fill();break;case"today":var l=new Date;l=n(l.getFullYear(),l.getMonth(),l.getDate(),0,0,0),this.showMode(-2);var c="linked"===this.o.todayBtn?null:"view";this._setDate(l,c);break;case"clear":var u;this.isInput?u=this.element:this.component&&(u=this.element.find("input")),u&&u.val("").change(),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()}break;case"span":r.is(".disabled")||(this.viewDate.setUTCDate(1),r.is(".month")?(s=1,o=r.parent().find("span").index(r),i=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(o),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode&&this._setDate(n(i,o,s))):(s=1,o=0,i=parseInt(r.text(),10)||0,this.viewDate.setUTCFullYear(i),this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(i,o,s))),this.showMode(-1),this.fill());break;case"td":r.is(".day")&&!r.is(".disabled")&&(s=parseInt(r.text(),10)||1,i=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),r.is(".old")?0===o?(o=11,i-=1):o-=1:r.is(".new")&&(11===o?(o=0,i+=1):o+=1),this._setDate(n(i,o,s)))}this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e?t!==-1?this.dates.remove(t):this.dates.push(e):this.dates.clear(),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),this._trigger("changeDate");var n;this.isInput?n=this.element:this.component&&(n=this.element.find("input")),n&&n.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveMonth:function(e,n){if(!e)return t;if(!n)return e;var i,o,s=new Date(e.valueOf()),r=s.getUTCDate(),a=s.getUTCMonth(),l=Math.abs(n);if(n=n>0?1:-1,1===l)o=n===-1?function(){return s.getUTCMonth()===a}:function(){return s.getUTCMonth()!==i},i=a+n,s.setUTCMonth(i),(i<0||i>11)&&(i=(i+12)%12);else{for(var c=0;c<l;c++)s=this.moveMonth(s,n);i=s.getUTCMonth(),s.setUTCDate(r),o=function(){return i!==s.getUTCMonth()}}for(;o();)s.setUTCDate(--r),s.setUTCMonth(i);return s},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))return void(27===e.keyCode&&this.show());var t,n,o,s=!1,r=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault();break;case 37:case 39:if(!this.o.keyboardNavigation)break;t=37===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),o=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),o=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+t),o=new Date(r),o.setUTCDate(r.getUTCDate()+t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=o,this.setValue(),this.fill(),e.preventDefault());break;case 38:case 40:if(!this.o.keyboardNavigation)break;t=38===e.keyCode?-1:1,e.ctrlKey?(n=this.moveYear(this.dates.get(-1)||i(),t),o=this.moveYear(r,t),this._trigger("changeYear",this.viewDate)):e.shiftKey?(n=this.moveMonth(this.dates.get(-1)||i(),t),o=this.moveMonth(r,t),this._trigger("changeMonth",this.viewDate)):(n=new Date(this.dates.get(-1)||i()),n.setUTCDate(n.getUTCDate()+7*t),o=new Date(r),o.setUTCDate(r.getUTCDate()+7*t)),this.dateWithinRange(n)&&(this.focusDate=this.viewDate=o,this.setValue(),this.fill(),e.preventDefault());break;case 32:break;case 13:r=this.focusDate||this.dates.get(-1)||this.viewDate,this._toggle_multidate(r),s=!0,this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}if(s){this.dates.length?this._trigger("changeDate"):this._trigger("clearDate");var a;this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change()}},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(2,this.viewMode+e))),this.picker.find(">div").hide().filter(".datepicker-"+p.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()}};var u=function(t,n){this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,e(this.inputs).datepicker(n).bind("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};u.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var n=e(t.target).data("datepicker"),i=n.getUTCDate(),o=e.inArray(t.target,this.inputs),s=this.inputs.length;if(o!==-1){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(i)}),i<this.dates[o])for(;o>=0&&i<this.dates[o];)this.pickers[o--].setUTCDate(i);else if(i>this.dates[o])for(;o<s&&i>this.dates[o];)this.pickers[o++].setUTCDate(i);this.updateDates(),delete this.updating}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var d=e.fn.datepicker;e.fn.datepicker=function(n){var i=Array.apply(null,arguments);i.shift();var o;return this.each(function(){var a=e(this),l=a.data("datepicker"),d="object"==typeof n&&n;if(!l){var f=s(this,"date"),m=e.extend({},h,f,d),p=r(m.language),g=e.extend({},h,p,f,d);if(a.is(".input-daterange")||g.inputs){var y={inputs:g.inputs||a.find("input").toArray()};a.data("datepicker",l=new u(this,e.extend(g,y)))}else a.data("datepicker",l=new c(this,g))}if("string"==typeof n&&"function"==typeof l[n]&&(o=l[n].apply(l,i),o!==t))return!1}),o!==t?o:this};var h=e.fn.datepicker.defaults={autoclose:!1,beforeShowDay:e.noop,calendarWeeks:!1,clearBtn:!1,daysOfWeekDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-(1/0),startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0},f=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=c;var m=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear"}},p={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4===0&&e%100!==0||e%400===0},getDaysInMonth:function(e,t){return[31,p.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,parseFormat:function(e){var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(i,o,s){function r(){var e=this.slice(0,h[u].length),t=h[u].slice(0,e.length);return e===t}if(!i)return t;if(i instanceof Date)return i;"string"==typeof o&&(o=p.parseFormat(o));var a,l,u,d=/([\-+]\d+)([dmwy])/,h=i.match(/([\-+]\d+)([dmwy])/g);if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,u=0;u<h.length;u++)switch(a=d.exec(h[u]),l=parseInt(a[1]),a[2]){case"d":i.setUTCDate(i.getUTCDate()+l);break;case"m":i=c.prototype.moveMonth.call(c.prototype,i,l);break;case"w":i.setUTCDate(i.getUTCDate()+7*l);break;case"y":i=c.prototype.moveYear.call(c.prototype,i,l)}return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),0,0,0)}h=i&&i.match(this.nonpunctuation)||[],i=new Date;var f,g,y={},v=["yyyy","yy","M","MM","m","mm","d","dd"],w={yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};w.M=w.MM=w.mm=w.m,w.dd=w.d,i=n(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0);var b=o.parts.slice();if(h.length!==b.length&&(b=e(b).filter(function(t,n){return e.inArray(n,v)!==-1}).toArray()),h.length===b.length){var C;for(u=0,C=b.length;u<C;u++){if(f=parseInt(h[u],10),a=b[u],isNaN(f))switch(a){case"MM":g=e(m[s].months).filter(r),f=e.inArray(g[0],m[s].months)+1;break;case"M":g=e(m[s].monthsShort).filter(r),f=e.inArray(g[0],m[s].monthsShort)+1}y[a]=f}var _,x;for(u=0;u<v.length;u++)x=v[u],x in y&&!isNaN(y[x])&&(_=new Date(i),w[x](_,y[x]),isNaN(_)||(i=_))}return i},formatDate:function(t,n,i){if(!t)return"";"string"==typeof n&&(n=p.parseFormat(n));var o={d:t.getUTCDate(),D:m[i].daysShort[t.getUTCDay()],DD:m[i].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:m[i].monthsShort[t.getUTCMonth()],MM:m[i].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m,t=[];for(var s=e.extend([],n.separators),r=0,a=n.parts.length;r<=a;r++)s.length&&t.push(s.shift()),t.push(o[n.parts[r]]);return t.join("")},headTemplate:'<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};p.template='<div class="datepicker"><div class="datepicker-days"><table class="table table-condensed">'+p.headTemplate+"<tbody></tbody>"+p.footTemplate+'</table></div><div class="datepicker-months"><table class="table table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+'</table></div><div class="datepicker-years"><table class="table table-condensed">'+p.headTemplate+p.contTemplate+p.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=p,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=d,this},e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),n.datepicker("show"))}),e(function(){e('[data-provide="datepicker-inline"]').datepicker()})}(window.jQuery);var wysihtml5,Base,Handlebars;Object.defineProperty&&Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(Element.prototype,"textContent")&&!Object.getOwnPropertyDescriptor(Element.prototype,"textContent").get&&!function(){var e=Object.getOwnPropertyDescriptor(Element.prototype,"innerText");Object.defineProperty(Element.prototype,"textContent",{get:function(){return e.get.call(this)},set:function(t){return e.set.call(this,t)}})}(),Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),wysihtml5={version:"0.4.15",commands:{},dom:{},quirks:{},toolbar:{},lang:{},selection:{},views:{},INVISIBLE_SPACE:"\ufeff",EMPTY_FUNCTION:function(){},ELEMENT_NODE:1,TEXT_NODE:3,BACKSPACE_KEY:8,ENTER_KEY:13,ESCAPE_KEY:27,SPACE_KEY:32,DELETE_KEY:46},function(e,t){"function"==typeof define&&define.amd?define(e):t.rangy=e()}(function(){function e(e,t){var n=typeof e[t];return n==x||!(n!=_||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=_||!e[t])}function n(e,t){return typeof e[t]!=S}function i(e){return function(t,n){for(var i=n.length;i--;)if(!e(t,n[i]))return!1;return!0}}function o(e){return e&&k(e,D)&&M(e,E)}function s(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function r(n){t(window,"console")&&e(window.console,"log")&&window.console.log(n)}function a(e,t){t?window.alert(e):r(e)}function l(e){O.initialized=!0,O.supported=!1,a("Rangy is not supported on this page in your browser. Reason: "+e,O.config.alertOnFail)}function c(e){a("Rangy warning: "+e,O.config.alertOnWarn)}function u(e){return e.message||e.description||e+""}function d(){var t,n,i,a,c,d,h,m,p;if(!O.initialized){if(n=!1,i=!1,e(document,"createRange")&&(t=document.createRange(),k(t,N)&&M(t,T)&&(n=!0)),a=s(document),!a||"body"!=a.nodeName.toLowerCase())return void l("No body element found");if(a&&e(a,"createTextRange")&&(t=a.createTextRange(),o(t)&&(i=!0)),!n&&!i)return void l("Neither Range nor TextRange are available");O.initialized=!0,O.features={implementsDomRange:n,implementsTextRange:i};for(h in A)(c=A[h])instanceof f&&c.init(c,O);for(m=0,p=v.length;p>m;++m)try{v[m](O)}catch(g){d="Rangy init listener threw an exception. Continuing. Detail: "+u(g),r(d)}}}function h(e){e=e||window,d();for(var t=0,n=w.length;n>t;++t)w[t](e)}function f(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function m(e,t,n,i){var o=new f(t,n,function(e){if(!e.initialized){e.initialized=!0;try{i(O,e),e.supported=!0}catch(n){var o="Module '"+t+"' failed to load: "+u(n);r(o)}}});A[t]=o}function p(){}function g(){}var y,v,w,b,C,_="object",x="function",S="undefined",T=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],N=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],E=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],D=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],k=i(e),R=i(t),M=i(n),A={},O={version:"1.3alpha.20140804",initialized:!1,supported:!0,util:{isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:k,areHostObjects:R,areHostProperties:M,isTextRange:o,getBody:s},features:{},modules:A,config:{alertOnFail:!0,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==S||rangyAutoInitialize}};return O.fail=l,O.warn=c,{}.hasOwnProperty?O.util.extend=function(e,t,n){var i,o,s;for(s in t)t.hasOwnProperty(s)&&(i=e[s],o=t[s],n&&null!==i&&"object"==typeof i&&null!==o&&"object"==typeof o&&O.util.extend(i,o,!0),e[s]=o);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e}:l("hasOwnProperty not supported"),function(){var e,t,n=document.createElement("div");n.appendChild(document.createElement("span")),e=[].slice;try{1==e.call(n.childNodes,0)[0].nodeType&&(t=function(t){return e.call(t,0)})}catch(i){}t||(t=function(e){var t,n,i=[];for(t=0,n=e.length;n>t;++t)i[t]=e[t];return i}),O.util.toArray=t}(),e(document,"addEventListener")?y=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?y=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),O.util.addListener=y,v=[],O.init=d,O.addInitListener=function(e){O.initialized?e(O):v.push(e)},w=[],O.addShimListener=function(e){w.push(e)},O.shim=O.createMissingNativeApi=h,f.prototype={init:function(){var e,t,n,i,o=this.dependencies||[];for(e=0,t=o.length;t>e;++e){if(i=o[e],n=A[i],!(n&&n instanceof f))throw Error("required module '"+i+"' not found");if(n.init(),!n.supported)throw Error("required module '"+i+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,Error("Module '"+this.name+"' failed to load: "+e)},warn:function(e){O.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){O.warn("DEPRECATED: "+e+" in module "+this.name+"is deprecated. Please use "+t+" instead");
},createError:function(e){return Error("Error in Rangy "+this.name+" module: "+e)}},O.createModule=function(e){var t,n,i;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]),i=m(!1,e,n,t),O.initialized&&i.init()},O.createCoreModule=function(e,t,n){m(!0,e,t,n)},O.RangePrototype=p,O.rangePrototype=new p,O.selectionPrototype=new g,b=!1,C=function(){b||(b=!0,!O.initialized&&O.config.autoInitialize&&d())},typeof window==S?void l("No window found"):typeof document==S?void l("No document found"):(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",C,!1),y(window,"load",C),O.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==I||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function i(e){var t=e.parentNode;return 1==t.nodeType?t:null}function o(e){for(var t=0;e=e.previousSibling;)++t;return t}function s(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function r(e,t){var n,i=[];for(n=e;n;n=n.parentNode)i.push(n);for(n=t;n;n=n.parentNode)if(M(i,n))return n;return null}function a(e,t,n){for(var i=n?t:t.parentNode;i;){if(i===e)return!0;i=i.parentNode}return!1}function l(e,t){return a(e,t,!0)}function c(e,t,n){for(var i,o=n?e:e.parentNode;o;){if(i=o.parentNode,i===t)return o;o=i}return null}function u(e){var t=e.nodeType;return 3==t||4==t||8==t}function d(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function h(e,t){var n=t.nextSibling,i=t.parentNode;return n?i.insertBefore(e,n):i.appendChild(e),e}function f(e,t,n){var i,s,r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),h(r,e),n)for(i=0;s=n[i++];)s.node==e&&s.offset>t?(s.node=r,s.offset-=t):s.node==e.parentNode&&s.offset>o(e)&&++s.offset;return r}function m(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=I)return e.ownerDocument;if(typeof e.document!=I)return e.document;if(e.parentNode)return m(e.parentNode);throw t.createError("getDocument: no document found for node")}function p(e){var n=m(e);if(typeof n.defaultView!=I)return n.defaultView;if(typeof n.parentWindow!=I)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function g(e){if(typeof e.contentDocument!=I)return e.contentDocument;if(typeof e.contentWindow!=I)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function y(e){if(typeof e.contentWindow!=I)return e.contentWindow;if(typeof e.contentDocument!=I)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function v(e){return e&&L.isHostMethod(e,"setTimeout")&&L.isHostObject(e,"document")}function w(e,t,n){var i;if(e?L.isHostProperty(e,"nodeType")?i=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?g(e):m(e):v(e)&&(i=e.document):i=document,!i)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return i}function b(e){for(var t;t=e.parentNode;)e=t;return e}function C(e,n,i,s){var a,l,u,d,h;if(e==i)return n===s?0:s>n?-1:1;if(a=c(i,e,!0))return n<=o(a)?-1:1;if(a=c(e,i,!0))return o(a)<s?-1:1;if(l=r(e,i),!l)throw Error("comparePoints error: nodes have no common ancestor");if(u=e===l?l:c(e,l,!0),d=i===l?l:c(i,l,!0),u===d)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(h=l.firstChild;h;){if(h===u)return-1;if(h===d)return 1;h=h.nextSibling}}function _(e){var t;try{return t=e.parentNode,!1}catch(n){return!0}}function x(e){if(!e)return"[No node]";if(A&&_(e))return"[Broken node]";if(u(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+o(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function S(e){for(var t,n=m(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function T(e){this.root=e,this._next=e}function N(e){return new T(e)}function E(e,t){this.node=e,this.offset=t}function D(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var k,R,M,A,O,I="undefined",L=e.util;L.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),L.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method"),k=document.createElement("div"),L.areHostMethods(k,["insertBefore","appendChild","cloneNode"]||!L.areHostObjects(k,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),L.isHostProperty(k,"innerHTML")||t.fail("Element is missing innerHTML property"),R=document.createTextNode("test"),L.areHostMethods(R,["splitText","deleteData","insertData","appendData","cloneNode"]||!L.areHostObjects(k,["previousSibling","nextSibling","childNodes","parentNode"])||!L.areHostProperties(R,["data"]))||t.fail("Incomplete Text Node implementation"),M=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},A=!1,function(){var t,n=document.createElement("b");n.innerHTML="1",t=n.firstChild,n.innerHTML="<br>",A=_(t),e.features.crashyTextNodes=A}(),typeof window.getComputedStyle!=I?O=function(e,t){return p(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=I?O=function(e,t){return e.currentStyle[t]}:t.fail("No means of obtaining computed style properties found"),T.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},E.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+x(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},D.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},D.prototype.toString=function(){return this.message},e.dom={arrayContains:M,isHtmlNamespace:n,parentElement:i,getNodeIndex:o,getNodeLength:s,getCommonAncestor:r,isAncestorOf:a,isOrIsAncestorOf:l,getClosestAncestorIn:c,isCharacterDataNode:u,isTextOrCommentNode:d,insertAfter:h,splitDataNode:f,getDocument:m,getWindow:p,getIframeWindow:y,getIframeDocument:g,getBody:L.getBody,isWindow:v,getContentDocument:w,getRootContainer:b,comparePoints:C,isBrokenNode:_,inspectNode:x,getComputedStyleProperty:O,fragmentFromNodeChildren:S,createIterator:N,DomPosition:E},e.DOMException=D}),O.createCoreModule("DomRange",["DomUtil"],function(e){function t(e,t){return 3!=e.nodeType&&(re(e,t.startContainer)||re(e,t.endContainer))}function n(e){return e.document||ae(e.startContainer)}function i(e){return new ne(e.parentNode,se(e))}function o(e){return new ne(e.parentNode,se(e)+1)}function s(e,t,n){var i=11==e.nodeType?e.firstChild:e;return oe(t)?n==t.length?ee.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:ce(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),i}function r(e,t,i){if(S(e),S(t),n(t)!=n(e))throw new ie("WRONG_DOCUMENT_ERR");var o=le(e.startContainer,e.startOffset,t.endContainer,t.endOffset),s=le(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return i?0>=o&&s>=0:0>o&&s>0}function a(e){var t,i,o,s;for(o=n(e.range).createDocumentFragment();i=e.next();){if(t=e.isPartiallySelectedSubtree(),i=i.cloneNode(!t),t&&(s=e.getSubtreeIterator(),i.appendChild(a(s)),s.detach()),10==i.nodeType)throw new ie("HIERARCHY_REQUEST_ERR");o.appendChild(i)}return o}function l(e,t,n){var i,o,s,r;for(n=n||{stop:!1};s=e.next();)if(e.isPartiallySelectedSubtree()){if(t(s)===!1)return void(n.stop=!0);if(r=e.getSubtreeIterator(),l(r,t,n),r.detach(),n.stop)return}else for(i=ee.createIterator(s);o=i.next();)if(t(o)===!1)return void(n.stop=!0)}function c(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),c(t),t.detach()):e.remove()}function u(e){for(var t,i,o=n(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),i=e.getSubtreeIterator(),t.appendChild(u(i)),i.detach()):e.remove(),10==t.nodeType)throw new ie("HIERARCHY_REQUEST_ERR");o.appendChild(t)}return o}function d(e,t,n){var i,o,s=!(!t||!t.length),r=!!n;return s&&(i=RegExp("^("+t.join("|")+")$")),o=[],l(new f(e,(!1)),function(t){var a,l;(!s||i.test(t.nodeType))&&(!r||n(t))&&(a=e.startContainer,t==a&&oe(a)&&e.startOffset==a.length||(l=e.endContainer,t==l&&oe(l)&&0==e.endOffset||o.push(t)))}),o}function h(e){var t=void 0===e.getName?"Range":e.getName();return"["+t+"("+ee.inspectNode(e.startContainer)+":"+e.startOffset+", "+ee.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function f(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&oe(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||oe(this.sc)?ue(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||oe(this.ec)?ue(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function m(e){return function(t,n){for(var i,o=n?t:t.parentNode;o;){if(i=o.nodeType,he(e,i))return o;o=o.parentNode}return null}}function p(e,t){if(W(e,t))throw new ie("INVALID_NODE_TYPE_ERR")}function g(e,t){if(!he(t,e.nodeType))throw new ie("INVALID_NODE_TYPE_ERR")}function y(e,t){if(0>t||t>(oe(e)?e.length:e.childNodes.length))throw new ie("INDEX_SIZE_ERR")}function v(e,t){if(U(e,!0)!==U(t,!0))throw new ie("WRONG_DOCUMENT_ERR")}function w(e){if(Y(e,!0))throw new ie("NO_MODIFICATION_ALLOWED_ERR")}function b(e,t){if(!e)throw new ie(t)}function C(e){return me&&ee.isBrokenNode(e)||!he(L,e.nodeType)&&!U(e,!0)}function _(e,t){return t<=(oe(e)?e.length:e.childNodes.length)}function x(e){return!!e.startContainer&&!!e.endContainer&&!C(e.startContainer)&&!C(e.endContainer)&&_(e.startContainer,e.startOffset)&&_(e.endContainer,e.endOffset)}function S(e){if(!x(e))throw Error("Range error: Range is no longer valid after DOM mutation ("+e.inspect()+")")}function T(e,t){var n,i,o,s,r;S(e),n=e.startContainer,i=e.startOffset,o=e.endContainer,s=e.endOffset,r=n===o,oe(o)&&s>0&&s<o.length&&ce(o,s,t),oe(n)&&i>0&&i<n.length&&(n=ce(n,i,t),r?(s-=i,o=n):o==n.parentNode&&s>=se(n)&&s++,i=0),e.setStartAndEnd(n,i,o,s)}function N(e){S(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function E(e){e.START_TO_START=V,e.START_TO_END=G,e.END_TO_END=$,e.END_TO_START=K,e.NODE_BEFORE=X,e.NODE_AFTER=Z,e.NODE_BEFORE_AND_AFTER=Q,e.NODE_INSIDE=J}function D(e){E(e),E(e.prototype)}function k(e,t){return function(){var n,i,s,r,a,c,u;return S(this),n=this.startContainer,i=this.startOffset,s=this.commonAncestorContainer,r=new f(this,(!0)),n!==s&&(a=ue(n,s,!0),c=o(a),n=c.node,i=c.offset),l(r,w),r.reset(),u=e(r),r.detach(),t(this,n,i,n,i),u}}function R(n,s){function r(e,t){return function(n){g(n,I),g(fe(n),L);var s=(e?i:o)(n);(t?a:l)(this,s.node,s.offset)}}function a(e,t,n){var i=e.endContainer,o=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((fe(t)!=fe(i)||1==le(t,n,i,o))&&(i=t,o=n),s(e,t,n,i,o))}function l(e,t,n){var i=e.startContainer,o=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((fe(t)!=fe(i)||-1==le(t,n,i,o))&&(i=t,o=n),s(e,i,o,t,n))}var d=function(){};d.prototype=e.rangePrototype,n.prototype=new d,te.extend(n.prototype,{setStart:function(e,t){p(e,!0),y(e,t),a(this,e,t)},setEnd:function(e,t){p(e,!0),y(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],i=t,o=n;switch(e.length){case 3:o=e[2];break;case 4:i=e[2],o=e[3]}s(this,t,n,i,o)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:r(!0,!0),setStartAfter:r(!1,!0),setEndBefore:r(!0,!1),setEndAfter:r(!1,!1),collapse:function(e){S(this),e?s(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):s(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){p(e,!0),s(this,e,0,e,de(e))},selectNode:function(e){p(e,!1),g(e,I);var t=i(e),n=o(e);s(this,t.node,t.offset,n.node,n.offset)},extractContents:k(u,s),deleteContents:k(c,s),canSurroundContents:function(){var e,n;return S(this),w(this.startContainer),w(this.endContainer),e=new f(this,(!0)),n=e._first&&t(e._first,this)||e._last&&t(e._last,this),e.detach(),!n},splitBoundaries:function(){T(this)},splitBoundariesPreservingPositions:function(e){T(this,e)},normalizeBoundaries:function(){var e,t,n,i,o,r,a,l,c;S(this),e=this.startContainer,t=this.startOffset,n=this.endContainer,i=this.endOffset,o=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(n=e,i=e.length,e.appendData(t.data),t.parentNode.removeChild(t))},r=function(o){var s,r,a=o.previousSibling;a&&a.nodeType==o.nodeType&&(e=o,s=o.length,t=a.length,o.insertData(0,a.data),a.parentNode.removeChild(a),e==n?(i+=t,n=e):n==o.parentNode&&(r=se(o),i==r?(n=o,i=s):i>r&&i--))},a=!0,oe(n)?n.length==i&&o(n):(i>0&&(l=n.childNodes[i-1],l&&oe(l)&&o(l)),a=!this.collapsed),a?oe(e)?0==t&&r(e):t<e.childNodes.length&&(c=e.childNodes[t],c&&oe(c)&&r(c)):(e=n,t=i),s(this,e,t,n,i)},collapseToPoint:function(e,t){p(e,!0),y(e,t),this.setStartAndEnd(e,t)}}),D(n)}function M(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:ee.getCommonAncestor(e.startContainer,e.endContainer)}function A(e,t,n,i,o){e.startContainer=t,e.startOffset=n,e.endContainer=i,e.endOffset=o,e.document=ee.getDocument(t),M(e)}function O(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,M(this)}var I,L,P,B,H,U,Y,W,q,F,j,z,V,G,$,K,X,Z,Q,J,ee=e.dom,te=e.util,ne=ee.DomPosition,ie=e.DOMException,oe=ee.isCharacterDataNode,se=ee.getNodeIndex,re=ee.isOrIsAncestorOf,ae=ee.getDocument,le=ee.comparePoints,ce=ee.splitDataNode,ue=ee.getClosestAncestorIn,de=ee.getNodeLength,he=ee.arrayContains,fe=ee.getRootContainer,me=e.features.crashyTextNodes;f.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,oe(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!oe(n)||n!==this.sc&&n!==this.ec?n.parentNode&&n.parentNode.removeChild(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){var e=this._current;return t(e,this.range)},getSubtreeIterator:function(){var e,t,i,o,s,r;return this.isSingleCharacterDataNode?(e=this.range.cloneRange(),e.collapse(!1)):(e=new O(n(this.range)),t=this._current,i=t,o=0,s=t,r=de(t),re(t,this.sc)&&(i=this.sc,o=this.so),re(t,this.ec)&&(s=this.ec,r=this.eo),A(e,i,o,s,r)),new f(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}},I=[1,3,4,5,7,8,10],L=[2,9,11],P=[5,6,10,12],B=[1,3,4,5,7,8,10,11],H=[1,3,4,5,7,8],U=m([9,11]),Y=m(P),W=m([6,10,12]),q=document.createElement("style"),F=!1;try{q.innerHTML="<b>x</b>",F=3==q.firstChild.nodeType}catch(pe){}e.features.htmlParsingConforms=F,j=F?function(e){var t,n=this.startContainer,i=ae(n);if(!n)throw new ie("INVALID_STATE_ERR");return t=null,1==n.nodeType?t=n:oe(n)&&(t=ee.parentElement(n)),t=null===t||"HTML"==t.nodeName&&ee.isHtmlNamespace(ae(t).documentElement)&&ee.isHtmlNamespace(t)?i.createElement("body"):t.cloneNode(!1),t.innerHTML=e,ee.fragmentFromNodeChildren(t)}:function(e){var t=n(this),i=t.createElement("body");return i.innerHTML=e,ee.fragmentFromNodeChildren(i)},z=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],V=0,G=1,$=2,K=3,X=0,Z=1,Q=2,J=3,te.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){var n,i,o,s,r,a;return S(this),v(this.startContainer,t.startContainer),r=e==K||e==V?"start":"end",a=e==G||e==V?"start":"end",n=this[r+"Container"],i=this[r+"Offset"],o=t[a+"Container"],s=t[a+"Offset"],le(n,i,o,s)},insertNode:function(e){if(S(this),g(e,B),w(this.startContainer),re(e,this.startContainer))throw new ie("HIERARCHY_REQUEST_ERR");var t=s(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){var e,t,i;return S(this),this.collapsed?n(this).createDocumentFragment():this.startContainer===this.endContainer&&oe(this.startContainer)?(e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),t=n(this).createDocumentFragment(),t.appendChild(e),t):(i=new f(this,(!0)),e=a(i),i.detach(),e)},canSurroundContents:function(){var e,n;return S(this),w(this.startContainer),w(this.endContainer),e=new f(this,(!0)),n=e._first&&t(e._first,this)||e._last&&t(e._last,this),e.detach(),!n},surroundContents:function(e){if(g(e,H),!this.canSurroundContents())throw new ie("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);s(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){var e,t,i;for(S(this),e=new O(n(this)),t=z.length;t--;)i=z[t],e[i]=this[i];return e},toString:function(){var e,t,n;return S(this),e=this.startContainer,e===this.endContainer&&oe(e)?3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"":(t=[],n=new f(this,(!0)),l(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join(""))},compareNode:function(e){var t,n,i,o;if(S(this),t=e.parentNode,n=se(e),!t)throw new ie("NOT_FOUND_ERR");return i=this.comparePoint(t,n),o=this.comparePoint(t,n+1),0>i?o>0?Q:X:o>0?Z:J},comparePoint:function(e,t){return S(this),b(e,"HIERARCHY_REQUEST_ERR"),v(e,this.startContainer),le(e,t,this.startContainer,this.startOffset)<0?-1:le(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:j,toHtml:function(){return N(this)},intersectsNode:function(e,t){var i,o,s,r;return S(this),b(e,"NOT_FOUND_ERR"),ae(e)===n(this)&&(i=e.parentNode,o=se(e),b(i,"NOT_FOUND_ERR"),s=le(i,o,this.endContainer,this.endOffset),r=le(i,o+1,this.startContainer,this.startOffset),t?0>=s&&r>=0:0>s&&r>0)},isPointInRange:function(e,t){return S(this),b(e,"HIERARCHY_REQUEST_ERR"),v(e,this.startContainer),le(e,t,this.startContainer,this.startOffset)>=0&&le(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return r(this,e,!1)},intersectsOrTouchesRange:function(e){return r(this,e,!0)},intersection:function(e){var t,n,i;return this.intersectsRange(e)?(t=le(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=le(this.endContainer,this.endOffset,e.endContainer,e.endOffset),i=this.cloneRange(),-1==t&&i.setStart(e.startContainer,e.startOffset),1==n&&i.setEnd(e.endContainer,e.endOffset),i):null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==le(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==le(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new ie("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==J},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,de(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t,n,i=this.cloneRange();return i.selectNode(e),t=i.getNodes([3]),t.length>0?(i.setStart(t[0],0),n=t.pop(),i.setEnd(n,n.length),this.containsRange(i)):this.containsNodeContents(e)},getNodes:function(e,t){return S(this),d(this,e,t)},getDocument:function(){return n(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var i,o,s,r=n(this),a=e.createRange(r);return t=t||ee.getBody(r),a.selectNodeContents(t),i=this.intersection(a),o=0,s=0,i&&(a.setEnd(i.startContainer,i.startOffset),o=(""+a).length,s=o+(""+i).length),{start:o,end:s,containerNode:t}},moveToBookmark:function(e){var t,n,i,o,s,r,a,l=e.containerNode,c=0;for(this.setStart(l,0),this.collapse(!0),t=[l],i=!1,o=!1;!o&&(n=t.pop());)if(3==n.nodeType)s=c+n.length,!i&&e.start>=c&&e.start<=s&&(this.setStart(n,e.start-c),i=!0),i&&e.end>=c&&e.end<=s&&(this.setEnd(n,e.end-c),o=!0),c=s;else for(a=n.childNodes,r=a.length;r--;)t.push(a[r])},getName:function(){return"DomRange"},equals:function(e){return O.rangesEqual(this,e)},isValid:function(){return x(this)},inspect:function(){return h(this)},detach:function(){}}),R(O,A),te.extend(O,{rangeProperties:z,RangeIterator:f,copyComparisonConstants:D,createPrototypeRange:R,inspect:h,toHtml:N,getRangeDocument:n,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=O}),O.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,i,o,s,r,a,l,c,u=e.dom,d=e.util,h=u.DomPosition,f=e.DomRange,m=u.getBody,p=u.getContentDocument,g=u.isCharacterDataNode;e.features.implementsDomRange&&!function(){function i(e){for(var t,n=v.length;n--;)t=v[n],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function o(e,t,n,i,o){var s=e.startContainer!==t||e.startOffset!=n,r=e.endContainer!==i||e.endOffset!=o,a=!e.equals(e.nativeRange);(s||r||a)&&(e.setEnd(i,o),e.setStart(t,n))}var s,r,a,l,c,h,g,y,v=f.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,i(this)},f.createPrototypeRange(n,o),s=n.prototype,s.selectNode=function(e){this.nativeRange.selectNode(e),i(this)},s.cloneContents=function(){return this.nativeRange.cloneContents()},s.surroundContents=function(e){this.nativeRange.surroundContents(e),i(this)},s.collapse=function(e){this.nativeRange.collapse(e),i(this)},s.cloneRange=function(){return new n(this.nativeRange.cloneRange())},s.refresh=function(){i(this)},s.toString=function(){return""+this.nativeRange},a=document.createTextNode("test"),m(document).appendChild(a),l=document.createRange(),l.setStart(a,0),l.setEnd(a,0);try{l.setStart(a,1),s.setStart=function(e,t){this.nativeRange.setStart(e,t),i(this)},s.setEnd=function(e,t){this.nativeRange.setEnd(e,t),i(this)},r=function(e){return function(t){this.nativeRange[e](t),i(this)}}}catch(w){s.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}i(this)},s.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}i(this)},r=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(o){this.nativeRange[t](n),this.nativeRange[e](n)}i(this)}}}s.setStartBefore=r("setStartBefore","setEndBefore"),s.setStartAfter=r("setStartAfter","setEndAfter"),s.setEndBefore=r("setEndBefore","setStartBefore"),s.setEndAfter=r("setEndAfter","setStartAfter"),s.selectNodeContents=function(e){this.setStartAndEnd(e,0,u.getNodeLength(e))},l.selectNodeContents(a),l.setEnd(a,3),c=document.createRange(),c.selectNodeContents(a),c.setEnd(a,4),c.setStart(a,2),s.compareBoundaryPoints=-1==l.compareBoundaryPoints(l.START_TO_END,c)&&1==l.compareBoundaryPoints(l.END_TO_START,c)?function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)},h=document.createElement("div"),h.innerHTML="123",g=h.firstChild,y=m(document),y.appendChild(h),l.setStart(g,1),l.setEnd(g,2),l.deleteContents(),"13"==g.data&&(s.deleteContents=function(){this.nativeRange.deleteContents(),i(this)},s.extractContents=function(){var e=this.nativeRange.extractContents();return i(this),e}),y.removeChild(h),y=null,d.isHostMethod(l,"createContextualFragment")&&(s.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),m(document).removeChild(a),s.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return e=p(e,t,"createNativeRange"),e.createRange()}}(),e.features.implementsTextRange&&(o=function(e){var t,n,i,o=e.parentElement(),s=e.duplicate();return s.collapse(!0),t=s.parentElement(),s=e.duplicate(),s.collapse(!1),n=s.parentElement(),i=t==n?t:u.getCommonAncestor(t,n),i==o?i:u.getCommonAncestor(o,i)},s=function(e){return 0==e.compareEndPoints("StartToEnd",e)},r=function(e,t,n,i,o){var s,r,a,l,c,d,f,m,p,y,v,w,b,C,_,x,S=e.duplicate();if(S.collapse(n),s=S.parentElement(),u.isOrIsAncestorOf(t,s)||(s=t),!s.canHaveHTML)return r=new h(s.parentNode,u.getNodeIndex(s)),{boundaryPosition:r,nodeInfo:{nodeIndex:r.offset,containerElement:r.node}};for(a=u.getDocument(s).createElement("span"),a.parentNode&&a.parentNode.removeChild(a),c=n?"StartToStart":"StartToEnd",y=o&&o.containerElement==s?o.nodeIndex:0,v=s.childNodes.length,w=v,b=w;b==v?s.appendChild(a):s.insertBefore(a,s.childNodes[b]),S.moveToElementText(a),l=S.compareEndPoints(c,e),0!=l&&y!=w;){if(-1==l){if(w==y+1)break;y=b}else w=w==y+1?y:b;b=Math.floor((y+w)/2),s.removeChild(a)}if(p=a.nextSibling,-1==l&&p&&g(p)){if(S.setEndPoint(n?"EndToStart":"EndToEnd",e),/[\r\n]/.test(p.data))for(_=S.duplicate(),x=_.text.replace(/\r\n/g,"\r").length,C=_.moveStart("character",x);-1==(l=_.compareEndPoints("StartToEnd",_));)C++,_.moveStart("character",1);else C=S.text.length;m=new h(p,C)}else d=(i||!n)&&a.previousSibling,f=(i||n)&&a.nextSibling,m=f&&g(f)?new h(f,0):d&&g(d)?new h(d,d.data.length):new h(s,u.getNodeIndex(a));return a.parentNode.removeChild(a),{boundaryPosition:m,nodeInfo:{nodeIndex:b,containerElement:s}}},a=function(e,t){var n,i,o,s,r=e.offset,a=u.getDocument(e.node),l=m(a).createTextRange(),c=g(e.node);return c?(n=e.node,i=n.parentNode):(s=e.node.childNodes,n=r<s.length?s[r]:null,i=e.node),o=a.createElement("span"),o.innerHTML="&#feff;",n?i.insertBefore(o,n):i.appendChild(o),l.moveToElementText(o),l.collapse(!t),i.removeChild(o),c&&l[t?"moveStart":"moveEnd"]("character",r),l},i=function(e){this.textRange=e,this.refresh()},i.prototype=new f(document),i.prototype.refresh=function(){var e,t,n,i=o(this.textRange);s(this.textRange)?t=e=r(this.textRange,i,!0,!0).boundaryPosition:(n=r(this.textRange,i,!0,!1),e=n.boundaryPosition,t=r(this.textRange,i,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},i.prototype.getName=function(){return"WrappedTextRange"},f.copyComparisonConstants(i),l=function(e){var t,n,i;return e.collapsed?a(new h(e.startContainer,e.startOffset),!0):(t=a(new h(e.startContainer,e.startOffset),!0),n=a(new h(e.endContainer,e.endOffset),!1),i=m(f.getRangeDocument(e)).createTextRange(),i.setEndPoint("StartToStart",t),i.setEndPoint("EndToEnd",n),i)},i.rangeToTextRange=l,i.prototype.toTextRange=function(){return l(this)},e.WrappedTextRange=i,(!e.features.implementsDomRange||e.config.preferTextRange)&&(c=function(){return this}(),void 0===c.Range&&(c.Range=i),e.createNativeRange=function(e){return e=p(e,t,"createNativeRange"),m(e).createTextRange()},e.WrappedRange=i)),e.createRange=function(n){return n=p(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=p(e,t,"createRangyRange"),new f(e)},e.createIframeRange=function(n){return t.deprecationNotice("createIframeRange()","createRange(iframeEl)"),e.createRange(n)},e.createIframeRangyRange=function(n){return t.deprecationNotice("createIframeRangyRange()","createRangyRange(iframeEl)"),e.createRangyRange(n)},e.addShimListener(function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),O.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function i(e,n){if(e){if(N.isWindow(e))return e;if(e instanceof y)return e.win;var i=N.getContentDocument(e,t,n);return N.getWindow(i)}return window}function o(e){return i(e,"getWinSelection").getSelection()}function s(e){return i(e,"getDocSelection").document.selection}function r(e){var t=!1;return e.anchorNode&&(t=1==N.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function a(e,t,n){var i=n?"end":"start",o=n?"start":"end";e.anchorNode=t[i+"Container"],e.anchorOffset=t[i+"Offset"],e.focusNode=t[o+"Container"],e.focusOffset=t[o+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function c(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function u(t){var n;return t instanceof k?(n=e.createNativeRange(t.getDocument()),n.setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof R?n=t.nativeRange:L.implementsDomRange&&t instanceof N.getWindow(t.startContainer).Range&&(n=t),n}function d(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!N.isAncestorOf(e[0],e[t]))return!1;return!0}function h(e){var n=e.getNodes();if(!d(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function f(e){return!!e&&void 0!==e.text}function m(e,t){var n=new R(t);e._ranges=[n],a(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function p(t){var n,i,o,s;if(t._ranges.length=0,"None"==t.docSelection.type)c(t);else if(n=t.docSelection.createRange(),f(n))m(t,n);else{for(t.rangeCount=n.length,o=B(n.item(0)),s=0;s<t.rangeCount;++s)i=e.createRange(o),i.selectNode(n.item(s)),t._ranges.push(i);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,a(t,t._ranges[t.rangeCount-1],!1)}}function g(e,n){var i,o,s=e.docSelection.createRange(),r=h(n),a=B(s.item(0)),l=H(a).createControlRange();for(i=0,o=s.length;o>i;++i)l.add(s.item(i));try{l.add(r)}catch(c){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}l.select(),p(e)}function y(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function v(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function w(e,t){for(var n,i,o=te.length;o--;)if(n=te[o],i=n.selection,"deleteAll"==t)v(i);else if(n.win==e)return"delete"==t?(te.splice(o,1),!0):i;return"deleteAll"==t&&(te.length=0),null}function b(e,n){var i,o,s,r=B(n[0].startContainer),a=H(r).createControlRange();for(i=0,s=n.length;s>i;++i){o=h(n[i]);try{a.add(o)}catch(l){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}a.select(),p(e)}function C(e,t){if(e.win.document!=B(t))throw new M("WRONG_DOCUMENT_ERR")}function _(t){return function(n,i){var o;this.rangeCount?(o=this.getRangeAt(0),o["set"+(t?"Start":"End")](n,i)):(o=e.createRange(this.win.document),o.setStartAndEnd(n,i)),this.setSingleRange(o,this.isBackward())}}function x(e){var t,n,i=[],o=new A(e.anchorNode,e.anchorOffset),s=new A(e.focusNode,e.focusOffset),r="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(t=0,n=e.rangeCount;n>t;++t)i[t]=k.inspect(e.getRangeAt(t));return"["+r+"(Ranges: "+i.join(", ")+")(anchor: "+o.inspect()+", focus: "+s.inspect()+"]";
}var S,T,N,E,D,k,R,M,A,O,I,L,P,B,H,U,Y,W,q,F,j,z,V,G,$,K,X,Z,Q,J,ee,te,ne,ie,oe,se,re,ae;if(e.config.checkSelectionRanges=!0,S="boolean",T="number",N=e.dom,E=e.util,D=E.isHostMethod,k=e.DomRange,R=e.WrappedRange,M=e.DOMException,A=N.DomPosition,L=e.features,P="Control",B=N.getDocument,H=N.getBody,U=k.rangesEqual,Y=D(window,"getSelection"),W=E.isHostObject(document,"selection"),L.implementsWinGetSelection=Y,L.implementsDocSelection=W,q=W&&(!Y||e.config.preferTextRange),q?(O=s,e.isSelectionValid=function(e){var t=i(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||B(n.createRange().parentElement())==t}):Y?(O=o,e.isSelectionValid=function(){return!0}):t.fail("Neither document.selection or window.getSelection() detected."),e.getNativeSelection=O,F=O(),j=e.createNativeRange(document),z=H(document),V=E.areHostProperties(F,["anchorNode","focusNode","anchorOffset","focusOffset"]),L.selectionHasAnchorAndFocus=V,G=D(F,"extend"),L.selectionHasExtend=G,$=typeof F.rangeCount==T,L.selectionHasRangeCount=$,K=!1,X=!0,Z=G?function(t,n){var i=k.getRangeDocument(n),o=e.createRange(i);o.collapseToPoint(n.endContainer,n.endOffset),t.addRange(u(o)),t.extend(n.startContainer,n.startOffset)}:null,E.areHostMethods(F,["addRange","getRangeAt","removeAllRanges"])&&typeof F.rangeCount==T&&L.implementsDomRange&&!function(){var t,n,i,o,s,a,l,c,u,d,h,f=window.getSelection();if(f){for(t=f.rangeCount,n=t>1,i=[],o=r(f),s=0;t>s;++s)i[s]=f.getRangeAt(s);for(a=H(document),l=a.appendChild(document.createElement("div")),l.contentEditable="false",c=l.appendChild(document.createTextNode("")),u=document.createRange(),u.setStart(c,1),u.collapse(!0),f.addRange(u),X=1==f.rangeCount,f.removeAllRanges(),n||(d=window.navigator.appVersion.match(/Chrome\/(.*?) /),d&&parseInt(d[1])>=36?K=!1:(h=u.cloneRange(),u.setStart(c,0),h.setEnd(c,3),h.setStart(c,2),f.addRange(u),f.addRange(h),K=2==f.rangeCount)),a.removeChild(l),f.removeAllRanges(),s=0;t>s;++s)0==s&&o?Z?Z(f,i[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),f.addRange(i[s])):f.addRange(i[s])}}(),L.selectionSupportsMultipleRanges=K,L.collapsedNonEditableSelectionsSupported=X,Q=!1,z&&D(z,"createControlRange")&&(J=z.createControlRange(),E.areHostProperties(J,["item","add"])&&(Q=!0)),L.implementsControlRange=Q,I=V?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed},D(F,"getRangeAt")?ee=function(e,t){try{return e.getRangeAt(t)}catch(n){return null}}:V&&(ee=function(t){var n=B(t.anchorNode),i=e.createRange(n);return i.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),i.collapsed!==this.isCollapsed&&i.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),i}),y.prototype=e.selectionPrototype,te=[],ne=function(e){var t,n,o;return e&&e instanceof y?(e.refresh(),e):(e=i(e,"getNativeSelection"),t=w(e),n=O(e),o=W?s(e):null,t?(t.nativeSelection=n,t.docSelection=o,t.refresh()):(t=new y(n,o,e),te.push({win:e,selection:t})),t)},e.getSelection=ne,e.getIframeSelection=function(n){return t.deprecationNotice("getIframeSelection()","getSelection(iframeEl)"),e.getSelection(N.getIframeWindow(n))},ie=y.prototype,!q&&V&&E.areHostMethods(F,["removeAllRanges","addRange"]))ie.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),c(this)},oe=function(e,t){Z(e.nativeSelection,t),e.refresh()},ie.addRange=$?function(t,i){var o,s;Q&&W&&this.docSelection.type==P?g(this,t):n(i)&&G?oe(this,t):(K?o=this.rangeCount:(this.removeAllRanges(),o=0),this.nativeSelection.addRange(u(t).cloneRange()),this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==o+1?(e.config.checkSelectionRanges&&(s=ee(this.nativeSelection,this.rangeCount-1),s&&!U(s,t)&&(t=new R(s))),this._ranges[this.rangeCount-1]=t,a(this,t,ae(this.nativeSelection)),this.isCollapsed=I(this)):this.refresh())}:function(e,t){n(t)&&G?oe(this,e):(this.nativeSelection.addRange(u(e)),this.refresh())},ie.setRanges=function(e){if(Q&&W&&e.length>1)b(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}};else{if(!(D(F,"empty")&&D(j,"select")&&Q&&q))return t.fail("No means of selecting a Range or TextRange was found"),!1;ie.removeAllRanges=function(){var e,t,n;try{this.docSelection.empty(),"None"!=this.docSelection.type&&(this.anchorNode?e=B(this.anchorNode):this.docSelection.type==P&&(t=this.docSelection.createRange(),t.length&&(e=B(t.item(0)))),e&&(n=H(e).createTextRange(),n.select(),this.docSelection.empty()))}catch(i){}c(this)},ie.addRange=function(t){this.docSelection.type==P?g(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,a(this,t,!1))},ie.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?b(this,e):t&&this.addRange(e[0])}}if(ie.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new M("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()},q)se=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=H(t.win.document).createTextRange(),n.collapse(!0)),t.docSelection.type==P?p(t):f(n)?m(t,n):c(t)};else if(D(F,"getRangeAt")&&typeof F.rangeCount==T)se=function(t){if(Q&&W&&t.docSelection.type==P)p(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,i=t.rangeCount;i>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));a(t,t._ranges[t.rangeCount-1],ae(t.nativeSelection)),t.isCollapsed=I(t)}else c(t)};else{if(!V||typeof F.isCollapsed!=S||typeof j.collapsed!=S||!L.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;se=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=ee(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=I(e)):c(e)}}ie.refresh=function(e){var t,n=e?this._ranges.slice(0):null,i=this.anchorNode,o=this.anchorOffset;if(se(this),e){if(t=n.length,t!=this._ranges.length)return!0;if(this.anchorNode!=i||this.anchorOffset!=o)return!0;for(;t--;)if(!U(n[t],this._ranges[t]))return!0;return!1}},re=function(e,t){var n,i,o=e.getAllRanges();for(e.removeAllRanges(),n=0,i=o.length;i>n;++n)U(t,o[n])||e.addRange(o[n]);e.rangeCount||c(e)},ie.removeRange=Q&&W?function(e){var t,n,i,o,s,r,a,l;if(this.docSelection.type==P){for(t=this.docSelection.createRange(),n=h(e),i=B(t.item(0)),o=H(i).createControlRange(),r=!1,a=0,l=t.length;l>a;++a)s=t.item(a),s!==n||r?o.add(t.item(a)):r=!0;o.select(),p(this)}else re(this,e)}:function(e){re(this,e)},!q&&V&&L.implementsDomRange?(ae=r,ie.isBackward=function(){return ae(this)}):ae=ie.isBackward=function(){return!1},ie.isBackwards=ie.isBackward,ie.toString=function(){var e,t,n=[];for(e=0,t=this.rangeCount;t>e;++e)n[e]=""+this._ranges[e];return n.join("")},ie.collapse=function(t,n){C(this,t);var i=e.createRange(t);i.collapseToPoint(t,n),this.setSingleRange(i),this.isCollapsed=!0},ie.collapseToStart=function(){if(!this.rangeCount)throw new M("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},ie.collapseToEnd=function(){if(!this.rangeCount)throw new M("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},ie.selectAllChildren=function(t){C(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},ie.deleteFromDocument=function(){var e,t,n,i,o;if(Q&&W&&this.docSelection.type==P){for(e=this.docSelection.createRange();e.length;)t=e.item(0),e.remove(t),t.parentNode.removeChild(t);this.refresh()}else if(this.rangeCount&&(n=this.getAllRanges(),n.length)){for(this.removeAllRanges(),i=0,o=n.length;o>i;++i)n[i].deleteContents();this.addRange(n[o-1])}},ie.eachRange=function(e,t){for(var n=0,i=this._ranges.length;i>n;++n)if(e(this.getRangeAt(n)))return t},ie.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},ie.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},ie.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(i){n.push(i[e].apply(i,t))}),n},ie.setStart=_(!0),ie.setEnd=_(!1),e.rangePrototype.select=function(e){ne(this.getDocument()).setSingleRange(this,e)},ie.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},ie.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},ie.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},ie.moveToBookmark=function(t){var n,i,o,s=[];for(n=0;i=t.rangeBookmarks[n++];)o=e.createRange(this.win),o.moveToBookmark(i),s.push(o);t.backward?this.setSingleRange(s[0],"backward"):this.setRanges(s)},ie.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(k.toHtml(t))}),e.join("")},L.implementsTextRange&&(ie.getNativeTextRange=function(){var n,i;if(n=this.docSelection){if(i=n.createRange(),f(i))return i;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),ie.getName=function(){return"WrappedSelection"},ie.inspect=function(){return x(this)},ie.detach=function(){w(this.win,"delete"),v(this)},y.detachAll=function(){w(null,"deleteAll")},y.inspect=x,y.isDirectionBackward=n,e.Selection=y,e.selectionPrototype=ie,e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return ne(e)}),e=null})}),O)},this),function(e,t){"function"==typeof define&&define.amd?define(["rangy"],e):e(t.rangy)}(function(e){e.createModule("SaveRestore",["WrappedRange"],function(e,t){function n(e,t){return(t||document).getElementById(e)}function i(e,t){var n,i="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),o=m.getDocument(e.startContainer),s=e.cloneRange();return s.collapse(t),n=o.createElement("span"),n.id=i,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(o.createTextNode(p)),s.insertNode(n),n}function o(e,i,o,s){var r=n(o,e);r?(i[s?"setStartBefore":"setEndBefore"](r),r.parentNode.removeChild(r)):t.warn("Marker element has been removed. Cannot restore selection.")}function s(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function r(t,n){var o,s,r=e.DomRange.getRangeDocument(t),a=""+t;return t.collapsed?(s=i(t,!1),{document:r,markerId:s.id,collapsed:!0}):(s=i(t,!1),o=i(t,!0),{document:r,startMarkerId:o.id,endMarkerId:s.id,collapsed:!1,backward:n,toString:function(){return"original text: '"+a+"', new text: '"+t+"'"}})}function a(i,s){var r,a,l,c=i.document;return void 0===s&&(s=!0),r=e.createRange(c),i.collapsed?(a=n(i.markerId,c),a?(a.style.display="inline",l=a.previousSibling,l&&3==l.nodeType?(a.parentNode.removeChild(a),r.collapseToPoint(l,l.length)):(r.collapseBefore(a),a.parentNode.removeChild(a))):t.warn("Marker element has been removed. Cannot restore selection.")):(o(c,r,i.startMarkerId,!0),o(c,r,i.endMarkerId,!1)),s&&r.normalizeBoundaries(),r}function l(t,i){var o,a,l,c,u=[];for(t=t.slice(0),t.sort(s),l=0,c=t.length;c>l;++l)u[l]=r(t[l],i);for(l=c-1;l>=0;--l)o=t[l],a=e.DomRange.getRangeDocument(o),o.collapsed?o.collapseAfter(n(u[l].markerId,a)):(o.setEndBefore(n(u[l].endMarkerId,a)),o.setStartAfter(n(u[l].startMarkerId,a)));return u}function c(n){var i,o,s,r;return e.isSelectionValid(n)?(i=e.getSelection(n),o=i.getAllRanges(),s=1==o.length&&i.isBackward(),r=l(o,s),s?i.setSingleRange(o[0],"backward"):i.setRanges(o),{win:n,rangeInfos:r,restored:!1}):(t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null)}function u(e){var t,n=[],i=e.length;for(t=i-1;t>=0;t--)n[t]=a(e[t],!0);return n}function d(t,n){var i,o,s,r;t.restored||(i=t.rangeInfos,o=e.getSelection(t.win),s=u(i),r=i.length,1==r&&n&&e.features.selectionHasExtend&&i[0].backward?(o.removeAllRanges(),o.addRange(s[0],!0)):o.setRanges(s),t.restored=!0)}function h(e,t){var i=n(t,e);i&&i.parentNode.removeChild(i)}function f(e){var t,n,i,o=e.rangeInfos;for(t=0,n=o.length;n>t;++t)i=o[t],i.collapsed?h(e.doc,i.markerId):(h(e.doc,i.startMarkerId),h(e.doc,i.endMarkerId))}var m=e.dom,p="\ufeff";e.util.extend(e,{saveRange:r,restoreRange:a,saveRanges:l,restoreRanges:u,saveSelection:c,restoreSelection:d,removeMarkerElement:h,removeMarkers:f})})},this),Base=function(){},Base.extend=function(e,t){var n,i,o,s=Base.prototype.extend;return Base._prototyping=!0,n=new this,s.call(n,e),n.base=function(){},delete Base._prototyping,i=n.constructor,o=n.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==o)this._constructing=!0,i.apply(this,arguments),delete this._constructing;else if(null!=arguments[0])return(arguments[0].extend||s).call(arguments[0],n)},o.ancestor=this,o.extend=this.extend,o.forEach=this.forEach,o.implement=this.implement,o.prototype=n,o.toString=this.toString,o.valueOf=function(e){return"object"==e?o:i.valueOf()},s.call(o,t),"function"==typeof o.init&&o.init(),o},Base.prototype={extend:function(e,t){var n,i,o,s,r,a,l;if(arguments.length>1)n=this[e],!n||"function"!=typeof t||n.valueOf&&n.valueOf()==t.valueOf()||!/\bbase\b/.test(t)||(i=t.valueOf(),t=function(){var e,t=this.base||Base.prototype.base;return this.base=n,e=i.apply(this,arguments),this.base=t,e},t.valueOf=function(e){return"object"==e?t:i},t.toString=Base.toString),this[e]=t;else if(e){for(o=Base.prototype.extend,Base._prototyping||"function"==typeof this||(o=this.extend||o),s={toSource:null},r=["constructor","toString","valueOf"],a=Base._prototyping?0:1;l=r[a++];)e[l]!=s[l]&&o.call(this,l,e[l]);for(l in e)s[l]||o.call(this,l,e[l])}return this}},Base=Base.extend({constructor:function(){this.extend(arguments[0])}},{ancestor:Object,version:"1.1",forEach:function(e,t,n){for(var i in e)void 0===this.prototype[i]&&t.call(n,e[i],i,e)},implement:function(){for(var e=0;e<arguments.length;e++)"function"==typeof arguments[e]?arguments[e](this.prototype):this.prototype.extend(arguments[e]);return this},toString:function(){return this.valueOf()+""}}),wysihtml5.browser=function(){function e(e){return+(/ipad|iphone|ipod/.test(e)&&e.match(/ os (\d+).+? like mac os x/)||[void 0,0])[1]}function t(e){return+(e.match(/android (\d+)/)||[void 0,0])[1]}function n(e,t){var n,i=-1;return"Microsoft Internet Explorer"==navigator.appName?n=RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"):"Netscape"==navigator.appName&&(n=RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})")),n&&null!=n.exec(navigator.userAgent)&&(i=parseFloat(RegExp.$1)),-1!==i&&(!e||(t?"<"===t?i>e:">"===t?e>i:"<="===t?i>=e:">="===t?e>=i:void 0:e===i))}var i=navigator.userAgent,o=document.createElement("div"),s=-1!==i.indexOf("Gecko")&&-1===i.indexOf("KHTML"),r=-1!==i.indexOf("AppleWebKit/"),a=-1!==i.indexOf("Chrome/"),l=-1!==i.indexOf("Opera/");return{USER_AGENT:i,supported:function(){var n=this.USER_AGENT.toLowerCase(),i="contentEditable"in o,s=document.execCommand&&document.queryCommandSupported&&document.queryCommandState,r=document.querySelector&&document.querySelectorAll,a=this.isIos()&&e(n)<5||this.isAndroid()&&t(n)<4||-1!==n.indexOf("opera mobi")||-1!==n.indexOf("hpwos/");return i&&s&&r&&!a},isTouchDevice:function(){return this.supportsEvent("touchmove")},isIos:function(){return/ipad|iphone|ipod/i.test(this.USER_AGENT)},isAndroid:function(){return-1!==this.USER_AGENT.indexOf("Android")},supportsSandboxedIframes:function(){return n()},throwsMixedContentWarningWhenIframeSrcIsEmpty:function(){return!("querySelector"in document)},displaysCaretInEmptyContentEditableCorrectly:function(){return n()},hasCurrentStyleProperty:function(){return"currentStyle"in o},hasHistoryIssue:function(){return s&&"Mac"===navigator.platform.substr(0,3)},insertsLineBreaksOnReturn:function(){return s},supportsPlaceholderAttributeOn:function(e){return"placeholder"in e},supportsEvent:function(e){return"on"+e in o||function(){return o.setAttribute("on"+e,"return;"),"function"==typeof o["on"+e]}()},supportsEventsInIframeCorrectly:function(){return!l},supportsHTML5Tags:function(e){var t=e.createElement("div"),n="<article>foo</article>";return t.innerHTML=n,t.innerHTML.toLowerCase()===n},supportsCommand:function(){var e={formatBlock:n(10,"<="),insertUnorderedList:n(),insertOrderedList:n()},t={insertHTML:s};return function(n,i){var o=e[i];if(!o){try{return n.queryCommandSupported(i)}catch(s){}try{return n.queryCommandEnabled(i)}catch(r){return!!t[i]}}return!1}}(),doesAutoLinkingInContentEditable:function(){return n()},canDisableAutoLinking:function(){return this.supportsCommand(document,"AutoUrlDetect")},clearsContentEditableCorrectly:function(){return s||l||r},supportsGetAttributeCorrectly:function(){var e=document.createElement("td");return"1"!=e.getAttribute("rowspan")},canSelectImagesInContentEditable:function(){return s||n()||l},autoScrollsToCaret:function(){return!r},autoClosesUnclosedTags:function(){var e,t,n=o.cloneNode(!1);return n.innerHTML="<p><div></div>",t=n.innerHTML.toLowerCase(),e="<p></p><div></div>"===t||"<p><div></div></p>"===t,this.autoClosesUnclosedTags=function(){return e},e},supportsNativeGetElementsByClassName:function(){return-1!==(document.getElementsByClassName+"").indexOf("[native code]")},supportsSelectionModify:function(){return"getSelection"in window&&"modify"in window.getSelection()},needsSpaceAfterLineBreak:function(){return l},supportsSpeechApiOn:function(e){var t=i.match(/Chrome\/(\d+)/)||[void 0,0];return t[1]>=11&&("onwebkitspeechchange"in e||"speech"in e)},crashesWhenDefineProperty:function(e){return n(9)&&("XMLHttpRequest"===e||"XDomainRequest"===e)},doesAsyncFocus:function(){return n()},hasProblemsSettingCaretAfterImg:function(){return n()},hasUndoInContextMenu:function(){return s||a||l},hasInsertNodeIssue:function(){return l},hasIframeFocusIssue:function(){return n()},createsNestedInvalidMarkupAfterPaste:function(){return r},supportsMutationEvents:function(){return"MutationEvent"in window},supportsModenPaste:function(){return!("clipboardData"in window)}}}(),wysihtml5.lang.array=function(e){return{contains:function(t){if(Array.isArray(t)){for(var n=t.length;n--;)if(-1!==wysihtml5.lang.array(e).indexOf(t[n]))return!0;return!1}return-1!==wysihtml5.lang.array(e).indexOf(t)},indexOf:function(t){if(e.indexOf)return e.indexOf(t);for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},without:function(t){t=wysihtml5.lang.array(t);for(var n=[],i=0,o=e.length;o>i;i++)t.contains(e[i])||n.push(e[i]);return n},get:function(){for(var t=0,n=e.length,i=[];n>t;t++)i.push(e[t]);return i},map:function(t,n){if(Array.prototype.map)return e.map(t,n);for(var i=e.length>>>0,o=Array(i),s=0;i>s;s++)o[s]=t.call(n,e[s],s,e);return o},unique:function(){for(var t=[],n=e.length,i=0;n>i;)wysihtml5.lang.array(t).contains(e[i])||t.push(e[i]),i++;return t}}},wysihtml5.lang.Dispatcher=Base.extend({on:function(e,t){return this.events=this.events||{},this.events[e]=this.events[e]||[],this.events[e].push(t),this},off:function(e,t){this.events=this.events||{};var n,i,o=0;if(e){for(n=this.events[e]||[],i=[];o<n.length;o++)n[o]!==t&&t&&i.push(n[o]);this.events[e]=i}else this.events={};return this},fire:function(e,t){this.events=this.events||{};for(var n=this.events[e]||[],i=0;i<n.length;i++)n[i].call(this,t);return this},observe:function(){return this.on.apply(this,arguments)},stopObserving:function(){return this.off.apply(this,arguments)}}),wysihtml5.lang.object=function(e){return{merge:function(t){for(var n in t)e[n]=t[n];return this},get:function(){return e},clone:function(t){var n,i={};if(null===e||!wysihtml5.lang.object(e).isPlainObject())return e;for(n in e)e.hasOwnProperty(n)&&(i[n]=t?wysihtml5.lang.object(e[n]).clone(t):e[n]);return i},isArray:function(){return"[object Array]"===Object.prototype.toString.call(e)},isFunction:function(){return"[object Function]"===Object.prototype.toString.call(e)},isPlainObject:function(){return"[object Object]"===Object.prototype.toString.call(e)}}},function(){var e=/^\s+/,t=/\s+$/,n=/[&<>\t"]/g,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","\t":"&nbsp; "};wysihtml5.lang.string=function(o){return o+="",{trim:function(){return o.replace(e,"").replace(t,"")},interpolate:function(e){for(var t in e)o=this.replace("#{"+t+"}").by(e[t]);return o},replace:function(e){return{by:function(t){return o.split(e).join(t)}}},escapeHTML:function(e,t){var s=o.replace(n,function(e){return i[e]});return e&&(s=s.replace(/(?:\r\n|\r|\n)/g,"<br />")),t&&(s=s.replace(/  /gi,"&nbsp; ")),s}}}}(),function(e){function t(e,t){return s(e,t)?e:(e===e.ownerDocument.documentElement&&(e=e.ownerDocument.body),r(e,t))}function n(e){return e.replace(l,function(e,t){var n,i,o=(t.match(c)||[])[1]||"",s=d[o];return t=t.replace(c,""),t.split(s).length>t.split(o).length&&(t+=o,o=""),n=t,i=t,t.length>u&&(i=i.substr(0,u)+"..."),"www."===n.substr(0,4)&&(n="http://"+n),'<a href="'+n+'">'+i+"</a>"+o})}function i(e){var t=e._wysihtml5_tempElement;return t||(t=e._wysihtml5_tempElement=e.createElement("div")),t}function o(t){var o=t.parentNode,s=e.lang.string(t.data).escapeHTML(),r=i(o.ownerDocument);for(r.innerHTML="<span></span>"+n(s),r.removeChild(r.firstChild);r.firstChild;)o.insertBefore(r.firstChild,t);o.removeChild(t)}function s(t,n){for(var i;t.parentNode;){if(t=t.parentNode,i=t.nodeName,t.className&&e.lang.array(t.className.split(" ")).contains(n))return!0;if(a.contains(i))return!0;if("body"===i)return!1}return!1}function r(t,n){if(!(a.contains(t.nodeName)||t.className&&e.lang.array(t.className.split(" ")).contains(n))){if(t.nodeType===e.TEXT_NODE&&t.data.match(l))return void o(t);for(var i=e.lang.array(t.childNodes).get(),s=i.length,c=0;s>c;c++)r(i[c],n);return t}}var a=e.lang.array(["CODE","PRE","A","SCRIPT","HEAD","TITLE","STYLE"]),l=/((https?:\/\/|www\.)[^\s<]{3,})/gi,c=/([^\w\/\-](,?))$/i,u=100,d={")":"(","]":"[","}":"{"};e.dom.autoLink=t,e.dom.autoLink.URL_REG_EXP=l}(wysihtml5),function(e){var t=e.dom;t.addClass=function(e,n){var i=e.classList;return i?i.add(n):void(t.hasClass(e,n)||(e.className+=" "+n))},t.removeClass=function(e,t){var n=e.classList;return n?n.remove(t):void(e.className=e.className.replace(RegExp("(^|\\s+)"+t+"(\\s+|$)")," "))},t.hasClass=function(e,t){var n,i=e.classList;return i?i.contains(t):(n=e.className,n.length>0&&(n==t||RegExp("(^|\\s)"+t+"(\\s|$)").test(n)))}}(wysihtml5),wysihtml5.dom.contains=function(){var e=document.documentElement;return e.contains?function(e,t){return t.nodeType!==wysihtml5.ELEMENT_NODE&&(t=t.parentNode),e!==t&&e.contains(t)}:e.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:void 0}(),wysihtml5.dom.convertToList=function(){function e(e,t){var n=e.createElement("li");return t.appendChild(n),n}function t(e,t){return e.createElement(t)}function n(n,i,o){if("UL"===n.nodeName||"OL"===n.nodeName||"MENU"===n.nodeName)return n;var s,r,a,l,c,u,d,h,f,m=n.ownerDocument,p=t(m,i),g=n.querySelectorAll("br"),y=g.length;for(f=0;y>f;f++)for(l=g[f];(c=l.parentNode)&&c!==n&&c.lastChild===l;){if("block"===wysihtml5.dom.getStyle("display").from(c)){c.removeChild(l);break}wysihtml5.dom.insert(l).after(l.parentNode)}for(s=wysihtml5.lang.array(n.childNodes).get(),r=s.length,f=0;r>f;f++)h=h||e(m,p),a=s[f],u="block"===wysihtml5.dom.getStyle("display").from(a),d="BR"===a.nodeName,!u||o&&wysihtml5.dom.hasClass(a,o)?d?h=h.firstChild?null:h:h.appendChild(a):(h=h.firstChild?e(m,p):h,h.appendChild(a),h=null);return 0===s.length&&e(m,p),n.parentNode.replaceChild(p,n),p}return n}(),wysihtml5.dom.copyAttributes=function(e){return{from:function(t){return{to:function(n){for(var i,o=0,s=e.length;s>o;o++)i=e[o],void 0!==t[i]&&""!==t[i]&&(n[i]=t[i]);return{andTo:arguments.callee}}}}}},function(e){var t=["-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing"],n=function(t){return!!i(t)&&parseInt(e.getStyle("width").from(t),10)<t.offsetWidth},i=function(n){for(var i=0,o=t.length;o>i;i++)if("border-box"===e.getStyle(t[i]).from(n))return t[i]};e.copyStyles=function(i){return{from:function(o){n(o)&&(i=wysihtml5.lang.array(i).without(t));for(var s,r="",a=i.length,l=0;a>l;l++)s=i[l],r+=s+":"+e.getStyle(s).from(o)+";";return{to:function(t){return e.setStyles(r).on(t),{andTo:arguments.callee}}}}}}}(wysihtml5.dom),function(e){e.dom.delegate=function(t,n,i,o){return e.dom.observe(t,i,function(i){for(var s=i.target,r=e.lang.array(t.querySelectorAll(n));s&&s!==t;){if(r.contains(s)){o.call(s,i);break}s=s.parentNode}})}}(wysihtml5),function(e){e.dom.domNode=function(t){var n=[e.ELEMENT_NODE,e.TEXT_NODE],i=function(t){return t.nodeType===e.TEXT_NODE&&/^\s*$/g.test(t.data)};return{prev:function(o){var s=t.previousSibling,r=o&&o.nodeTypes?o.nodeTypes:n;return s?!e.lang.array(r).contains(s.nodeType)||o&&o.ignoreBlankTexts&&i(s)?e.dom.domNode(s).prev(o):s:null},next:function(o){var s=t.nextSibling,r=o&&o.nodeTypes?o.nodeTypes:n;return s?!e.lang.array(r).contains(s.nodeType)||o&&o.ignoreBlankTexts&&i(s)?e.dom.domNode(s).next(o):s:null}}}}(wysihtml5),wysihtml5.dom.getAsDom=function(){var e=function(e,t){var n=t.createElement("div");n.style.display="none",t.body.appendChild(n);try{n.innerHTML=e}catch(i){}return t.body.removeChild(n),n},t=function(e){if(!e._wysihtml5_supportsHTML5Tags){for(var t=0,i=n.length;i>t;t++)e.createElement(n[t]);e._wysihtml5_supportsHTML5Tags=!0}},n=["abbr","article","aside","audio","bdi","canvas","command","datalist","details","figcaption","figure","footer","header","hgroup","keygen","mark","meter","nav","output","progress","rp","rt","ruby","svg","section","source","summary","time","track","video","wbr"];return function(n,i){i=i||document;var o;return"object"==typeof n&&n.nodeType?(o=i.createElement("div"),o.appendChild(n)):wysihtml5.browser.supportsHTML5Tags(i)?(o=i.createElement("div"),o.innerHTML=n):(t(i),o=e(n,i)),o}}(),wysihtml5.dom.getParentElement=function(){function e(e,t){return!t||!t.length||("string"==typeof t?e===t:wysihtml5.lang.array(t).contains(e))}function t(e){return e.nodeType===wysihtml5.ELEMENT_NODE}function n(e,t,n){var i=(e.className||"").match(n)||[];return t?i[i.length-1]===t:!!i.length}function i(e,t,n){var i=(e.getAttribute("style")||"").match(n)||[];return t?i[i.length-1]===t:!!i.length}return function(o,s,r,a){var l=s.cssStyle||s.styleRegExp,c=s.className||s.classRegExp;for(r=r||50;r--&&o&&"BODY"!==o.nodeName&&(!a||o!==a);){if(t(o)&&e(o.nodeName,s.nodeName)&&(!l||i(o,s.cssStyle,s.styleRegExp))&&(!c||n(o,s.className,s.classRegExp)))return o;o=o.parentNode}return null}}(),wysihtml5.dom.getStyle=function(){function e(e){return e.replace(n,function(e){return e.charAt(1).toUpperCase()})}var t={"float":"styleFloat"in document.createElement("div").style?"styleFloat":"cssFloat"},n=/\-[a-z]/g;return function(n){return{from:function(i){var o,s,r,a,l,c,u,d,h;if(i.nodeType===wysihtml5.ELEMENT_NODE){if(o=i.ownerDocument,s=t[n]||e(n),r=i.style,a=i.currentStyle,l=r[s])return l;if(a)try{return a[s]}catch(f){}return c=o.defaultView||o.parentWindow,u=("height"===n||"width"===n)&&"TEXTAREA"===i.nodeName,c.getComputedStyle?(u&&(d=r.overflow,r.overflow="hidden"),h=c.getComputedStyle(i,null).getPropertyValue(n),u&&(r.overflow=d||""),h):void 0}}}}}(),wysihtml5.dom.getTextNodes=function(e,t){var n=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t&&/^\s*$/.test(e.innerText||e.textContent)||n.push(e):n=n.concat(wysihtml5.dom.getTextNodes(e,t));return n},wysihtml5.dom.hasElementWithTagName=function(){function e(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=n++)}var t={},n=1;return function(n,i){var o=e(n)+":"+i,s=t[o];return s||(s=t[o]=n.getElementsByTagName(i)),s.length>0}}(),function(e){function t(e){return e._wysihtml5_identifier||(e._wysihtml5_identifier=i++)}var n={},i=1;e.dom.hasElementWithClassName=function(i,o){if(!e.browser.supportsNativeGetElementsByClassName())return!!i.querySelector("."+o);var s=t(i)+":"+o,r=n[s];return r||(r=n[s]=i.getElementsByClassName(o)),r.length>0}}(wysihtml5),wysihtml5.dom.insert=function(e){return{after:function(t){t.parentNode.insertBefore(e,t.nextSibling)},before:function(t){t.parentNode.insertBefore(e,t)},into:function(t){t.appendChild(e)}}},wysihtml5.dom.insertCSS=function(e){return e=e.join("\n"),{into:function(t){var n,i,o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),n=t.querySelector("head link"),n?void n.parentNode.insertBefore(o,n):(i=t.querySelector("head"),void(i&&i.appendChild(o)))}}},function(e){e.dom.lineBreaks=function(t){function n(e){return"BR"===e.nodeName}function i(t){return!!n(t)||"block"===e.dom.getStyle("display").from(t)}return{add:function(){var n=t.ownerDocument,o=e.dom.domNode(t).next({ignoreBlankTexts:!0}),s=e.dom.domNode(t).prev({ignoreBlankTexts:!0});o&&!i(o)&&e.dom.insert(n.createElement("br")).after(t),s&&!i(s)&&e.dom.insert(n.createElement("br")).before(t)},remove:function(){var i=e.dom.domNode(t).next({ignoreBlankTexts:!0}),o=e.dom.domNode(t).prev({ignoreBlankTexts:!0});i&&n(i)&&i.parentNode.removeChild(i),o&&n(o)&&o.parentNode.removeChild(o)}}}}(wysihtml5),wysihtml5.dom.observe=function(e,t,n){t="string"==typeof t?[t]:t;for(var i,o,s=0,r=t.length;r>s;s++)o=t[s],e.addEventListener?e.addEventListener(o,n,!1):(i=function(t){"target"in t||(t.target=t.srcElement),t.preventDefault=t.preventDefault||function(){this.returnValue=!1},t.stopPropagation=t.stopPropagation||function(){this.cancelBubble=!0},n.call(e,t)},e.attachEvent("on"+o,i));return{stop:function(){for(var o,s=0,r=t.length;r>s;s++)o=t[s],e.removeEventListener?e.removeEventListener(o,n,!1):e.detachEvent("on"+o,i)}}},wysihtml5.dom.parse=function(e,t){function n(e,t){var n,s,r,a,l,c,u,d,h;for(wysihtml5.lang.object(w).merge(v).merge(t.rules).get(),n=t.context||e.ownerDocument||document,s=n.createDocumentFragment(),r="string"==typeof e,a=!1,t.clearInternals===!0&&(a=!0),l=r?wysihtml5.dom.getAsDom(e,n):e,w.selectors&&o(l,w.selectors);l.firstChild;)u=l.firstChild,c=i(u,t.cleanUp,a,t.uneditableClass),c&&s.appendChild(c),u!==c&&l.removeChild(u);if(t.unjoinNbsps)for(d=wysihtml5.dom.getTextNodes(s),h=d.length;h--;)d[h].nodeValue=d[h].nodeValue.replace(/([\S\u00A0])\u00A0/gi,"$1 ");return l.innerHTML="",l.appendChild(s),r?wysihtml5.quirks.getCorrectInnerHTML(l):l}function i(e,t,n,o){var s,r,a,l=e.nodeType,c=e.childNodes,u=c.length,d=p[l],h=0;if(o&&1===l&&wysihtml5.dom.hasClass(e,o))return e;if(r=d&&d(e,n),!r){if(r===!1){for(s=e.ownerDocument.createDocumentFragment(),h=u;h--;)c[h]&&(a=i(c[h],t,n,o),a&&(c[h]===a&&h--,s.insertBefore(a,s.firstChild)));return"block"===wysihtml5.dom.getStyle("display").from(e)&&s.appendChild(e.ownerDocument.createElement("br")),wysihtml5.lang.array(["div","pre","p","table","td","th","ul","ol","li","dd","dl","footer","header","section","h1","h2","h3","h4","h5","h6"]).contains(e.nodeName.toLowerCase())&&e.parentNode.lastChild!==e&&(e.nextSibling&&3===e.nextSibling.nodeType&&/^\s/.test(e.nextSibling.nodeValue)||s.appendChild(e.ownerDocument.createTextNode(" "))),s.normalize&&s.normalize(),s}return null}for(h=0;u>h;h++)c[h]&&(a=i(c[h],t,n,o),a&&(c[h]===a&&h--,r.appendChild(a)));if(t&&r.nodeName.toLowerCase()===g&&(!r.childNodes.length||/^\s*$/gi.test(r.innerHTML)&&(n||"_wysihtml5-temp-placeholder"!==e.className&&"rangySelectionBoundary"!==e.className)||!r.attributes.length)){for(s=r.ownerDocument.createDocumentFragment();r.firstChild;)s.appendChild(r.firstChild);return s.normalize&&s.normalize(),s}return r.normalize&&r.normalize(),r}function o(e,t){var n,i,o,s;for(n in t)if(t.hasOwnProperty(n))for(wysihtml5.lang.object(t[n]).isFunction()?i=t[n]:"string"==typeof t[n]&&T[t[n]]&&(i=T[t[n]]),o=e.querySelectorAll(n),s=o.length;s--;)i(o[s])}function s(e,t){var n,i,o,s=w.tags,a=e.nodeName.toLowerCase(),c=e.scopeName;if(e._wysihtml5)return null;if(e._wysihtml5=1,"wysihtml5-temp"===e.className)return null;
if(c&&"HTML"!=c&&(a=c+":"+a),"outerHTML"in e&&(wysihtml5.browser.autoClosesUnclosedTags()||"P"!==e.nodeName||"</p>"===e.outerHTML.slice(-4).toLowerCase()||(a="div")),a in s){if(n=s[a],!n||n.remove)return null;if(n.unwrap)return!1;n="string"==typeof n?{rename_tag:n}:n}else{if(!e.firstChild)return null;n={rename_tag:g}}if(n.one_of_type&&!r(e,w,n.one_of_type,t)){if(!n.remove_action)return null;if("unwrap"===n.remove_action)return!1;if("rename"!==n.remove_action)return null;o=n.remove_action_rename_to||g}return i=e.ownerDocument.createElement(o||n.rename_tag||a),h(e,i,n,t),l(e,i,n),e=null,i.normalize&&i.normalize(),i}function r(e,t,n,i){var o,s;if("SPAN"===e.nodeName&&!i&&("_wysihtml5-temp-placeholder"===e.className||"rangySelectionBoundary"===e.className))return!0;for(s in n)if(n.hasOwnProperty(s)&&t.type_definitions&&t.type_definitions[s]&&(o=t.type_definitions[s],a(e,o)))return!0;return!1}function a(e,t){var n,i,o,s,r,a,l,c,u=e.getAttribute("class"),d=e.getAttribute("style");if(t.methods)for(a in t.methods)if(t.methods.hasOwnProperty(a)&&S[a]&&S[a](e))return!0;if(u&&t.classes)for(u=u.replace(/^\s+/g,"").replace(/\s+$/g,"").split(y),n=u.length,l=0;n>l;l++)if(t.classes[u[l]])return!0;if(d&&t.styles){d=d.split(";");for(i in t.styles)if(t.styles.hasOwnProperty(i))for(c=d.length;c--;)if(r=d[c].split(":"),r[0].replace(/\s/g,"").toLowerCase()===i&&(t.styles[i]===!0||1===t.styles[i]||wysihtml5.lang.array(t.styles[i]).contains(r[1].replace(/\s/g,"").toLowerCase())))return!0}if(t.attrs)for(o in t.attrs)if(t.attrs.hasOwnProperty(o)&&(s=wysihtml5.dom.getAttribute(e,o),"string"==typeof s&&s.search(t.attrs[o])>-1))return!0;return!1}function l(e,t,n){var i,o;if(n&&n.keep_styles)for(i in n.keep_styles)if(n.keep_styles.hasOwnProperty(i)){if(o="float"===i?e.style.styleFloat||e.style.cssFloat:e.style[i],n.keep_styles[i]instanceof RegExp&&!n.keep_styles[i].test(o))continue;"float"===i?t.style[e.style.styleFloat?"styleFloat":"cssFloat"]=o:e.style[i]&&(t.style[i]=o)}}function c(e,t){var n,i=[];for(n in t)t.hasOwnProperty(n)&&0===n.indexOf(e)&&i.push(n);return i}function u(e,t,n,i){var o,s=C[n];return!(!s||!(t||"alt"===e&&"IMG"==i)||(o=s(t),"string"!=typeof o))&&o}function d(e,t){var n,i,o,s,r,a=wysihtml5.lang.object(w.attributes||{}).clone(),l=wysihtml5.lang.object(a).merge(wysihtml5.lang.object(t||{}).clone()).get(),d={},h=wysihtml5.dom.getAttributes(e);for(n in l)if(/\*$/.test(n))for(o=c(n.slice(0,-1),h),s=0,r=o.length;r>s;s++)i=u(o[s],h[o[s]],l[n],e.nodeName),i!==!1&&(d[o[s]]=i);else i=u(n,h[n],l[n],e.nodeName),i!==!1&&(d[n]=i);return d}function h(e,t,n,i){var o,s,r,a,l,c={},u=n.set_class,h=n.add_class,f=n.add_style,m=n.set_attributes,p=w.classes,g=0,v=[],b=[],C=[],S=[];if(m&&(c=wysihtml5.lang.object(m).clone()),c=wysihtml5.lang.object(c).merge(d(e,n.check_attributes)).get(),u&&v.push(u),h)for(a in h)l=x[h[a]],l&&(r=l(wysihtml5.dom.getAttribute(e,a)),"string"==typeof r&&v.push(r));if(f)for(a in f)l=_[f[a]],l&&(newStyle=l(wysihtml5.dom.getAttribute(e,a)),"string"==typeof newStyle&&b.push(newStyle));if("string"==typeof p&&"any"===p&&e.getAttribute("class"))if(w.classes_blacklist){for(S=e.getAttribute("class"),S&&(v=v.concat(S.split(y))),o=v.length;o>g;g++)s=v[g],w.classes_blacklist[s]||C.push(s);C.length&&(c["class"]=wysihtml5.lang.array(C).unique().join(" "))}else c["class"]=e.getAttribute("class");else{for(i||(p["_wysihtml5-temp-placeholder"]=1,p._rangySelectionBoundary=1,p["wysiwyg-tmp-selected-cell"]=1),S=e.getAttribute("class"),S&&(v=v.concat(S.split(y))),o=v.length;o>g;g++)s=v[g],p[s]&&C.push(s);C.length&&(c["class"]=wysihtml5.lang.array(C).unique().join(" "))}c["class"]&&i&&(c["class"]=c["class"].replace("wysiwyg-tmp-selected-cell",""),/^\s*$/g.test(c["class"])&&delete c["class"]),b.length&&(c.style=wysihtml5.lang.array(b).unique().join(" "));for(a in c)try{t.setAttribute(a,c[a])}catch(T){}c.src&&(void 0!==c.width&&t.setAttribute("width",c.width),void 0!==c.height&&t.setAttribute("height",c.height))}function f(e){var t,n=e.nextSibling;return n&&n.nodeType===wysihtml5.TEXT_NODE?void(n.data=e.data.replace(b,"")+n.data.replace(b,"")):(t=e.data.replace(b,""),e.ownerDocument.createTextNode(t))}function m(e){return w.comments?e.ownerDocument.createComment(e.nodeValue):void 0}var p={1:s,3:f,8:m},g="span",y=/\s+/,v={tags:{},classes:{}},w={},b=/\uFEFF/g,C={url:function(){var e=/^https?:\/\//i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),src:function(){var e=/^(\/|https?:\/\/)/i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),href:function(){var e=/^(#|\/|https?:\/\/|mailto:)/i;return function(t){return t&&t.match(e)?t.replace(e,function(e){return e.toLowerCase()}):null}}(),alt:function(){var e=/[^ a-z0-9_\-]/gi;return function(t){return t?t.replace(e,""):""}}(),numbers:function(){var e=/\D/g;return function(t){return t=(t||"").replace(e,""),t||null}}(),any:function(){return function(e){return e}}()},_={align_text:function(){var e={left:"text-align: left;",right:"text-align: right;",center:"text-align: center;"};return function(t){return e[(t+"").toLowerCase()]}}()},x={align_img:function(){var e={left:"wysiwyg-float-left",right:"wysiwyg-float-right"};return function(t){return e[(t+"").toLowerCase()]}}(),align_text:function(){var e={left:"wysiwyg-text-align-left",right:"wysiwyg-text-align-right",center:"wysiwyg-text-align-center",justify:"wysiwyg-text-align-justify"};return function(t){return e[(t+"").toLowerCase()]}}(),clear_br:function(){var e={left:"wysiwyg-clear-left",right:"wysiwyg-clear-right",both:"wysiwyg-clear-both",all:"wysiwyg-clear-both"};return function(t){return e[(t+"").toLowerCase()]}}(),size_font:function(){var e={1:"wysiwyg-font-size-xx-small",2:"wysiwyg-font-size-small",3:"wysiwyg-font-size-medium",4:"wysiwyg-font-size-large",5:"wysiwyg-font-size-x-large",6:"wysiwyg-font-size-xx-large",7:"wysiwyg-font-size-xx-large","-":"wysiwyg-font-size-smaller","+":"wysiwyg-font-size-larger"};return function(t){return e[(t+"").charAt(0)]}}()},S={has_visible_contet:function(){var e,t=["img","video","picture","br","script","noscript","style","table","iframe","object","embed","audio","svg","input","button","select","textarea","canvas"];return function(n){if(e=(n.innerText||n.textContent).replace(/\s/g,""),e&&e.length>0)return!0;for(var i=t.length;i--;)if(n.querySelector(t[i]))return!0;return!!(n.offsetWidth&&n.offsetWidth>0&&n.offsetHeight&&n.offsetHeight>0)}}()},T={unwrap:function(e){wysihtml5.dom.unwrap(e)},remove:function(e){e.parentNode.removeChild(e)}};return n(e,t)},wysihtml5.dom.removeEmptyTextNodes=function(e){for(var t,n=wysihtml5.lang.array(e.childNodes).get(),i=n.length,o=0;i>o;o++)t=n[o],t.nodeType===wysihtml5.TEXT_NODE&&""===t.data&&t.parentNode.removeChild(t)},wysihtml5.dom.renameElement=function(e,t){for(var n,i=e.ownerDocument.createElement(t);n=e.firstChild;)i.appendChild(n);return wysihtml5.dom.copyAttributes(["align","className"]).from(e).to(i),e.parentNode.replaceChild(i,e),i},wysihtml5.dom.replaceWithChildNodes=function(e){if(e.parentNode){if(!e.firstChild)return void e.parentNode.removeChild(e);for(var t=e.ownerDocument.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e),e=t=null}},function(e){function t(t){return"block"===e.getStyle("display").from(t)}function n(e){return"BR"===e.nodeName}function i(e){var t=e.ownerDocument.createElement("br");e.appendChild(t)}function o(e,o){if(e.nodeName.match(/^(MENU|UL|OL)$/)){var s,r,a,l,c,u,d=e.ownerDocument,h=d.createDocumentFragment(),f=wysihtml5.dom.domNode(e).prev({ignoreBlankTexts:!0});if(o)for(!f||t(f)||n(f)||i(h);u=e.firstElementChild||e.firstChild;){for(r=u.lastChild;s=u.firstChild;)a=s===r,l=a&&!t(s)&&!n(s),h.appendChild(s),l&&i(h);u.parentNode.removeChild(u)}else for(;u=e.firstElementChild||e.firstChild;){if(u.querySelector&&u.querySelector("div, p, ul, ol, menu, blockquote, h1, h2, h3, h4, h5, h6"))for(;s=u.firstChild;)h.appendChild(s);else{for(c=d.createElement("p");s=u.firstChild;)c.appendChild(s);h.appendChild(c)}u.parentNode.removeChild(u)}e.parentNode.replaceChild(h,e)}}e.resolveList=o}(wysihtml5.dom),function(e){var t=document,n=["parent","top","opener","frameElement","frames","localStorage","globalStorage","sessionStorage","indexedDB"],i=["open","close","openDialog","showModalDialog","alert","confirm","prompt","openDatabase","postMessage","XMLHttpRequest","XDomainRequest"],o=["referrer","write","open","close"];e.dom.Sandbox=Base.extend({constructor:function(t,n){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.editableArea=this._createIframe()},insertInto:function(e){"string"==typeof e&&(e=t.getElementById(e)),e.appendChild(this.editableArea)},getIframe:function(){return this.editableArea},getWindow:function(){this._readyError()},getDocument:function(){this._readyError()},destroy:function(){var e=this.getIframe();e.parentNode.removeChild(e)},_readyError:function(){throw Error("wysihtml5.Sandbox: Sandbox iframe isn't loaded yet")},_createIframe:function(){var n=this,i=t.createElement("iframe");return i.className="wysihtml5-sandbox",e.dom.setAttributes({security:"restricted",allowtransparency:"true",frameborder:0,width:0,height:0,marginwidth:0,marginheight:0}).on(i),e.browser.throwsMixedContentWarningWhenIframeSrcIsEmpty()&&(i.src="javascript:'<html></html>'"),i.onload=function(){i.onreadystatechange=i.onload=null,n._onLoadIframe(i)},i.onreadystatechange=function(){/loaded|complete/.test(i.readyState)&&(i.onreadystatechange=i.onload=null,n._onLoadIframe(i))},i},_onLoadIframe:function(s){var r,a,l,c,u,d,h;if(e.dom.contains(t.documentElement,s)){if(r=this,a=s.contentWindow,l=s.contentWindow.document,c=t.characterSet||t.charset||"utf-8",u=this._getHtml({charset:c,stylesheets:this.config.stylesheets}),l.open("text/html","replace"),l.write(u),l.close(),this.getWindow=function(){return s.contentWindow},this.getDocument=function(){return s.contentWindow.document},a.onerror=function(e,t,n){throw Error("wysihtml5.Sandbox: "+e,t,n)},!e.browser.supportsSandboxedIframes()){for(d=0,h=n.length;h>d;d++)this._unset(a,n[d]);for(d=0,h=i.length;h>d;d++)this._unset(a,i[d],e.EMPTY_FUNCTION);for(d=0,h=o.length;h>d;d++)this._unset(l,o[d]);this._unset(l,"cookie","",!0)}this.loaded=!0,setTimeout(function(){r.callback(r)},0)}},_getHtml:function(t){var n,i=t.stylesheets,o="",s=0;if(i="string"==typeof i?[i]:i)for(n=i.length;n>s;s++)o+='<link rel="stylesheet" href="'+i[s]+'">';return t.stylesheets=o,e.lang.string('<!DOCTYPE html><html><head><meta charset="#{charset}">#{stylesheets}</head><body></body></html>').interpolate(t)},_unset:function(t,n,i,o){try{t[n]=i}catch(s){}try{t.__defineGetter__(n,function(){return i})}catch(s){}if(o)try{t.__defineSetter__(n,function(){})}catch(s){}if(!e.browser.crashesWhenDefineProperty(n))try{var r={get:function(){return i}};o&&(r.set=function(){}),Object.defineProperty(t,n,r)}catch(s){}}})}(wysihtml5),function(e){var t=document;e.dom.ContentEditableArea=Base.extend({getContentEditable:function(){return this.element},getWindow:function(){return this.element.ownerDocument.defaultView},getDocument:function(){return this.element.ownerDocument},constructor:function(t,n,i){this.callback=t||e.EMPTY_FUNCTION,this.config=e.lang.object({}).merge(n).get(),this.element=i?this._bindElement(i):this._createElement()},_createElement:function(){var e=t.createElement("div");return e.className="wysihtml5-sandbox",this._loadElement(e),e},_bindElement:function(e){return e.className=e.className&&""!=e.className?e.className+" wysihtml5-sandbox":"wysihtml5-sandbox",this._loadElement(e,!0),e},_loadElement:function(e,t){var n,i=this;t||(n=this._getHtml(),e.innerHTML=n),this.getWindow=function(){return e.ownerDocument.defaultView},this.getDocument=function(){return e.ownerDocument},this.loaded=!0,setTimeout(function(){i.callback(i)},0)},_getHtml:function(){return""}})}(wysihtml5),function(){var e={className:"class"};wysihtml5.dom.setAttributes=function(t){return{on:function(n){for(var i in t)n.setAttribute(e[i]||i,t[i])}}}}(),wysihtml5.dom.setStyles=function(e){return{on:function(t){var n,i=t.style;if("string"==typeof e)return void(i.cssText+=";"+e);for(n in e)"float"===n?(i.cssFloat=e[n],i.styleFloat=e[n]):i[n]=e[n]}}},function(e){e.simulatePlaceholder=function(t,n,i){var o="placeholder",s=function(){var t=n.element.offsetWidth>0&&n.element.offsetHeight>0;n.hasPlaceholderSet()&&(n.clear(),n.element.focus(),t&&setTimeout(function(){var e=n.selection.getSelection();e.focusNode&&e.anchorNode||n.selection.selectNode(n.element.firstChild||n.element)},0)),n.placeholderSet=!1,e.removeClass(n.element,o)},r=function(){n.isEmpty()&&(n.placeholderSet=!0,n.setValue(i),e.addClass(n.element,o))};t.on("set_placeholder",r).on("unset_placeholder",s).on("focus:composer",s).on("paste:composer",s).on("blur:composer",r),r()}}(wysihtml5.dom),function(e){var t=document.documentElement;"textContent"in t?(e.setTextContent=function(e,t){e.textContent=t},e.getTextContent=function(e){return e.textContent}):"innerText"in t?(e.setTextContent=function(e,t){e.innerText=t},e.getTextContent=function(e){return e.innerText}):(e.setTextContent=function(e,t){e.nodeValue=t},e.getTextContent=function(e){return e.nodeValue})}(wysihtml5.dom),wysihtml5.dom.getAttribute=function(e,t){var n,i,o,s=!wysihtml5.browser.supportsGetAttributeCorrectly();return t=t.toLowerCase(),n=e.nodeName,"IMG"==n&&"src"==t&&wysihtml5.dom.isLoadedImage(e)===!0?e.src:s&&"outerHTML"in e?(i=e.outerHTML.toLowerCase(),o=-1!=i.indexOf(" "+t+"="),o?e.getAttribute(t):null):e.getAttribute(t)},wysihtml5.dom.getAttributes=function(e){var t,n=!wysihtml5.browser.supportsGetAttributeCorrectly(),i=e.nodeName,o=[];for(t in e.attributes)(e.attributes.hasOwnProperty&&e.attributes.hasOwnProperty(t)||!e.attributes.hasOwnProperty&&Object.prototype.hasOwnProperty.call(e.attributes,t))&&e.attributes[t].specified&&("IMG"==i&&"src"==e.attributes[t].name.toLowerCase()&&wysihtml5.dom.isLoadedImage(e)===!0?o.src=e.src:wysihtml5.lang.array(["rowspan","colspan"]).contains(e.attributes[t].name.toLowerCase())&&n?1!==e.attributes[t].value&&(o[e.attributes[t].name]=e.attributes[t].value):o[e.attributes[t].name]=e.attributes[t].value);return o},wysihtml5.dom.isLoadedImage=function(e){try{return e.complete&&!e.mozMatchesSelector(":-moz-broken")}catch(t){if(e.complete&&"complete"===e.readyState)return!0}},function(e){function t(e,t){var n,i,o,s,r=[];for(i=0,o=e.length;o>i;i++)if(n=e[i].querySelectorAll(t))for(s=n.length;s--;r.unshift(n[s]));return r}function n(e){e.parentNode.removeChild(e)}function i(e,t){e.parentNode.insertBefore(t,e.nextSibling)}function o(e,t){for(var n=e.nextSibling;1!=n.nodeType;)if(n=n.nextSibling,!t||t==n.tagName.toLowerCase())return n;return null}var s=e.dom,r=function(e){this.el=e,this.isColspan=!1,this.isRowspan=!1,this.firstCol=!0,this.lastCol=!0,this.firstRow=!0,this.lastRow=!0,this.isReal=!0,this.spanCollection=[],this.modified=!1},a=function(e,t){e?(this.cell=e,this.table=s.getParentElement(e,{nodeName:["TABLE"]})):t&&(this.table=t,this.cell=this.table.querySelectorAll("th, td")[0])};a.prototype={addSpannedCellToMap:function(e,t,n,i,o,s){var a,l,c=[],u=n+(s?parseInt(s,10)-1:0),d=i+(o?parseInt(o,10)-1:0);for(a=n;u>=a;a++)for(void 0===t[a]&&(t[a]=[]),l=i;d>=l;l++)t[a][l]=new r(e),t[a][l].isColspan=o&&parseInt(o,10)>1,t[a][l].isRowspan=s&&parseInt(s,10)>1,t[a][l].firstCol=l==i,t[a][l].lastCol=l==d,t[a][l].firstRow=a==n,t[a][l].lastRow=a==u,t[a][l].isReal=l==i&&a==n,t[a][l].spanCollection=c,c.push(t[a][l])},setCellAsModified:function(e){if(e.modified=!0,e.spanCollection.length>0)for(var t=0,n=e.spanCollection.length;n>t;t++)e.spanCollection[t].modified=!0},setTableMap:function(){var e,t,n,i,o,a,l,c,u=[],d=this.getTableRows();for(e=0;e<d.length;e++)for(t=d[e],n=this.getRowCells(t),a=0,void 0===u[e]&&(u[e]=[]),i=0;i<n.length;i++){for(o=n[i];void 0!==u[e][a];)a++;l=s.getAttribute(o,"colspan"),c=s.getAttribute(o,"rowspan"),l||c?(this.addSpannedCellToMap(o,u,e,a,l,c),a+=l?parseInt(l,10):1):(u[e][a]=new r(o),a++)}return this.map=u,u},getRowCells:function(n){var i=this.table.querySelectorAll("table"),o=i?t(i,"th, td"):[],s=n.querySelectorAll("th, td"),r=o.length>0?e.lang.array(s).without(o):s;return r},getTableRows:function(){var n=this.table.querySelectorAll("table"),i=n?t(n,"tr"):[],o=this.table.querySelectorAll("tr"),s=i.length>0?e.lang.array(o).without(i):o;return s},getMapIndex:function(e){var t,n,i=this.map.length,o=this.map&&this.map[0]?this.map[0].length:0;for(t=0;i>t;t++)for(n=0;o>n;n++)if(this.map[t][n].el===e)return{row:t,col:n};return!1},getElementAtIndex:function(e){return this.setTableMap(),this.map[e.row]&&this.map[e.row][e.col]&&this.map[e.row][e.col].el?this.map[e.row][e.col].el:null},getMapElsTo:function(e){var t,n,i,o,s,r,a=[];if(this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(e),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(t=this.idx_start,this.idx_start=this.idx_end,this.idx_end=t),this.idx_start.col>this.idx_end.col&&(n=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=n),null!=this.idx_start&&null!=this.idx_end)for(i=this.idx_start.row,o=this.idx_end.row;o>=i;i++)for(s=this.idx_start.col,r=this.idx_end.col;r>=s;s++)a.push(this.map[i][s].el);return a},orderSelectionEnds:function(e){var t,n;return this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(e),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(t=this.idx_start,this.idx_start=this.idx_end,this.idx_end=t),this.idx_start.col>this.idx_end.col&&(n=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=n),{start:this.map[this.idx_start.row][this.idx_start.col].el,end:this.map[this.idx_end.row][this.idx_end.col].el}},createCells:function(e,t,n){var i,o,s,r=this.table.ownerDocument,a=r.createDocumentFragment();for(o=0;t>o;o++){if(i=r.createElement(e),n)for(s in n)n.hasOwnProperty(s)&&i.setAttribute(s,n[s]);i.appendChild(document.createTextNode("")),a.appendChild(i)}return a},correctColIndexForUnreals:function(e,t){var n,i,o=this.map[t],s=-1;for(n=0,i=e;e>n;n++)o[n].isReal&&s++;return s},getLastNewCellOnRow:function(e,t){var n,i,o,s,r=this.getRowCells(e);for(o=0,s=r.length;s>o;o++)if(n=r[o],i=this.getMapIndex(n),i===!1||void 0!==t&&i.row!=t)return n;return null},removeEmptyTable:function(){var e=this.table.querySelectorAll("td, th");return(!e||0==e.length)&&(n(this.table),!0)},splitRowToCells:function(e){var t,n,o;e.isColspan&&(t=parseInt(s.getAttribute(e.el,"colspan")||1,10),n=e.el.tagName.toLowerCase(),t>1&&(o=this.createCells(n,t-1),i(e.el,o)),e.el.removeAttribute("colspan"))},getRealRowEl:function(e,t){var n,i,o=null,r=null;for(t=t||this.idx,n=0,i=this.map[t.row].length;i>n;n++)if(r=this.map[t.row][n],r.isReal&&(o=s.getParentElement(r.el,{nodeName:["TR"]})))return o;return null===o&&e&&(o=s.getParentElement(this.map[t.row][t.col].el,{nodeName:["TR"]})||null),o},injectRowAt:function(e,t,n,o,r){var a,l,c=this.getRealRowEl(!1,{row:e,col:t}),u=this.createCells(o,n);c?(a=this.correctColIndexForUnreals(t,e),a>=0?i(this.getRowCells(c)[a],u):c.insertBefore(u,c.firstChild)):(l=this.table.ownerDocument.createElement("tr"),l.appendChild(u),i(s.getParentElement(r.el,{nodeName:["TR"]}),l))},canMerge:function(e){var t,n,i,o,s,r;for(this.to=e,this.setTableMap(),this.idx_start=this.getMapIndex(this.cell),this.idx_end=this.getMapIndex(this.to),(this.idx_start.row>this.idx_end.row||this.idx_start.row==this.idx_end.row&&this.idx_start.col>this.idx_end.col)&&(t=this.idx_start,this.idx_start=this.idx_end,this.idx_end=t),this.idx_start.col>this.idx_end.col&&(n=this.idx_start.col,this.idx_start.col=this.idx_end.col,this.idx_end.col=n),i=this.idx_start.row,o=this.idx_end.row;o>=i;i++)for(s=this.idx_start.col,r=this.idx_end.col;r>=s;s++)if(this.map[i][s].isColspan||this.map[i][s].isRowspan)return!1;return!0},decreaseCellSpan:function(e,t){var n=parseInt(s.getAttribute(e.el,t),10)-1;n>=1?e.el.setAttribute(t,n):(e.el.removeAttribute(t),"colspan"==t&&(e.isColspan=!1),"rowspan"==t&&(e.isRowspan=!1),e.firstCol=!0,e.lastCol=!0,e.firstRow=!0,e.lastRow=!0,e.isReal=!0)},removeSurplusLines:function(){var e,t,i,o,r,a,l,c;if(this.setTableMap(),this.map){for(i=0,o=this.map.length;o>i;i++){for(e=this.map[i],l=!0,r=0,a=e.length;a>r;r++)if(t=e[r],!(s.getAttribute(t.el,"rowspan")&&parseInt(s.getAttribute(t.el,"rowspan"),10)>1&&t.firstRow!==!0)){l=!1;break}if(l)for(r=0;a>r;r++)this.decreaseCellSpan(e[r],"rowspan")}for(c=this.getTableRows(),i=0,o=c.length;o>i;i++)e=c[i],0==e.childNodes.length&&/^\s*$/.test(e.textContent||e.innerText)&&n(e)}},fillMissingCells:function(){var e,t,n,o=0,s=0,a=null;if(this.setTableMap(),this.map){for(o=this.map.length,e=0;o>e;e++)this.map[e].length>s&&(s=this.map[e].length);for(t=0;o>t;t++)for(n=0;s>n;n++)this.map[t]&&!this.map[t][n]&&n>0&&(this.map[t][n]=new r(this.createCells("td",1)),a=this.map[t][n-1],a&&a.el&&a.el.parent&&i(this.map[t][n-1].el,this.map[t][n].el))}},rectify:function(){return!this.removeEmptyTable()&&(this.removeSurplusLines(),this.fillMissingCells(),!0)},unmerge:function(){var e,t,n,i,o,r;if(this.rectify()&&(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx)){if(e=this.map[this.idx.row][this.idx.col],t=s.getAttribute(e.el,"colspan")?parseInt(s.getAttribute(e.el,"colspan"),10):1,n=e.el.tagName.toLowerCase(),e.isRowspan){if(i=parseInt(s.getAttribute(e.el,"rowspan"),10),i>1)for(o=1,r=i-1;r>=o;o++)this.injectRowAt(this.idx.row+o,this.idx.col,t,n,e);e.el.removeAttribute("rowspan")}this.splitRowToCells(e)}},merge:function(e){var t,i,o,s,r,a;if(this.rectify())if(this.canMerge(e)){for(t=this.idx_end.row-this.idx_start.row+1,i=this.idx_end.col-this.idx_start.col+1,o=this.idx_start.row,s=this.idx_end.row;s>=o;o++)for(r=this.idx_start.col,a=this.idx_end.col;a>=r;r++)o==this.idx_start.row&&r==this.idx_start.col?(t>1&&this.map[o][r].el.setAttribute("rowspan",t),i>1&&this.map[o][r].el.setAttribute("colspan",i)):(/^\s*<br\/?>\s*$/.test(this.map[o][r].el.innerHTML.toLowerCase())||(this.map[this.idx_start.row][this.idx_start.col].el.innerHTML+=" "+this.map[o][r].el.innerHTML),n(this.map[o][r].el));this.rectify()}else window.console&&void 0},collapseCellToNextRow:function(e){var t,n,o,r=this.getMapIndex(e.el),a=r.row+1,l={row:a,col:r.col};a<this.map.length&&(t=this.getRealRowEl(!1,l),null!==t&&(n=this.correctColIndexForUnreals(l.col,l.row),n>=0?i(this.getRowCells(t)[n],e.el):(o=this.getLastNewCellOnRow(t,a),null!==o?i(o,e.el):t.insertBefore(e.el,t.firstChild)),parseInt(s.getAttribute(e.el,"rowspan"),10)>2?e.el.setAttribute("rowspan",parseInt(s.getAttribute(e.el,"rowspan"),10)-1):e.el.removeAttribute("rowspan")))},removeRowCell:function(e){e.isReal?e.isRowspan?this.collapseCellToNextRow(e):n(e.el):parseInt(s.getAttribute(e.el,"rowspan"),10)>2?e.el.setAttribute("rowspan",parseInt(s.getAttribute(e.el,"rowspan"),10)-1):e.el.removeAttribute("rowspan")},getRowElementsByCell:function(){var e,t,n,i=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(e=this.map[this.idx.row],t=0,n=e.length;n>t;t++)e[t].isReal&&i.push(e[t].el);return i},getColumnElementsByCell:function(){var e,t,n=[];if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(e=0,t=this.map.length;t>e;e++)this.map[e][this.idx.col]&&this.map[e][this.idx.col].isReal&&n.push(this.map[e][this.idx.col].el);return n},removeRow:function(){var e,t,i,o=s.getParentElement(this.cell,{nodeName:["TR"]});if(o){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(e=this.map[this.idx.row],t=0,i=e.length;i>t;t++)e[t].modified||(this.setCellAsModified(e[t]),this.removeRowCell(e[t]));n(o)}},removeColCell:function(e){e.isColspan?parseInt(s.getAttribute(e.el,"colspan"),10)>2?e.el.setAttribute("colspan",parseInt(s.getAttribute(e.el,"colspan"),10)-1):e.el.removeAttribute("colspan"):e.isReal&&n(e.el)},removeColumn:function(){if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),this.idx!==!1)for(var e=0,t=this.map.length;t>e;e++)this.map[e][this.idx.col].modified||(this.setCellAsModified(this.map[e][this.idx.col]),this.removeColCell(this.map[e][this.idx.col]))},remove:function(e){if(this.rectify()){switch(e){case"row":this.removeRow();break;case"column":this.removeColumn()}this.rectify()}},addRow:function(e){var t,n,o,r,a,l=this.table.ownerDocument;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"below"==e&&s.getAttribute(this.cell,"rowspan")&&(this.idx.row=this.idx.row+parseInt(s.getAttribute(this.cell,"rowspan"),10)-1),this.idx!==!1){for(t=this.map[this.idx.row],n=l.createElement("tr"),o=0,r=t.length;r>o;o++)t[o].modified||(this.setCellAsModified(t[o]),this.addRowCell(t[o],n,e));switch(e){case"below":i(this.getRealRowEl(!0),n);break;case"above":a=s.getParentElement(this.map[this.idx.row][this.idx.col].el,{nodeName:["TR"]}),a&&a.parentNode.insertBefore(n,a)}}},addRowCell:function(e,t,n){var i=e.isColspan?{colspan:s.getAttribute(e.el,"colspan")}:null;e.isReal?"above"!=n&&e.isRowspan?e.el.setAttribute("rowspan",parseInt(s.getAttribute(e.el,"rowspan"),10)+1):t.appendChild(this.createCells("td",1,i)):"above"!=n&&e.isRowspan&&e.lastRow?t.appendChild(this.createCells("td",1,i)):c.isRowspan&&e.el.attr("rowspan",parseInt(s.getAttribute(e.el,"rowspan"),10)+1)},add:function(e){this.rectify()&&(("below"==e||"above"==e)&&this.addRow(e),("before"==e||"after"==e)&&this.addColumn(e))},addColCell:function(e,t,n){var o,r=e.el.tagName.toLowerCase();switch(n){case"before":o=!e.isColspan||e.firstCol;break;case"after":o=!e.isColspan||e.lastCol||e.isColspan&&c.el==this.cell}if(o){switch(n){case"before":e.el.parentNode.insertBefore(this.createCells(r,1),e.el);break;case"after":i(e.el,this.createCells(r,1))}e.isRowspan&&this.handleCellAddWithRowspan(e,t+1,n)}else e.el.setAttribute("colspan",parseInt(s.getAttribute(e.el,"colspan"),10)+1)},addColumn:function(e){var t,n,i,o;if(this.setTableMap(),this.idx=this.getMapIndex(this.cell),"after"==e&&s.getAttribute(this.cell,"colspan")&&(this.idx.col=this.idx.col+parseInt(s.getAttribute(this.cell,"colspan"),10)-1),this.idx!==!1)for(i=0,o=this.map.length;o>i;i++)t=this.map[i],t[this.idx.col]&&(n=t[this.idx.col],n.modified||(this.setCellAsModified(n),this.addColCell(n,i,e)))},handleCellAddWithRowspan:function(e,t,n){var r,a,l,c,u=parseInt(s.getAttribute(this.cell,"rowspan"),10)-1,d=s.getParentElement(e.el,{nodeName:["TR"]}),h=e.el.tagName.toLowerCase(),f=this.table.ownerDocument;for(c=0;u>c;c++)if(r=this.correctColIndexForUnreals(this.idx.col,t+c),d=o(d,"tr"))if(r>0)switch(n){case"before":a=this.getRowCells(d),r>0&&this.map[t+c][this.idx.col].el!=a[r]&&r==a.length-1?i(a[r],this.createCells(h,1)):a[r].parentNode.insertBefore(this.createCells(h,1),a[r]);break;case"after":i(this.getRowCells(d)[r],this.createCells(h,1))}else d.insertBefore(this.createCells(h,1),d.firstChild);else l=f.createElement("tr"),l.appendChild(this.createCells(h,1)),this.table.appendChild(l)}},s.table={getCellsBetween:function(e,t){var n=new a(e);return n.getMapElsTo(t)},addCells:function(e,t){var n=new a(e);n.add(t)},removeCells:function(e,t){var n=new a(e);n.remove(t)},mergeCellsBetween:function(e,t){var n=new a(e);n.merge(t)},unmergeCell:function(e){var t=new a(e);t.unmerge()},orderSelectionEnds:function(e,t){var n=new a(e);return n.orderSelectionEnds(t)},indexOf:function(e){var t=new a(e);return t.setTableMap(),t.getMapIndex(e)},findCell:function(e,t){var n=new a(null,e);return n.getElementAtIndex(t)},findRowByCell:function(e){var t=new a(e);return t.getRowElementsByCell()},findColumnByCell:function(e){var t=new a(e);return t.getColumnElementsByCell()},canMerge:function(e,t){var n=new a(e);return n.canMerge(t)}}}(wysihtml5),wysihtml5.dom.query=function(e,t){var n,i,o,s,r=[];for(e.nodeType&&(e=[e]),i=0,o=e.length;o>i;i++)if(n=e[i].querySelectorAll(t))for(s=n.length;s--;r.unshift(n[s]));return r},wysihtml5.dom.compareDocumentPosition=function(){var e=document.documentElement;return e.compareDocumentPosition?function(e,t){return e.compareDocumentPosition(t)}:function(e,t){var n,i,o,s,r,a,l,c,u;if(n=9===e.nodeType?e:e.ownerDocument,i=9===t.nodeType?t:t.ownerDocument,e===t)return 0;if(e===t.ownerDocument)return 20;if(e.ownerDocument===t)return 10;if(n!==i)return 1;if(2===e.nodeType&&e.childNodes&&-1!==wysihtml5.lang.array(e.childNodes).indexOf(t))return 20;if(2===t.nodeType&&t.childNodes&&-1!==wysihtml5.lang.array(t.childNodes).indexOf(e))return 10;for(o=e,s=[],r=null;o;){if(o==t)return 10;s.push(o),o=o.parentNode}for(o=t,r=null;o;){if(o==e)return 20;if(a=wysihtml5.lang.array(s).indexOf(o),-1!==a)return l=s[a],c=wysihtml5.lang.array(l.childNodes).indexOf(s[a-1]),u=wysihtml5.lang.array(l.childNodes).indexOf(r),c>u?2:4;r=o,o=o.parentNode}return 1}}(),wysihtml5.dom.unwrap=function(e){if(e.parentNode){for(;e.lastChild;)wysihtml5.dom.insert(e.lastChild).after(e);e.parentNode.removeChild(e)}},wysihtml5.dom.getPastedHtml=function(e){var t;return e.clipboardData&&(wysihtml5.lang.array(e.clipboardData.types).contains("text/html")?t=e.clipboardData.getData("text/html"):wysihtml5.lang.array(e.clipboardData.types).contains("text/plain")&&(t=wysihtml5.lang.string(e.clipboardData.getData("text/plain")).escapeHTML(!0,!0))),t},wysihtml5.dom.getPastedHtmlWithDiv=function(e,t){var n=e.selection.getBookmark(),i=e.element.ownerDocument,o=i.createElement("DIV");i.body.appendChild(o),o.style.width="1px",o.style.height="1px",o.style.overflow="hidden",o.setAttribute("contenteditable","true"),o.focus(),setTimeout(function(){e.selection.setBookmark(n),t(o.innerHTML),o.parentNode.removeChild(o)},0)},wysihtml5.quirks.cleanPastedHTML=function(){var e=function(e){var t=wysihtml5.lang.string(e).trim(),n=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");return RegExp("^((?!^"+n+"$).)*$","i")},t=function(t,n){var i,o,s=wysihtml5.lang.object(t).clone(!0);for(i in s.tags)if(s.tags.hasOwnProperty(i)&&s.tags[i].keep_styles)for(o in s.tags[i].keep_styles)s.tags[i].keep_styles.hasOwnProperty(o)&&n[o]&&(s.tags[i].keep_styles[o]=e(n[o]));return s},n=function(e,t){var n,i,o;if(!e)return null;for(i=0,o=e.length;o>i;i++)if(e[i].condition||(n=e[i].set),e[i].condition&&e[i].condition.test(t))return e[i].set;return n};return function(e,i){var o,s={color:wysihtml5.dom.getStyle("color").from(i.referenceNode),fontSize:wysihtml5.dom.getStyle("font-size").from(i.referenceNode)},r=t(n(i.rules,e)||{},s);return o=wysihtml5.dom.parse(e,{rules:r,cleanUp:!0,context:i.referenceNode.ownerDocument,uneditableClass:i.uneditableClass,clearInternals:!0,unjoinNbsps:!0})}}(),wysihtml5.quirks.ensureProperClearing=function(){var e=function(){var e=this;setTimeout(function(){var t=e.innerHTML.toLowerCase();("<p>&nbsp;</p>"==t||"<p>&nbsp;</p><p>&nbsp;</p>"==t)&&(e.innerHTML="")},0)};return function(t){wysihtml5.dom.observe(t.element,["cut","keydown"],e)}}(),function(e){var t="%7E";e.quirks.getCorrectInnerHTML=function(n){var i,o,s,r,a,l=n.innerHTML;if(-1===l.indexOf(t))return l;for(i=n.querySelectorAll("[href*='~'], [src*='~']"),a=0,r=i.length;r>a;a++)o=i[a].href||i[a].src,s=e.lang.string(o).replace("~").by(t),l=e.lang.string(l).replace(s).by(o);return l}}(wysihtml5),function(e){var t="wysihtml5-quirks-redraw";e.quirks.redraw=function(n){e.dom.addClass(n,t),e.dom.removeClass(n,t);try{var i=n.ownerDocument;i.execCommand("italic",!1,null),i.execCommand("italic",!1,null)}catch(o){}}}(wysihtml5),wysihtml5.quirks.tableCellsSelection=function(e,t){function n(){return u.observe(e,"mousedown",function(e){var t=wysihtml5.dom.getParentElement(e.target,{nodeName:["TD","TH"]});t&&i(t)}),d}function i(n){d.start=n,d.end=n,d.cells=[n],d.table=u.getParentElement(d.start,{nodeName:["TABLE"]}),d.table&&(o(),u.addClass(n,h),f=u.observe(e,"mousemove",r),m=u.observe(e,"mouseup",a),t.fire("tableselectstart").fire("tableselectstart:composer"))}function o(){var t,n;if(e&&(t=e.querySelectorAll("."+h),t.length>0))for(n=0;n<t.length;n++)u.removeClass(t[n],h);
}function s(e){for(var t=0;t<e.length;t++)u.addClass(e[t],h)}function r(e){var n,i=null,r=u.getParentElement(e.target,{nodeName:["TD","TH"]});r&&d.table&&d.start&&(i=u.getParentElement(r,{nodeName:["TABLE"]}),i&&i===d.table&&(o(),n=d.end,d.end=r,d.cells=u.table.getCellsBetween(d.start,r),d.cells.length>1&&t.composer.selection.deselect(),s(d.cells),d.end!==n&&t.fire("tableselectchange").fire("tableselectchange:composer")))}function a(){f.stop(),m.stop(),t.fire("tableselect").fire("tableselect:composer"),setTimeout(function(){l()},0)}function l(){var n=u.observe(e.ownerDocument,"click",function(e){n.stop(),u.getParentElement(e.target,{nodeName:["TABLE"]})!=d.table&&(o(),d.table=null,d.start=null,d.end=null,t.fire("tableunselect").fire("tableunselect:composer"))})}function c(e,n){d.start=e,d.end=n,d.table=u.getParentElement(d.start,{nodeName:["TABLE"]}),selectedCells=u.table.getCellsBetween(d.start,d.end),s(selectedCells),l(),t.fire("tableselect").fire("tableselect:composer")}var u=wysihtml5.dom,d={table:null,start:null,end:null,cells:null,select:c},h="wysiwyg-tmp-selected-cell",f=null,m=null;return n()},function(e){var t=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([\d\.]+)\s*\)/i,n=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,i=/^#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i,o=/^#([0-9a-f])([0-9a-f])([0-9a-f])/i,s=function(e){return RegExp("(^|\\s|;)"+e+"\\s*:\\s*[^;$]+","gi")};e.quirks.styleParser={parseColor:function(r,a){var l,c,u,d=s(a),h=r.match(d),f=10;if(h){for(u=h.length;u--;)h[u]=e.lang.string(h[u].split(":")[1]).trim();if(l=h[h.length-1],t.test(l))c=l.match(t);else if(n.test(l))c=l.match(n);else if(i.test(l))c=l.match(i),f=16;else if(o.test(l))return c=l.match(o),c.shift(),c.push(1),e.lang.array(c).map(function(e,t){return 3>t?16*parseInt(e,16)+parseInt(e,16):parseFloat(e)});if(c)return c.shift(),c[3]||c.push(1),e.lang.array(c).map(function(e,t){return 3>t?parseInt(e,f):parseFloat(e)})}return!1},unparseColor:function(e,t){if(t){if("hex"==t)return e[0].toString(16).toUpperCase()+e[1].toString(16).toUpperCase()+e[2].toString(16).toUpperCase();if("hash"==t)return"#"+e[0].toString(16).toUpperCase()+e[1].toString(16).toUpperCase()+e[2].toString(16).toUpperCase();if("rgb"==t)return"rgb("+e[0]+","+e[1]+","+e[2]+")";if("rgba"==t)return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")";if("csv"==t)return e[0]+","+e[1]+","+e[2]+","+e[3]}return e[3]&&1!==e[3]?"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")":"rgb("+e[0]+","+e[1]+","+e[2]+")"},parseFontSize:function(t){var n=t.match(s("font-size"));return!!n&&e.lang.string(n[n.length-1].split(":")[1]).trim()}}}(wysihtml5),function(e){function t(e){var t=0;if(e.parentNode)do t+=e.offsetTop||0,e=e.offsetParent;while(e);return t}function n(e,t){for(var n=0;t!==e;)if(n++,t=t.parentNode,!t)throw Error("not a descendant of ancestor!");return n}function i(e){if(!e.canSurroundContents())for(var t=e.commonAncestorContainer,i=n(t,e.startContainer),o=n(t,e.endContainer);!e.canSurroundContents();)i>o?(e.setStartBefore(e.startContainer),i=n(t,e.startContainer)):(e.setEndAfter(e.endContainer),o=n(t,e.endContainer))}var o=e.dom;e.Selection=Base.extend({constructor:function(e,t,n){window.rangy.init(),this.editor=e,this.composer=e.composer,this.doc=this.composer.doc,this.contain=t,this.unselectableClass=n||!1},getBookmark:function(){var e=this.getRange();return e&&i(e),e&&e.cloneRange()},setBookmark:function(e){e&&this.setSelection(e)},setBefore:function(e){var t=rangy.createRange(this.doc);return t.setStartBefore(e),t.setEndBefore(e),this.setSelection(t)},setAfter:function(e){var t=rangy.createRange(this.doc);return t.setStartAfter(e),t.setEndAfter(e),this.setSelection(t)},selectNode:function(t,n){var i=rangy.createRange(this.doc),s=t.nodeType===e.ELEMENT_NODE,r="canHaveHTML"in t?t.canHaveHTML:"IMG"!==t.nodeName,a=s?t.innerHTML:t.data,l=""===a||a===e.INVISIBLE_SPACE,c=o.getStyle("display").from(t),u="block"===c||"list-item"===c;if(l&&s&&r&&!n)try{t.innerHTML=e.INVISIBLE_SPACE}catch(d){}r?i.selectNodeContents(t):i.selectNode(t),r&&l&&s?i.collapse(u):r&&l&&(i.setStartAfter(t),i.setEndAfter(t)),this.setSelection(i)},getSelectedNode:function(e){var t,n;return e&&this.doc.selection&&"Control"===this.doc.selection.type&&(n=this.doc.selection.createRange(),n&&n.length)?n.item(0):(t=this.getSelection(this.doc),t.focusNode===t.anchorNode?t.focusNode:(n=this.getRange(this.doc),n?n.commonAncestorContainer:this.doc.body))},fixSelBorders:function(){var e=this.getRange();i(e),this.setSelection(e)},getSelectedOwnNodes:function(){var e,t,n=this.getOwnRanges(),i=[];for(e=0,t=n.length;t>e;e++)i.push(n[e].commonAncestorContainer||this.doc.body);return i},findNodesInSelection:function(t){var n,i,o,s=this.getOwnRanges(),r=[];for(i=0,o=s.length;o>i;i++)n=s[i].getNodes([1],function(n){return e.lang.array(t).contains(n.nodeName)}),r=r.concat(n);return r},containsUneditable:function(){var e,t,n=this.getOwnUneditables(),i=this.getSelection();for(e=0,t=n.length;t>e;e++)if(i.containsNode(n[e]))return!0;return!1},deleteContents:function(){var e,t=this.getOwnRanges();for(e=t.length;e--;)t[e].deleteContents();this.setSelection(t[0])},getPreviousNode:function(t,n){var i,o,s;return t||(i=this.getSelection(),t=i.anchorNode),t!==this.contain&&(o=t.previousSibling,o!==this.contain&&(o&&3!==o.nodeType&&1!==o.nodeType?o=this.getPreviousNode(o,n):o&&3===o.nodeType&&/^\s*$/.test(o.textContent)?o=this.getPreviousNode(o,n):n&&o&&1===o.nodeType&&!e.lang.array(["BR","HR","IMG"]).contains(o.nodeName)&&/^[\s]*$/.test(o.innerHTML)?o=this.getPreviousNode(o,n):o||t===this.contain||(s=t.parentNode,s!==this.contain&&(o=this.getPreviousNode(s,n))),o!==this.contain&&o))},getSelectionParentsByTag:function(){var t,n,i,o=this.getSelectedOwnNodes(),s=[];for(n=0,i=o.length;i>n;n++)t=o[n].nodeName&&"LI"===o[n].nodeName?o[n]:e.dom.getParentElement(o[n],{nodeName:["LI"]},!1,this.contain),t&&s.push(t);return s.length?s:null},getRangeToNodeEnd:function(){if(this.isCollapsed()){var e=this.getRange(),t=e.startContainer,n=e.startOffset,i=rangy.createRange(this.doc);return i.selectNodeContents(t),i.setStart(t,n),i}},caretIsLastInSelection:function(){var e=(rangy.createRange(this.doc),this.getSelection(),this.getRangeToNodeEnd().cloneContents()),t=e.textContent;return/^\s*$/.test(t)},caretIsFirstInSelection:function(){var t=rangy.createRange(this.doc),n=this.getSelection(),i=this.getRange(),o=i.startContainer;return o.nodeType===e.TEXT_NODE?this.isCollapsed()&&o.nodeType===e.TEXT_NODE&&/^\s*$/.test(o.data.substr(0,i.startOffset)):(t.selectNodeContents(this.getRange().commonAncestorContainer),t.collapse(!0),this.isCollapsed()&&(t.startContainer===n.anchorNode||t.endContainer===n.anchorNode)&&t.startOffset===n.anchorOffset)},caretIsInTheBeginnig:function(t){var n=this.getSelection(),i=n.anchorNode,o=n.anchorOffset;return t?0===o&&(i.nodeName&&i.nodeName===t.toUpperCase()||e.dom.getParentElement(i.parentNode,{nodeName:t},1)):0===o&&!this.getPreviousNode(i,!0)},caretIsBeforeUneditable:function(){var e,t,n,i,o=this.getSelection(),s=o.anchorNode,r=o.anchorOffset;if(0===r&&(e=this.getPreviousNode(s,!0)))for(t=this.getOwnUneditables(),n=0,i=t.length;i>n;n++)if(e===t[n])return t[n];return!1},executeAndRestoreRangy:function(e){var t=this.doc.defaultView||this.doc.parentWindow,n=rangy.saveSelection(t);if(n)try{e()}catch(i){setTimeout(function(){throw i},0)}else e();rangy.restoreSelection(n)},executeAndRestore:function(t,n){var i,s,r,a,l,c,u,d,h,f=this.doc.body,m=n&&f.scrollTop,p=n&&f.scrollLeft,g="_wysihtml5-temp-placeholder",y='<span class="'+g+'">'+e.INVISIBLE_SPACE+"</span>",v=this.getRange(!0);if(!v)return void t(f,f);v.collapsed||(u=v.cloneRange(),c=u.createContextualFragment(y),u.collapse(!1),u.insertNode(c),u.detach()),l=v.createContextualFragment(y),v.insertNode(l),c&&(i=this.contain.querySelectorAll("."+g),v.setStartBefore(i[0]),v.setEndAfter(i[i.length-1])),this.setSelection(v);try{t(v.startContainer,v.endContainer)}catch(w){setTimeout(function(){throw w},0)}if(i=this.contain.querySelectorAll("."+g),i&&i.length)for(d=rangy.createRange(this.doc),r=i[0].nextSibling,i.length>1&&(a=i[i.length-1].previousSibling),a&&r?(d.setStartBefore(r),d.setEndAfter(a)):(s=this.doc.createTextNode(e.INVISIBLE_SPACE),o.insert(s).after(i[0]),d.setStartBefore(s),d.setEndAfter(s)),this.setSelection(d),h=i.length;h--;)i[h].parentNode.removeChild(i[h]);else this.contain.focus();n&&(f.scrollTop=m,f.scrollLeft=p);try{i.parentNode.removeChild(i)}catch(b){}},set:function(e,t){var n=rangy.createRange(this.doc);n.setStart(e,t||0),this.setSelection(n)},insertHTML:function(e){var t,n=(rangy.createRange(this.doc),this.doc.createElement("DIV")),i=this.doc.createDocumentFragment();for(n.innerHTML=e,t=n.lastChild;n.firstChild;)i.appendChild(n.firstChild);this.insertNode(i),t&&this.setAfter(t)},insertNode:function(e){var t=this.getRange();t&&t.insertNode(e)},surround:function(e){var t,n,i=this.getOwnRanges(),o=[];if(0==i.length)return o;for(n=i.length;n--;){t=this.doc.createElement(e.nodeName),o.push(t),e.className&&(t.className=e.className),e.cssStyle&&t.setAttribute("style",e.cssStyle);try{i[n].surroundContents(t),this.selectNode(t)}catch(s){t.appendChild(i[n].extractContents()),i[n].insertNode(t)}}return o},deblockAndSurround:function(t){var n,i,o,s=this.doc.createElement("div"),r=rangy.createRange(this.doc);if(s.className=t.className,this.composer.commands.exec("formatBlock",t.nodeName,t.className),n=this.contain.querySelectorAll("."+t.className),n[0])for(n[0].parentNode.insertBefore(s,n[0]),r.setStartBefore(n[0]),r.setEndAfter(n[n.length-1]),i=r.extractContents();i.firstChild;)if(o=i.firstChild,1==o.nodeType&&e.dom.hasClass(o,t.className)){for(;o.firstChild;)s.appendChild(o.firstChild);"BR"!==o.nodeName&&s.appendChild(this.doc.createElement("br")),i.removeChild(o)}else s.appendChild(o);else s=null;return s},scrollIntoView:function(){var n,i=this.doc,o=5,s=i.documentElement.scrollHeight>i.documentElement.offsetHeight,r=i._wysihtml5ScrollIntoViewElement=i._wysihtml5ScrollIntoViewElement||function(){var t=i.createElement("span");return t.innerHTML=e.INVISIBLE_SPACE,t}();s&&(this.insertNode(r),n=t(r),r.parentNode.removeChild(r),n>=i.body.scrollTop+i.documentElement.offsetHeight-o&&(i.body.scrollTop=n))},selectLine:function(){e.browser.supportsSelectionModify()?this._selectLine_W3C():this.doc.selection&&this._selectLine_MSIE()},_selectLine_W3C:function(){var e=this.doc.defaultView,t=e.getSelection();t.modify("move","left","lineboundary"),t.modify("extend","right","lineboundary")},_selectLine_MSIE:function(){var e,t,n,i,o,s=this.doc.selection.createRange(),r=s.boundingTop,a=this.doc.body.scrollWidth;if(s.moveToPoint){for(0===r&&(n=this.doc.createElement("span"),this.insertNode(n),r=n.offsetTop,n.parentNode.removeChild(n)),r+=1,i=-10;a>i;i+=2)try{s.moveToPoint(i,r);break}catch(l){}for(e=r,t=this.doc.selection.createRange(),o=a;o>=0;o--)try{t.moveToPoint(o,e);break}catch(c){}s.setEndPoint("EndToEnd",t),s.select()}},getText:function(){var e=this.getSelection();return e?""+e:""},getNodes:function(e,t){var n=this.getRange();return n?n.getNodes([e],t):[]},fixRangeOverflow:function(e){var t,n;this.contain&&this.contain.firstChild&&e&&(t=e.compareNode(this.contain),2!==t?(1===t&&e.setStartBefore(this.contain.firstChild),0===t&&e.setEndAfter(this.contain.lastChild),3===t&&(e.setStartBefore(this.contain.firstChild),e.setEndAfter(this.contain.lastChild))):this._detectInlineRangeProblems(e)&&(n=e.endContainer.previousElementSibling,n&&e.setEnd(n,this._endOffsetForNode(n))))},_endOffsetForNode:function(e){var t=document.createRange();return t.selectNodeContents(e),t.endOffset},_detectInlineRangeProblems:function(e){var t=o.compareDocumentPosition(e.startContainer,e.endContainer);return 0==e.endOffset&&4&t},getRange:function(e){var t=this.getSelection(),n=t&&t.rangeCount&&t.getRangeAt(0);return e!==!0&&this.fixRangeOverflow(n),n},getOwnUneditables:function(){var t=o.query(this.contain,"."+this.unselectableClass),n=o.query(t,"."+this.unselectableClass);return e.lang.array(t).without(n)},getOwnRanges:function(){var e,t,n,i,o,s,r,a=[],l=this.getRange();if(l&&a.push(l),this.unselectableClass&&this.contain&&l&&(t=this.getOwnUneditables(),t.length>0))for(i=0,o=t.length;o>i;i++)for(e=[],s=0,r=a.length;r>s;s++){if(a[s])switch(a[s].compareNode(t[i])){case 2:break;case 3:n=a[s].cloneRange(),n.setEndBefore(t[i]),e.push(n),n=a[s].cloneRange(),n.setStartAfter(t[i]),e.push(n);break;default:e.push(a[s])}a=e}return a},getSelection:function(){return rangy.getSelection(this.doc.defaultView||this.doc.parentWindow)},setSelection:function(e){var t=this.doc.defaultView||this.doc.parentWindow,n=rangy.getSelection(t);return n.setSingleRange(e)},createRange:function(){return rangy.createRange(this.doc)},isCollapsed:function(){return this.getSelection().isCollapsed},getHtml:function(){return this.getSelection().toHtml()},isEndToEndInNode:function(t){var n=this.getRange(),i=n.commonAncestorContainer,o=n.startContainer,s=n.endContainer;if(i.nodeType===e.TEXT_NODE&&(i=i.parentNode),o.nodeType===e.TEXT_NODE&&!/^\s*$/.test(o.data.substr(n.startOffset)))return!1;if(s.nodeType===e.TEXT_NODE&&!/^\s*$/.test(s.data.substr(n.endOffset)))return!1;for(;o&&o!==i;){if(o.nodeType!==e.TEXT_NODE&&!e.dom.contains(i,o))return!1;if(e.dom.domNode(o).prev({ignoreBlankTexts:!0}))return!1;o=o.parentNode}for(;s&&s!==i;){if(s.nodeType!==e.TEXT_NODE&&!e.dom.contains(i,s))return!1;if(e.dom.domNode(s).next({ignoreBlankTexts:!0}))return!1;s=s.parentNode}return!!e.lang.array(t).contains(i.nodeName)&&i},deselect:function(){var e=this.getSelection();e&&e.removeAllRanges()}})}(wysihtml5),function(e,t){function n(e,t,n){if(!e.className)return!1;var i=e.className.match(n)||[];return i[i.length-1]===t}function i(e,t){return!(!e.getAttribute||!e.getAttribute("style"))&&(e.getAttribute("style").match(t),!!e.getAttribute("style").match(t))}function o(e,t,n){e.getAttribute("style")?(a(e,n),e.getAttribute("style")&&!/^\s*$/.test(e.getAttribute("style"))?e.setAttribute("style",t+";"+e.getAttribute("style")):e.setAttribute("style",t)):e.setAttribute("style",t)}function s(e,t,n){e.className?(r(e,n),e.className+=" "+t):e.className=t}function r(e,t){e.className&&(e.className=e.className.replace(t,""))}function a(e,t){var n,i,o=[];if(e.getAttribute("style")){for(n=e.getAttribute("style").split(";"),i=n.length;i--;)n[i].match(t)||/^\s*$/.test(n[i])||o.push(n[i]);o.length?e.setAttribute("style",o.join(";")):e.removeAttribute("style")}}function l(e,t){var n,i,o,s=[],r=t.split(";"),a=e.getAttribute("style");if(a){for(a=a.replace(/\s/gi,"").toLowerCase(),s.push(RegExp("(^|\\s|;)"+t.replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi")),n=r.length;n-- >0;)/^\s*$/.test(r[n])||s.push(RegExp("(^|\\s|;)"+r[n].replace(/\s/gi,"").replace(/([\(\)])/gi,"\\$1").toLowerCase().replace(";",";?").replace(/rgb\\\((\d+),(\d+),(\d+)\\\)/gi,"\\s?rgb\\($1,\\s?$2,\\s?$3\\)"),"gi"));for(i=0,o=s.length;o>i;i++)if(a.match(s[i]))return s[i]}return!1}function c(n,i,o,s){return o?l(n,o):s?e.dom.hasClass(n,s):t.dom.arrayContains(i,n.tagName.toLowerCase())}function u(e,t,n,i){for(var o=e.length;o--;)if(!c(e[o],t,n,i))return!1;return!!e.length}function d(e,t,n){var i=l(e,t);return i?(a(e,i),"remove"):(o(e,t,n),"change")}function h(e,t){return e.className.replace(b," ")==t.className.replace(b," ")}function f(e){for(var t=e.parentNode;e.firstChild;)t.insertBefore(e.firstChild,e);t.removeChild(e)}function m(e,t){if(e.attributes.length!=t.attributes.length)return!1;for(var n,i,o,s=0,r=e.attributes.length;r>s;++s)if(n=e.attributes[s],o=n.name,"class"!=o){if(i=t.attributes.getNamedItem(o),n.specified!=i.specified)return!1;if(n.specified&&n.nodeValue!==i.nodeValue)return!1}return!0}function p(e,n){return t.dom.isCharacterDataNode(e)?0==n?!!e.previousSibling:n!=e.length||!!e.nextSibling:n>0&&n<e.childNodes.length}function g(e,n,i,o){var s,r;if(t.dom.isCharacterDataNode(n)&&(0==i?(i=t.dom.getNodeIndex(n),n=n.parentNode):i==n.length?(i=t.dom.getNodeIndex(n)+1,n=n.parentNode):s=t.dom.splitDataNode(n,i)),!(s||o&&n===o)){for(s=n.cloneNode(!1),s.id&&s.removeAttribute("id");r=n.childNodes[i];)s.appendChild(r);t.dom.insertAfter(s,n)}return n==e?s:g(e,s.parentNode,t.dom.getNodeIndex(s),o)}function y(t){this.isElementMerge=t.nodeType==e.ELEMENT_NODE,this.firstTextNode=this.isElementMerge?t.lastChild:t,this.textNodes=[this.firstTextNode]}function v(e,t,n,i,o,s,r){this.tagNames=e||[w],this.cssClass=t||t!==!1&&"",this.similarClassRegExp=n,this.cssStyle=o||"",this.similarStyleRegExp=s,this.normalize=i,this.applyToAnyTagName=!1,this.container=r}var w="span",b=/\s+/g;y.prototype={doMerge:function(){var e,t,n,i,o,s=[];for(i=0,o=this.textNodes.length;o>i;++i)e=this.textNodes[i],t=e.parentNode,s[i]=e.data,i&&(t.removeChild(e),t.hasChildNodes()||t.parentNode.removeChild(t));return this.firstTextNode.data=n=s.join(""),n},getLength:function(){for(var e=this.textNodes.length,t=0;e--;)t+=this.textNodes[e].length;return t},toString:function(){var e,t,n=[];for(e=0,t=this.textNodes.length;t>e;++e)n[e]="'"+this.textNodes[e].data+"'";return"[Merge("+n.join(",")+")]"}},v.prototype={getAncestorWithClass:function(i){for(var o;i;){if(o=this.cssClass?n(i,this.cssClass,this.similarClassRegExp):""===this.cssStyle,i.nodeType==e.ELEMENT_NODE&&"false"!=i.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())&&o)return i;i=i.parentNode}return!1},getAncestorWithStyle:function(n){for(var o;n;){if(o=!!this.cssStyle&&i(n,this.similarStyleRegExp),n.nodeType==e.ELEMENT_NODE&&"false"!=n.getAttribute("contenteditable")&&t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&o)return n;n=n.parentNode}return!1},getMatchingAncestor:function(e){var t=this.getAncestorWithClass(e),n=!1;return t?this.cssStyle&&(n="class"):(t=this.getAncestorWithStyle(e),t&&(n="style")),{element:t,type:n}},postApply:function(e,t){var n,i,o,s,r,a,l=e[0],c=e[e.length-1],u=[],d=l,h=c,f=0,m=c.length;for(s=0,r=e.length;r>s;++s)i=e[s],o=null,i&&i.parentNode&&(o=this.getAdjacentMergeableTextNode(i.parentNode,!1)),o?(n||(n=new y(o),u.push(n)),n.textNodes.push(i),i===l&&(d=n.firstTextNode,f=d.length),i===c&&(h=n.firstTextNode,m=n.getLength())):n=null;if(c&&c.parentNode&&(a=this.getAdjacentMergeableTextNode(c.parentNode,!0),a&&(n||(n=new y(c),u.push(n)),n.textNodes.push(a))),u.length){for(s=0,r=u.length;r>s;++s)u[s].doMerge();t.setStart(d,f),t.setEnd(h,m)}},getAdjacentMergeableTextNode:function(t,n){var i,o=t.nodeType==e.TEXT_NODE,s=o?t.parentNode:t,r=n?"nextSibling":"previousSibling";if(o){if(i=t[r],i&&i.nodeType==e.TEXT_NODE)return i}else if(i=s[r],i&&this.areElementsMergeable(t,i))return i[n?"firstChild":"lastChild"];return null},areElementsMergeable:function(e,n){return t.dom.arrayContains(this.tagNames,(e.tagName||"").toLowerCase())&&t.dom.arrayContains(this.tagNames,(n.tagName||"").toLowerCase())&&h(e,n)&&m(e,n)},createContainer:function(e){var t=e.createElement(this.tagNames[0]);return this.cssClass&&(t.className=this.cssClass),this.cssStyle&&t.setAttribute("style",this.cssStyle),t},applyToTextNode:function(e){var n,i=e.parentNode;1==i.childNodes.length&&t.dom.arrayContains(this.tagNames,i.tagName.toLowerCase())?(this.cssClass&&s(i,this.cssClass,this.similarClassRegExp),this.cssStyle&&o(i,this.cssStyle,this.similarStyleRegExp)):(n=this.createContainer(t.dom.getDocument(e)),e.parentNode.insertBefore(n,e),n.appendChild(e))},isRemovable:function(n){return t.dom.arrayContains(this.tagNames,n.tagName.toLowerCase())&&""===e.lang.string(n.className).trim()&&(!n.getAttribute("style")||""===e.lang.string(n.getAttribute("style")).trim())},undoToTextNode:function(e,t,n,i){var o,s=!n,a=n||i,l=!1;t.containsNode(a)||(o=t.cloneRange(),o.selectNode(a),o.isPointInRange(t.endContainer,t.endOffset)&&p(t.endContainer,t.endOffset)&&(g(a,t.endContainer,t.endOffset,this.container),t.setEndAfter(a)),o.isPointInRange(t.startContainer,t.startOffset)&&p(t.startContainer,t.startOffset)&&(a=g(a,t.startContainer,t.startOffset,this.container))),!s&&this.similarClassRegExp&&r(a,this.similarClassRegExp),s&&this.similarStyleRegExp&&(l="change"===d(a,this.cssStyle,this.similarStyleRegExp)),this.isRemovable(a)&&!l&&f(a)},applyToRange:function(t){var n,i,o,s,r,a;for(i=t.length;i--;){if(n=t[i].getNodes([e.TEXT_NODE]),!n.length)try{return o=this.createContainer(t[i].endContainer.ownerDocument),t[i].surroundContents(o),void this.selectNode(t[i],o)}catch(l){}if(t[i].splitBoundaries(),n=t[i].getNodes([e.TEXT_NODE]),n.length){for(r=0,a=n.length;a>r;++r)s=n[r],this.getMatchingAncestor(s).element||this.applyToTextNode(s);t[i].setStart(n[0],0),s=n[n.length-1],t[i].setEnd(s,s.length),this.normalize&&this.postApply(n,t[i])}}},undoToRange:function(t){var n,i,o,s,r,a,l,c;for(s=t.length;s--;){for(n=t[s].getNodes([e.TEXT_NODE]),n.length?(t[s].splitBoundaries(),n=t[s].getNodes([e.TEXT_NODE])):(r=t[s].endContainer.ownerDocument,a=r.createTextNode(e.INVISIBLE_SPACE),t[s].insertNode(a),t[s].selectNode(a),n=[a]),l=0,c=n.length;c>l;++l)t[s].isValid()&&(i=n[l],o=this.getMatchingAncestor(i),"style"===o.type?this.undoToTextNode(i,t[s],!1,o.element):o.element&&this.undoToTextNode(i,t[s],o.element));1==c?this.selectNode(t[s],n[0]):(t[s].setStart(n[0],0),i=n[n.length-1],t[s].setEnd(i,i.length),this.normalize&&this.postApply(n,t[s]))}},selectNode:function(t,n){var i=n.nodeType===e.ELEMENT_NODE,o=!("canHaveHTML"in n)||n.canHaveHTML,s=i?n.innerHTML:n.data,r=""===s||s===e.INVISIBLE_SPACE;if(r&&i&&o)try{n.innerHTML=e.INVISIBLE_SPACE}catch(a){}t.selectNodeContents(n),r&&i?t.collapse(!1):r&&(t.setStartAfter(n),t.setEndAfter(n))},getTextSelectedByRange:function(e,t){var n,i,o=t.cloneRange();return o.selectNodeContents(e),n=o.intersection(t),i=n?""+n:"",o.detach(),i},isAppliedToRange:function(t){var n,i,o,s,r,a,l=[],c="full";for(o=t.length;o--;){if(i=t[o].getNodes([e.TEXT_NODE]),!i.length)return n=this.getMatchingAncestor(t[o].startContainer).element,!!n&&{elements:[n],coverage:c};for(s=0,r=i.length;r>s;++s)a=this.getTextSelectedByRange(i[s],t[o]),n=this.getMatchingAncestor(i[s]).element,n&&""!=a?(l.push(n),1===e.dom.getTextNodes(n,!0).length?c="full":"full"===c&&(c="inline")):n||(c="partial")}return!!l.length&&{elements:l,coverage:c}},toggleRange:function(e){var t,n=this.isAppliedToRange(e);n?"full"===n.coverage?this.undoToRange(e):"inline"===n.coverage?(t=u(n.elements,this.tagNames,this.cssStyle,this.cssClass),this.undoToRange(e),t||this.applyToRange(e)):(u(n.elements,this.tagNames,this.cssStyle,this.cssClass)||this.undoToRange(e),this.applyToRange(e)):this.applyToRange(e)}},e.selection.HTMLApplier=v}(wysihtml5,rangy),wysihtml5.Commands=Base.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.doc=this.composer.doc},support:function(e){return wysihtml5.browser.supportsCommand(this.doc,e)},exec:function(e,t){var n=wysihtml5.commands[e],i=wysihtml5.lang.array(arguments).get(),o=n&&n.exec,s=null;if(this.editor.fire("beforecommand:composer"),o)i.unshift(this.composer),s=o.apply(n,i);else try{s=this.doc.execCommand(e,!1,t)}catch(r){}return this.editor.fire("aftercommand:composer"),s},state:function(e){var t=wysihtml5.commands[e],n=wysihtml5.lang.array(arguments).get(),i=t&&t.state;if(i)return n.unshift(this.composer),i.apply(t,n);try{return this.doc.queryCommandState(e)}catch(o){return!1}},stateValue:function(e){var t=wysihtml5.commands[e],n=wysihtml5.lang.array(arguments).get(),i=t&&t.stateValue;return!!i&&(n.unshift(this.composer),i.apply(t,n))}}),wysihtml5.commands.bold={exec:function(e,t){wysihtml5.commands.formatInline.execWithToggle(e,t,"b")},state:function(e,t){return wysihtml5.commands.formatInline.state(e,t,"b")}},function(e){function t(t,n){var r,a,l,c,u,d,h,f,m,p=t.doc,g="_wysihtml5-temp-"+ +new Date,y=/non-matching-class/g,v=0;for(e.commands.formatInline.exec(t,i,o,g,y,i,i,!0,!0),a=p.querySelectorAll(o+"."+g),r=a.length;r>v;v++){l=a[v],l.removeAttribute("class");for(m in n)"text"!==m&&l.setAttribute(m,n[m])}d=l,1===r&&(h=s.getTextContent(l),c=!!l.querySelector("*"),u=""===h||h===e.INVISIBLE_SPACE,!c&&u&&(s.setTextContent(l,n.text||l.href),f=p.createTextNode(" "),t.selection.setAfter(l),s.insert(f).after(l),d=f)),t.selection.setAfter(d)}function n(e,t,n){var i,o,s,r;for(o=t.length;o--;){for(i=t[o].attributes,s=i.length;s--;)t[o].removeAttribute(i.item(s).name);for(r in n)n.hasOwnProperty(r)&&t[o].setAttribute(r,n[r])}}var i,o="A",s=e.dom;e.commands.createLink={exec:function(e,i,o){var s=this.state(e,i);s?e.selection.executeAndRestore(function(){n(e,s,o)}):(o="object"==typeof o?o:{href:o},t(e,o))},state:function(t,n){return e.commands.formatInline.state(t,n,"A")}}}(wysihtml5),function(e){function t(e,t){for(var i,o,s,r=t.length,a=0;r>a;a++)i=t[a],o=n.getParentElement(i,{nodeName:"code"}),s=n.getTextContent(i),s.match(n.autoLink.URL_REG_EXP)&&!o?o=n.renameElement(i,"code"):n.replaceWithChildNodes(i)}var n=e.dom;e.commands.removeLink={exec:function(e,n){var i=this.state(e,n);i&&e.selection.executeAndRestore(function(){t(e,i)})},state:function(t,n){return e.commands.formatInline.state(t,n,"A")}}}(wysihtml5),function(e){var t=/wysiwyg-font-size-[0-9a-z\-]+/g;e.commands.fontSize={exec:function(n,i,o){e.commands.formatInline.execWithToggle(n,i,"span","wysiwyg-font-size-"+o,t)},state:function(n,i,o){return e.commands.formatInline.state(n,i,"span","wysiwyg-font-size-"+o,t)}}}(wysihtml5),function(e){var t=/(\s|^)font-size\s*:\s*[^;\s]+;?/gi;e.commands.fontSizeStyle={exec:function(n,i,o){o="object"==typeof o?o.size:o,/^\s*$/.test(o)||e.commands.formatInline.execWithToggle(n,i,"span",!1,!1,"font-size:"+o,t)},state:function(n,i){return e.commands.formatInline.state(n,i,"span",!1,!1,"font-size",t)},stateValue:function(t,n){var i,o=this.state(t,n);return o&&e.lang.object(o).isArray()&&(o=o[0]),!(!o||!(i=o.getAttribute("style")))&&e.quirks.styleParser.parseFontSize(i)}}}(wysihtml5),function(e){var t=/wysiwyg-color-[0-9a-z]+/g;e.commands.foreColor={exec:function(n,i,o){e.commands.formatInline.execWithToggle(n,i,"span","wysiwyg-color-"+o,t)},state:function(n,i,o){return e.commands.formatInline.state(n,i,"span","wysiwyg-color-"+o,t)}}}(wysihtml5),function(e){var t=/(\s|^)color\s*:\s*[^;\s]+;?/gi;e.commands.foreColorStyle={exec:function(n,i,o){var s,r=e.quirks.styleParser.parseColor("object"==typeof o?"color:"+o.color:"color:"+o,"color");r&&(s="color: rgb("+r[0]+","+r[1]+","+r[2]+");",1!==r[3]&&(s+="color: rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+");"),e.commands.formatInline.execWithToggle(n,i,"span",!1,!1,s,t))},state:function(n,i){return e.commands.formatInline.state(n,i,"span",!1,!1,"color",t)},stateValue:function(t,n,i){var o,s=this.state(t,n);return s&&e.lang.object(s).isArray()&&(s=s[0]),!!(s&&(o=s.getAttribute("style"),o&&o))&&(val=e.quirks.styleParser.parseColor(o,"color"),e.quirks.styleParser.unparseColor(val,i))}}}(wysihtml5),function(e){var t=/(\s|^)background-color\s*:\s*[^;\s]+;?/gi;e.commands.bgColorStyle={exec:function(n,i,o){var s,r=e.quirks.styleParser.parseColor("object"==typeof o?"background-color:"+o.color:"background-color:"+o,"background-color");r&&(s="background-color: rgb("+r[0]+","+r[1]+","+r[2]+");",1!==r[3]&&(s+="background-color: rgba("+r[0]+","+r[1]+","+r[2]+","+r[3]+");"),e.commands.formatInline.execWithToggle(n,i,"span",!1,!1,s,t))},state:function(n,i){return e.commands.formatInline.state(n,i,"span",!1,!1,"background-color",t)},stateValue:function(t,n,i){var o,s=this.state(t,n),r=!1;return s&&e.lang.object(s).isArray()&&(s=s[0]),!(!s||!(o=s.getAttribute("style")))&&(r=e.quirks.styleParser.parseColor(o,"background-color"),e.quirks.styleParser.unparseColor(r,i))}}}(wysihtml5),function(e){function t(t,n,o){t.className?(i(t,o),t.className=e.lang.string(t.className+" "+n).trim()):t.className=n}function n(t,n,i){o(t,i),t.getAttribute("style")?t.setAttribute("style",e.lang.string(t.getAttribute("style")+" "+n).trim()):t.setAttribute("style",n)}function i(t,n){var i=n.test(t.className);return t.className=t.className.replace(n,""),""==e.lang.string(t.className).trim()&&t.removeAttribute("class"),i}function o(t,n){var i=n.test(t.getAttribute("style"));return t.setAttribute("style",(t.getAttribute("style")||"").replace(n,"")),""==e.lang.string(t.getAttribute("style")||"").trim()&&t.removeAttribute("style"),i}function s(e){var t=e.lastChild;t&&r(t)&&t.parentNode.removeChild(t)}function r(e){return"BR"===e.nodeName}function a(t,n){var i,o,r;for(t.selection.isCollapsed()&&t.selection.selectLine(),i=t.selection.surround(n),o=0,r=i.length;r>o;o++)e.dom.lineBreaks(i[o]).remove(),s(i[o])}function l(t){return!!e.lang.string(t.className).trim()}function c(t){return!!e.lang.string(t.getAttribute("style")||"").trim()}var u=e.dom,d=["H1","H2","H3","H4","H5","H6","P","PRE","DIV"];e.commands.formatBlock={exec:function(s,r,h,f,m,p,g){var y,v,w,b,C,_=(s.doc,this.state(s,r,h,f,m,p,g)),x=s.config.useLineBreaks,S=x?"DIV":"P";return h="string"==typeof h?h.toUpperCase():h,_.length?void s.selection.executeAndRestoreRangy(function(){var t,n,s;for(t=_.length;t--;){if(m&&(v=i(_[t],m)),g&&(b=o(_[t],g)),(b||v)&&null===h&&_[t].nodeName!=S)return;n=l(_[t]),s=c(_[t]),n||s||!x&&"P"!==h?u.renameElement(_[t],"P"===h?"DIV":S):(e.dom.lineBreaks(_[t]).add(),u.replaceWithChildNodes(_[t]))}}):void((null!==h&&!e.lang.array(d).contains(h)||(y=s.selection.findNodesInSelection(d).concat(s.selection.getSelectedOwnNodes()),s.selection.executeAndRestoreRangy(function(){for(var e=y.length;e--;)C=u.getParentElement(y[e],{nodeName:d}),C==s.element&&(C=null),C&&(h&&(C=u.renameElement(C,h)),f&&t(C,f,m),p&&n(C,p,g),w=!0)}),!w))&&a(s,{nodeName:h||S,className:f||null,cssStyle:p||null}))},state:function(t,n,i,o,s,r,a){var l,c,d,h=t.selection.getSelectedOwnNodes(),f=[];for(i="string"==typeof i?i.toUpperCase():i,c=0,d=h.length;d>c;c++)l=u.getParentElement(h[c],{nodeName:i,className:o,classRegExp:s,cssStyle:r,styleRegExp:a}),l&&-1==e.lang.array(f).indexOf(l)&&f.push(l);return 0!=f.length&&f}}}(wysihtml5),wysihtml5.commands.formatCode={exec:function(e,t,n){var i,o,s,r=this.state(e);r?e.selection.executeAndRestore(function(){i=r.querySelector("code"),wysihtml5.dom.replaceWithChildNodes(r),i&&wysihtml5.dom.replaceWithChildNodes(i)}):(o=e.selection.getRange(),s=o.extractContents(),r=e.doc.createElement("pre"),i=e.doc.createElement("code"),n&&(i.className=n),r.appendChild(i),i.appendChild(s),o.insertNode(r),e.selection.selectNode(r))},state:function(e){var t=e.selection.getSelectedNode();return t&&t.nodeName&&"PRE"==t.nodeName&&t.firstChild&&t.firstChild.nodeName&&"CODE"==t.firstChild.nodeName?t:wysihtml5.dom.getParentElement(t,{nodeName:"CODE"})&&wysihtml5.dom.getParentElement(t,{nodeName:"PRE"})}},function(e){function t(e){var t=i[e];return t?[e.toLowerCase(),t.toLowerCase()]:[e.toLowerCase()]}function n(n,i,s,r,a,l){var c=n;return i&&(c+=":"+i),r&&(c+=":"+r),o[c]||(o[c]=new e.selection.HTMLApplier(t(n),i,s,(!0),r,a,l)),o[c]}var i={strong:"b",em:"i",b:"strong",i:"em"},o={};e.commands.formatInline={exec:function(e,t,i,o,s,r,a,l,c){var u=e.selection.createRange(),d=e.selection.getOwnRanges();return!(!d||0==d.length)&&(e.selection.getSelection().removeAllRanges(),n(i,o,s,r,a,e.element).toggleRange(d),void(l?c||e.cleanUp():(u.setStart(d[0].startContainer,d[0].startOffset),u.setEnd(d[d.length-1].endContainer,d[d.length-1].endOffset),e.selection.setSelection(u),e.selection.executeAndRestore(function(){c||e.cleanUp()},!0,!0))))},execWithToggle:function(t,n,i,o,s,r,a){var l,c=this;this.state(t,n,i,o,s,r,a)&&t.selection.isCollapsed()&&!t.selection.caretIsLastInSelection()&&!t.selection.caretIsFirstInSelection()?(l=c.state(t,n,i,o,s)[0],t.selection.executeAndRestoreRangy(function(){l.parentNode,t.selection.selectNode(l,!0),e.commands.formatInline.exec(t,n,i,o,s,r,a,!0,!0)})):this.state(t,n,i,o,s,r,a)&&!t.selection.isCollapsed()?t.selection.executeAndRestoreRangy(function(){e.commands.formatInline.exec(t,n,i,o,s,r,a,!0,!0)}):e.commands.formatInline.exec(t,n,i,o,s,r,a)},state:function(t,o,s,r,a,l,c){
var u,d,h=t.doc,f=i[s]||s;return!(!e.dom.hasElementWithTagName(h,s)&&!e.dom.hasElementWithTagName(h,f))&&(!(r&&!e.dom.hasElementWithClassName(h,r))&&(u=t.selection.getOwnRanges(),!(!u||0===u.length)&&(d=n(s,r,a,l,c,t.element).isAppliedToRange(u),!(!d||!d.elements)&&d.elements)))}}}(wysihtml5),function(e){e.commands.insertBlockQuote={exec:function(t,n){var i=this.state(t,n),o=t.selection.isEndToEndInNode(["H1","H2","H3","H4","H5","H6","P"]);t.selection.executeAndRestore(function(){if(i)t.config.useLineBreaks&&e.dom.lineBreaks(i).add(),e.dom.unwrap(i);else if(t.selection.isCollapsed()&&t.selection.selectLine(),o){var n=o.ownerDocument.createElement("blockquote");e.dom.insert(n).after(o),n.appendChild(o)}else t.selection.surround({nodeName:"blockquote"})})},state:function(t){var n=t.selection.getSelectedNode(),i=e.dom.getParentElement(n,{nodeName:"BLOCKQUOTE"},!1,t.element);return!!i&&i}}}(wysihtml5),wysihtml5.commands.insertHTML={exec:function(e,t,n){e.commands.support(t)?e.doc.execCommand(t,!1,n):e.selection.insertHTML(n)},state:function(){return!1}},function(e){var t="IMG";e.commands.insertImage={exec:function(n,i,o){var s,r,a,l,c;if(o="object"==typeof o?o:{src:o},s=n.doc,r=this.state(n))return n.selection.setBefore(r),l=r.parentNode,l.removeChild(r),e.dom.removeEmptyTextNodes(l),"A"!==l.nodeName||l.firstChild||(n.selection.setAfter(l),l.parentNode.removeChild(l)),void e.quirks.redraw(n.element);r=s.createElement(t);for(c in o)r.setAttribute("className"===c?"class":c,o[c]);n.selection.insertNode(r),e.browser.hasProblemsSettingCaretAfterImg()?(a=s.createTextNode(e.INVISIBLE_SPACE),n.selection.insertNode(a),n.selection.setAfter(a)):n.selection.setAfter(r)},state:function(n){var i,o,s,r=n.doc;return!!e.dom.hasElementWithTagName(r,t)&&(i=n.selection.getSelectedNode(),!!i&&(i.nodeName===t?i:i.nodeType===e.ELEMENT_NODE&&(o=n.selection.getText(),o=e.lang.string(o).trim(),!o&&(s=n.selection.getNodes(e.ELEMENT_NODE,function(e){return"IMG"===e.nodeName}),1===s.length&&s[0]))))}}}(wysihtml5),function(e){var t="<br>"+(e.browser.needsSpaceAfterLineBreak()?" ":"");e.commands.insertLineBreak={exec:function(n,i){n.commands.support(i)?(n.doc.execCommand(i,!1,null),e.browser.autoScrollsToCaret()||n.selection.scrollIntoView()):n.commands.exec("insertHTML",t)},state:function(){return!1}}}(wysihtml5),wysihtml5.commands.insertOrderedList={exec:function(e,t){wysihtml5.commands.insertList.exec(e,t,"OL")},state:function(e,t){return wysihtml5.commands.insertList.state(e,t,"OL")}},wysihtml5.commands.insertUnorderedList={exec:function(e,t){wysihtml5.commands.insertList.exec(e,t,"UL")},state:function(e,t){return wysihtml5.commands.insertList.state(e,t,"UL")}},wysihtml5.commands.insertList=function(e){var t=function(e,t){if(e&&e.nodeName){"string"==typeof t&&(t=[t]);for(var n=t.length;n--;)if(e.nodeName===t[n])return!0}return!1},n=function(n,i,o){var s,r,a={el:null,other:!1};return n&&(s=e.dom.getParentElement(n,{nodeName:"LI"}),r="UL"===i?"OL":"UL",t(n,i)?a.el=n:t(n,r)?a={el:n,other:!0}:s&&(t(s.parentNode,i)?a.el=s.parentNode:t(s.parentNode,r)&&(a={el:s.parentNode,other:!0}))),a.el&&!o.element.contains(a.el)&&(a.el=null),a},i=function(t,n,i){var o,r="UL"===n?"OL":"UL";i.selection.executeAndRestore(function(){var a,l,c=s(r,i);if(c.length)for(a=c.length;a--;)e.dom.renameElement(c[a],n.toLowerCase());else{for(o=s(["OL","UL"],i),l=o.length;l--;)e.dom.resolveList(o[l],i.config.useLineBreaks);e.dom.resolveList(t,i.config.useLineBreaks)}})},o=function(t,n,i){var o="UL"===n?"OL":"UL";i.selection.executeAndRestore(function(){var r,a=[t].concat(s(o,i));for(r=a.length;r--;)e.dom.renameElement(a[r],n.toLowerCase())})},s=function(e,n){var i,o=n.selection.getOwnRanges(),s=[];for(i=o.length;i--;)s=s.concat(o[i].getNodes([1],function(n){return t(n,e)}));return s},r=function(t,n){n.selection.executeAndRestoreRangy(function(){var i,o,s="_wysihtml5-temp-"+(new Date).getTime(),r=n.selection.deblockAndSurround({nodeName:"div",className:s}),a=/\uFEFF/g;r.innerHTML=r.innerHTML.replace(a,""),r&&(i=e.lang.array(["","<br>",e.INVISIBLE_SPACE]).contains(r.innerHTML),o=e.dom.convertToList(r,t.toLowerCase(),n.parent.config.uneditableContainerClassname),i&&n.selection.selectNode(o.querySelector("li"),!0))})};return{exec:function(e,t,s){var a=e.doc,l="OL"===s?"insertOrderedList":"insertUnorderedList",c=e.selection.getSelectedNode(),u=n(c,s,e);u.el?u.other?o(u.el,s,e):i(u.el,s,e):e.commands.support(l)?a.execCommand(l,!1,null):r(s,e)},state:function(e,t,i){var o=e.selection.getSelectedNode(),s=n(o,i,e);return!(!s.el||s.other)&&s.el}}}(wysihtml5),wysihtml5.commands.italic={exec:function(e,t){wysihtml5.commands.formatInline.execWithToggle(e,t,"i")},state:function(e,t){return wysihtml5.commands.formatInline.state(e,t,"i")}},function(e){var t="wysiwyg-text-align-center",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyCenter={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,t,n)}}}(wysihtml5),function(e){var t="wysiwyg-text-align-left",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyLeft={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,t,n)}}}(wysihtml5),function(e){var t="wysiwyg-text-align-right",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyRight={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,t,n)}}}(wysihtml5),function(e){var t="wysiwyg-text-align-justify",n=/wysiwyg-text-align-[0-9a-z]+/g;e.commands.justifyFull={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,t,n)}}}(wysihtml5),function(e){var t="text-align: right;",n=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;e.commands.alignRightStyle={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,null,null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,null,null,t,n)}}}(wysihtml5),function(e){var t="text-align: left;",n=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;e.commands.alignLeftStyle={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,null,null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,null,null,t,n)}}}(wysihtml5),function(e){var t="text-align: center;",n=/(\s|^)text-align\s*:\s*[^;\s]+;?/gi;e.commands.alignCenterStyle={exec:function(i){return e.commands.formatBlock.exec(i,"formatBlock",null,null,null,t,n)},state:function(i){return e.commands.formatBlock.state(i,"formatBlock",null,null,null,t,n)}}}(wysihtml5),wysihtml5.commands.redo={exec:function(e){return e.undoManager.redo()},state:function(){return!1}},wysihtml5.commands.underline={exec:function(e,t){wysihtml5.commands.formatInline.execWithToggle(e,t,"u")},state:function(e,t){return wysihtml5.commands.formatInline.state(e,t,"u")}},wysihtml5.commands.undo={exec:function(e){return e.undoManager.undo()},state:function(){return!1}},wysihtml5.commands.createTable={exec:function(e,t,n){var i,o,s;if(n&&n.cols&&n.rows&&parseInt(n.cols,10)>0&&parseInt(n.rows,10)>0){for(s=n.tableStyle?'<table style="'+n.tableStyle+'">':"<table>",s+="<tbody>",o=0;o<n.rows;o++){for(s+="<tr>",i=0;i<n.cols;i++)s+="<td>&nbsp;</td>";s+="</tr>"}s+="</tbody></table>",e.commands.exec("insertHTML",s)}},state:function(){return!1}},wysihtml5.commands.mergeTableCells={exec:function(e,t){e.tableSelection&&e.tableSelection.start&&e.tableSelection.end&&(this.state(e,t)?wysihtml5.dom.table.unmergeCell(e.tableSelection.start):wysihtml5.dom.table.mergeCellsBetween(e.tableSelection.start,e.tableSelection.end))},state:function(e){if(e.tableSelection){var t=e.tableSelection.start,n=e.tableSelection.end;if(t&&n&&t==n&&(wysihtml5.dom.getAttribute(t,"colspan")&&parseInt(wysihtml5.dom.getAttribute(t,"colspan"),10)>1||wysihtml5.dom.getAttribute(t,"rowspan")&&parseInt(wysihtml5.dom.getAttribute(t,"rowspan"),10)>1))return[t]}return!1}},wysihtml5.commands.addTableCells={exec:function(e,t,n){if(e.tableSelection&&e.tableSelection.start&&e.tableSelection.end){var i=wysihtml5.dom.table.orderSelectionEnds(e.tableSelection.start,e.tableSelection.end);"before"==n||"above"==n?wysihtml5.dom.table.addCells(i.start,n):("after"==n||"below"==n)&&wysihtml5.dom.table.addCells(i.end,n),setTimeout(function(){e.tableSelection.select(i.start,i.end)},0)}},state:function(){return!1}},wysihtml5.commands.deleteTableCells={exec:function(e,t,n){if(e.tableSelection&&e.tableSelection.start&&e.tableSelection.end){var i,o=wysihtml5.dom.table.orderSelectionEnds(e.tableSelection.start,e.tableSelection.end),s=wysihtml5.dom.table.indexOf(o.start),r=e.tableSelection.table;wysihtml5.dom.table.removeCells(o.start,n),setTimeout(function(){i=wysihtml5.dom.table.findCell(r,s),i||("row"==n&&(i=wysihtml5.dom.table.findCell(r,{row:s.row-1,col:s.col})),"column"==n&&(i=wysihtml5.dom.table.findCell(r,{row:s.row,col:s.col-1}))),i&&e.tableSelection.select(i,i)},0)}},state:function(){return!1}},wysihtml5.commands.indentList={exec:function(e){var t=e.selection.getSelectionParentsByTag("LI");return!!t&&this.tryToPushLiLevel(t,e.selection)},state:function(){return!1},tryToPushLiLevel:function(e,t){var n,i,o,s,r,a=!1;return t.executeAndRestoreRangy(function(){for(var t=e.length;t--;)s=e[t],n="OL"===s.parentNode.nodeName?"OL":"UL",i=s.ownerDocument.createElement(n),o=wysihtml5.dom.domNode(s).prev({nodeTypes:[wysihtml5.ELEMENT_NODE]}),r=o?o.querySelector("ul, ol"):null,o&&(r?r.appendChild(s):(i.appendChild(s),o.appendChild(i)),a=!0)}),a}},wysihtml5.commands.outdentList={exec:function(e){var t=e.selection.getSelectionParentsByTag("LI");return!!t&&this.tryToPullLiLevel(t,e)},state:function(){return!1},tryToPullLiLevel:function(e,t){var n,i,o,s,r,a=!1,l=this;return t.selection.executeAndRestoreRangy(function(){var c,u;for(c=e.length;c--;)if(s=e[c],s.parentNode&&(n=s.parentNode,"OL"===n.tagName||"UL"===n.tagName)){if(a=!0,i=wysihtml5.dom.getParentElement(n.parentNode,{nodeName:["OL","UL"]},!1,t.element),o=wysihtml5.dom.getParentElement(n.parentNode,{nodeName:["LI"]},!1,t.element),i&&o)s.nextSibling&&(r=l.getAfterList(n,s),s.appendChild(r)),i.insertBefore(s,o.nextSibling);else{for(s.nextSibling&&(r=l.getAfterList(n,s),s.appendChild(r)),u=s.childNodes.length;u--;)n.parentNode.insertBefore(s.childNodes[u],n.nextSibling);n.parentNode.insertBefore(document.createElement("br"),n.nextSibling),s.parentNode.removeChild(s)}0===n.childNodes.length&&n.parentNode.removeChild(n)}}),a},getAfterList:function(e,t){for(var n=e.nodeName,i=document.createElement(n);t.nextSibling;)i.appendChild(t.nextSibling);return i}},function(e){var t=90,n=89,i=8,o=46,s=25,r="data-wysihtml5-selection-node",a="data-wysihtml5-selection-offset",l=('<span id="_wysihtml5-undo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",'<span id="_wysihtml5-redo" class="_wysihtml5-temp">'+e.INVISIBLE_SPACE+"</span>",e.dom);e.UndoManager=e.lang.Dispatcher.extend({constructor:function(e){this.editor=e,this.composer=e.composer,this.element=this.composer.element,this.position=0,this.historyStr=[],this.historyDom=[],this.transact(),this._observe()},_observe:function(){var e,s=this;this.composer.sandbox.getDocument(),l.observe(this.element,"keydown",function(e){if(!e.altKey&&(e.ctrlKey||e.metaKey)){var i=e.keyCode,o=i===t&&!e.shiftKey,r=i===t&&e.shiftKey||i===n;o?(s.undo(),e.preventDefault()):r&&(s.redo(),e.preventDefault())}}),l.observe(this.element,"keydown",function(t){var n=t.keyCode;n!==e&&(e=n,(n===i||n===o)&&s.transact())}),this.editor.on("newword:composer",function(){s.transact()}).on("beforecommand:composer",function(){s.transact()})},transact:function(){var t,n,i,o,l,c,u,d=this.historyStr[this.position-1],h=this.composer.getValue(!1,!1),f=this.element.offsetWidth>0&&this.element.offsetHeight>0;h!==d&&(c=this.historyStr.length=this.historyDom.length=this.position,c>s&&(this.historyStr.shift(),this.historyDom.shift(),this.position--),this.position++,f&&(t=this.composer.selection.getRange(),n=t&&t.startContainer?t.startContainer:this.element,i=t&&t.startOffset?t.startOffset:0,n.nodeType===e.ELEMENT_NODE?o=n:(o=n.parentNode,l=this.getChildNodeIndex(o,n)),o.setAttribute(a,i),void 0!==l&&o.setAttribute(r,l)),u=this.element.cloneNode(!!h),this.historyDom.push(u),this.historyStr.push(h),o&&(o.removeAttribute(a),o.removeAttribute(r)))},undo:function(){this.transact(),this.undoPossible()&&(this.set(this.historyDom[--this.position-1]),this.editor.fire("undo:composer"))},redo:function(){this.redoPossible()&&(this.set(this.historyDom[++this.position-1]),this.editor.fire("redo:composer"))},undoPossible:function(){return this.position>1},redoPossible:function(){return this.position<this.historyStr.length},set:function(e){var t,n,i,o,s,l;for(this.element.innerHTML="",t=0,n=e.childNodes,i=e.childNodes.length;i>t;t++)this.element.appendChild(n[t].cloneNode(!0));e.hasAttribute(a)?(o=e.getAttribute(a),l=e.getAttribute(r),s=this.element):(s=this.element.querySelector("["+a+"]")||this.element,o=s.getAttribute(a),l=s.getAttribute(r),s.removeAttribute(a),s.removeAttribute(r)),null!==l&&(s=this.getChildNodeByIndex(s,+l)),this.composer.selection.set(s,o)},getChildNodeIndex:function(e,t){for(var n=0,i=e.childNodes,o=i.length;o>n;n++)if(i[n]===t)return n},getChildNodeByIndex:function(e,t){return e.childNodes[t]}})}(wysihtml5),wysihtml5.views.View=Base.extend({constructor:function(e,t,n){this.parent=e,this.element=t,this.config=n,this.config.noTextarea||this._observeViewChange()},_observeViewChange:function(){var e=this;this.parent.on("beforeload",function(){e.parent.on("change_view",function(t){t===e.name?(e.parent.currentView=e,e.show(),setTimeout(function(){e.focus()},0)):e.hide()})})},focus:function(){if(this.element.ownerDocument.querySelector(":focus")!==this.element)try{this.element.focus()}catch(e){}},hide:function(){this.element.style.display="none"},show:function(){this.element.style.display=""},disable:function(){this.element.setAttribute("disabled","disabled")},enable:function(){this.element.removeAttribute("disabled")}}),function(e){var t=e.dom,n=e.browser;e.views.Composer=e.views.View.extend({name:"composer",CARET_HACK:"<br>",constructor:function(e,t,n){this.base(e,t,n),this.config.noTextarea?this.editableArea=t:this.textarea=this.parent.textarea,this.config.contentEditableMode?this._initContentEditableArea():this._initSandbox()},clear:function(){this.element.innerHTML=n.displaysCaretInEmptyContentEditableCorrectly()?"":this.CARET_HACK},getValue:function(t,n){var i=this.isEmpty()?"":e.quirks.getCorrectInnerHTML(this.element);return t!==!1&&(i=this.parent.parse(i,n!==!1)),i},setValue:function(e,t){t&&(e=this.parent.parse(e));try{this.element.innerHTML=e}catch(n){this.element.innerText=e}},cleanUp:function(){this.parent.parse(this.element)},show:function(){this.editableArea.style.display=this._displayStyle||"",this.config.noTextarea||this.textarea.element.disabled||(this.disable(),this.enable())},hide:function(){this._displayStyle=t.getStyle("display").from(this.editableArea),"none"===this._displayStyle&&(this._displayStyle=null),this.editableArea.style.display="none"},disable:function(){this.parent.fire("disable:composer"),this.element.removeAttribute("contentEditable")},enable:function(){this.parent.fire("enable:composer"),this.element.setAttribute("contentEditable","true")},focus:function(t){e.browser.doesAsyncFocus()&&this.hasPlaceholderSet()&&this.clear(),this.base();var n=this.element.lastChild;t&&n&&this.selection&&("BR"===n.nodeName?this.selection.setBefore(this.element.lastChild):this.selection.setAfter(this.element.lastChild))},getTextContent:function(){return t.getTextContent(this.element)},hasPlaceholderSet:function(){return this.getTextContent()==(this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"))&&this.placeholderSet},isEmpty:function(){var e=this.element.innerHTML.toLowerCase();return/^(\s|<br>|<\/br>|<p>|<\/p>)*$/i.test(e)||""===e||"<br>"===e||"<p></p>"===e||"<p><br></p>"===e||this.hasPlaceholderSet()},_initContentEditableArea:function(){var e=this;this.config.noTextarea?this.sandbox=new t.ContentEditableArea(function(){e._create()},{},this.editableArea):(this.sandbox=new t.ContentEditableArea(function(){e._create()}),this.editableArea=this.sandbox.getContentEditable(),t.insert(this.editableArea).after(this.textarea.element),this._createWysiwygFormField())},_initSandbox:function(){var e,n=this;this.sandbox=new t.Sandbox(function(){n._create()},{stylesheets:this.config.stylesheets}),this.editableArea=this.sandbox.getIframe(),e=this.textarea.element,t.insert(this.editableArea).after(e),this._createWysiwygFormField()},_createWysiwygFormField:function(){if(this.textarea.element.form){var e=document.createElement("input");e.type="hidden",e.name="_wysihtml5_mode",e.value=1,t.insert(e).after(this.textarea.element)}},_create:function(){var i,o,s=this;this.doc=this.sandbox.getDocument(),this.element=this.config.contentEditableMode?this.sandbox.getContentEditable():this.doc.body,this.config.noTextarea?this.cleanUp():(this.textarea=this.parent.textarea,this.element.innerHTML=this.textarea.getValue(!0,!1)),this.selection=new e.Selection(this.parent,this.element,this.config.uneditableContainerClassname),this.commands=new e.Commands(this.parent),this.config.noTextarea||t.copyAttributes(["className","spellcheck","title","lang","dir","accessKey"]).from(this.textarea.element).to(this.element),t.addClass(this.element,this.config.composerClassName),this.config.style&&!this.config.contentEditableMode&&this.style(),this.observe(),i=this.config.name,i&&(t.addClass(this.element,i),this.config.contentEditableMode||t.addClass(this.editableArea,i)),this.enable(),!this.config.noTextarea&&this.textarea.element.disabled&&this.disable(),o="string"==typeof this.config.placeholder?this.config.placeholder:this.config.noTextarea?this.editableArea.getAttribute("data-placeholder"):this.textarea.element.getAttribute("placeholder"),o&&t.simulatePlaceholder(this.parent,this,o),this.commands.exec("styleWithCSS",!1),this._initAutoLinking(),this._initObjectResizing(),this._initUndoManager(),this._initLineBreaking(),this.config.noTextarea||!this.textarea.element.hasAttribute("autofocus")&&document.querySelector(":focus")!=this.textarea.element||n.isIos()||setTimeout(function(){s.focus(!0)},100),n.clearsContentEditableCorrectly()||e.quirks.ensureProperClearing(this),this.initSync&&this.config.sync&&this.initSync(),this.config.noTextarea||this.textarea.hide(),this.parent.fire("beforeload").fire("load")},_initAutoLinking:function(){var i,o,s,r=this,a=n.canDisableAutoLinking(),l=n.doesAutoLinkingInContentEditable();a&&this.commands.exec("autoUrlDetect",!1),this.config.autoLink&&((!l||l&&a)&&(this.parent.on("newword:composer",function(){t.getTextContent(r.element).match(t.autoLink.URL_REG_EXP)&&r.selection.executeAndRestore(function(n,i){var o,s=r.element.querySelectorAll("."+r.config.uneditableContainerClassname),a=!1;for(o=s.length;o--;)e.dom.contains(s[o],i)&&(a=!0);a||t.autoLink(i.parentNode,[r.config.uneditableContainerClassname])})}),t.observe(this.element,"blur",function(){t.autoLink(r.element,[r.config.uneditableContainerClassname])})),i=this.sandbox.getDocument().getElementsByTagName("a"),o=t.autoLink.URL_REG_EXP,s=function(n){var i=e.lang.string(t.getTextContent(n)).trim();return"www."===i.substr(0,4)&&(i="http://"+i),i},t.observe(this.element,"keydown",function(e){if(i.length){var n,a=r.selection.getSelectedNode(e.target.ownerDocument),l=t.getParentElement(a,{nodeName:"A"},4);l&&(n=s(l),setTimeout(function(){var e=s(l);e!==n&&e.match(o)&&l.setAttribute("href",e)},0))}}))},_initObjectResizing:function(){if(this.commands.exec("enableObjectResizing",!0),n.supportsEvent("resizeend")){var i=["width","height"],o=i.length,s=this.element;t.observe(s,"resizeend",function(t){var n,r=t.target||t.srcElement,a=r.style,l=0;if("IMG"===r.nodeName){for(;o>l;l++)n=i[l],a[n]&&(r.setAttribute(n,parseInt(a[n],10)),a[n]="");e.quirks.redraw(s)}})}},_initUndoManager:function(){this.undoManager=new e.UndoManager(this.parent)},_initLineBreaking:function(){function i(e){var n=t.getParentElement(e,{nodeName:["P","DIV"]},2);n&&t.contains(o.element,n)&&o.selection.executeAndRestore(function(){o.config.useLineBreaks?t.replaceWithChildNodes(n):"P"!==n.nodeName&&t.renameElement(n,"p")})}var o=this,s=["LI","P","H1","H2","H3","H4","H5","H6"],r=["UL","OL","MENU"];this.config.useLineBreaks||t.observe(this.element,["focus","keydown"],function(){if(o.isEmpty()){var e=o.doc.createElement("P");o.element.innerHTML="",o.element.appendChild(e),n.displaysCaretInEmptyContentEditableCorrectly()?o.selection.selectNode(e,!0):(e.innerHTML="<br>",o.selection.setBefore(e.firstChild))}}),t.observe(this.element,"keydown",function(n){var a,l=n.keyCode;if(!n.shiftKey&&(l===e.ENTER_KEY||l===e.BACKSPACE_KEY))return a=t.getParentElement(o.selection.getSelectedNode(),{nodeName:s},4),a?void setTimeout(function(){var n,s=o.selection.getSelectedNode();if("LI"===a.nodeName){if(!s)return;n=t.getParentElement(s,{nodeName:r},2),n||i(s)}l===e.ENTER_KEY&&a.nodeName.match(/^H[1-6]$/)&&i(s)},0):void(o.config.useLineBreaks&&l===e.ENTER_KEY&&!e.browser.insertsLineBreaksOnReturn()&&(n.preventDefault(),o.commands.exec("insertLineBreak")))})}})}(wysihtml5),function(e){var t=e.dom,n=document,i=window,o=n.createElement("div"),s=["background-color","color","cursor","font-family","font-size","font-style","font-variant","font-weight","line-height","letter-spacing","text-align","text-decoration","text-indent","text-rendering","word-break","word-wrap","word-spacing"],r=["background-color","border-collapse","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width","border-right-color","border-right-style","border-right-width","border-top-color","border-top-style","border-top-width","clear","display","float","margin-bottom","margin-left","margin-right","margin-top","outline-color","outline-offset","outline-width","outline-style","padding-left","padding-right","padding-top","padding-bottom","position","top","left","right","bottom","z-index","vertical-align","text-align","-webkit-box-sizing","-moz-box-sizing","-ms-box-sizing","box-sizing","-webkit-box-shadow","-moz-box-shadow","-ms-box-shadow","box-shadow","-webkit-border-top-right-radius","-moz-border-radius-topright","border-top-right-radius","-webkit-border-bottom-right-radius","-moz-border-radius-bottomright","border-bottom-right-radius","-webkit-border-bottom-left-radius","-moz-border-radius-bottomleft","border-bottom-left-radius","-webkit-border-top-left-radius","-moz-border-radius-topleft","border-top-left-radius","width","height"],a=["html                 { height: 100%; }","body                 { height: 100%; padding: 1px 0 0 0; margin: -1px 0 0 0; }","body > p:first-child { margin-top: 0; }","._wysihtml5-temp     { display: none; }",e.browser.isGecko?"body.placeholder { color: graytext !important; }":"body.placeholder { color: #a9a9a9 !important; }","img:-moz-broken      { -moz-force-broken-image-icon: 1; height: 24px; width: 24px; }"],l=function(e){if(e.setActive)try{e.setActive()}catch(o){}else{var s=e.style,r=n.documentElement.scrollTop||n.body.scrollTop,a=n.documentElement.scrollLeft||n.body.scrollLeft,l={position:s.position,top:s.top,left:s.left,WebkitUserSelect:s.WebkitUserSelect};t.setStyles({position:"absolute",top:"-99999px",left:"-99999px",WebkitUserSelect:"none"}).on(e),e.focus(),t.setStyles(l).on(e),i.scrollTo&&i.scrollTo(a,r)}};e.views.Composer.prototype.style=function(){var i,c,u=this,d=n.querySelector(":focus"),h=this.textarea.element,f=h.hasAttribute("placeholder"),m=f&&h.getAttribute("placeholder"),p=h.style.display,g=h.disabled;return this.focusStylesHost=o.cloneNode(!1),this.blurStylesHost=o.cloneNode(!1),this.disabledStylesHost=o.cloneNode(!1),f&&h.removeAttribute("placeholder"),h===d&&h.blur(),h.disabled=!1,h.style.display=i="none",(h.getAttribute("rows")&&"auto"===t.getStyle("height").from(h)||h.getAttribute("cols")&&"auto"===t.getStyle("width").from(h))&&(h.style.display=i=p),t.copyStyles(r).from(h).to(this.editableArea).andTo(this.blurStylesHost),t.copyStyles(s).from(h).to(this.element).andTo(this.blurStylesHost),t.insertCSS(a).into(this.element.ownerDocument),h.disabled=!0,t.copyStyles(r).from(h).to(this.disabledStylesHost),t.copyStyles(s).from(h).to(this.disabledStylesHost),h.disabled=g,h.style.display=p,l(h),h.style.display=i,t.copyStyles(r).from(h).to(this.focusStylesHost),t.copyStyles(s).from(h).to(this.focusStylesHost),h.style.display=p,t.copyStyles(["display"]).from(h).to(this.editableArea),c=e.lang.array(r).without(["display"]),d?d.focus():h.blur(),f&&h.setAttribute("placeholder",m),this.parent.on("focus:composer",function(){t.copyStyles(c).from(u.focusStylesHost).to(u.editableArea),t.copyStyles(s).from(u.focusStylesHost).to(u.element)}),this.parent.on("blur:composer",function(){t.copyStyles(c).from(u.blurStylesHost).to(u.editableArea),t.copyStyles(s).from(u.blurStylesHost).to(u.element)}),this.parent.observe("disable:composer",function(){t.copyStyles(c).from(u.disabledStylesHost).to(u.editableArea),t.copyStyles(s).from(u.disabledStylesHost).to(u.element)}),this.parent.observe("enable:composer",function(){t.copyStyles(c).from(u.blurStylesHost).to(u.editableArea),t.copyStyles(s).from(u.blurStylesHost).to(u.element)}),this}}(wysihtml5),function(e){var t=e.dom,n=e.browser,i={66:"bold",73:"italic",85:"underline"},o=function(e,t,n){var i,o=e.getPreviousNode(t,!0),s=e.getSelectedNode();if(1!==s.nodeType&&s.parentNode!==n&&(s=s.parentNode),o)if(1==s.nodeType){if(i=s.firstChild,1==o.nodeType)for(;s.firstChild;)o.appendChild(s.firstChild);else for(;s.firstChild;)t.parentNode.insertBefore(s.firstChild,t);s.parentNode&&s.parentNode.removeChild(s),e.setBefore(i)}else 1==o.nodeType?o.appendChild(s):t.parentNode.insertBefore(s,t),e.setBefore(s)},s=function(e,t,n,i){var s,r,a;t.isCollapsed()?t.caretIsInTheBeginnig("LI")?(e.preventDefault(),i.commands.exec("outdentList")):t.caretIsInTheBeginnig()?e.preventDefault():(t.caretIsFirstInSelection()&&t.getPreviousNode()&&t.getPreviousNode().nodeName&&/^H\d$/gi.test(t.getPreviousNode().nodeName)&&(s=t.getPreviousNode(),e.preventDefault(),/^\s*$/.test(s.textContent||s.innerText)?s.parentNode.removeChild(s):(r=s.ownerDocument.createRange(),r.selectNodeContents(s),r.collapse(!1),t.setSelection(r))),a=t.caretIsBeforeUneditable(),a&&(e.preventDefault(),o(t,a,n))):t.containsUneditable()&&(e.preventDefault(),t.deleteContents())},r=function(e){if(e.selection.isCollapsed()){if(e.selection.caretIsInTheBeginnig("LI")&&e.commands.exec("indentList"))return}else e.selection.deleteContents();e.commands.exec("insertHTML","&emsp;")};e.views.Composer.prototype.observe=function(){var o,a,l=this,c=this.getValue(!1,!1),u=this.sandbox.getIframe?this.sandbox.getIframe():this.sandbox.getContentEditable(),d=this.element,h=n.supportsEventsInIframeCorrectly()||this.sandbox.getContentEditable?d:this.sandbox.getWindow(),f=["drop","paste","beforepaste"],m=["drop","paste","mouseup","focus","keyup"];t.observe(u,"DOMNodeRemoved",function(){clearInterval(o),l.parent.fire("destroy:composer")}),n.supportsMutationEvents()||(o=setInterval(function(){t.contains(document.documentElement,u)||(clearInterval(o),l.parent.fire("destroy:composer"))},250)),t.observe(h,m,function(){setTimeout(function(){l.parent.fire("interaction").fire("interaction:composer")},0)}),this.config.handleTables&&(!this.tableClickHandle&&this.doc.execCommand&&e.browser.supportsCommand(this.doc,"enableObjectResizing")&&e.browser.supportsCommand(this.doc,"enableInlineTableEditing")&&(this.sandbox.getIframe?this.tableClickHandle=t.observe(u,["focus","mouseup","mouseover"],function(){l.doc.execCommand("enableObjectResizing",!1,"false"),l.doc.execCommand("enableInlineTableEditing",!1,"false"),l.tableClickHandle.stop()}):setTimeout(function(){l.doc.execCommand("enableObjectResizing",!1,"false"),l.doc.execCommand("enableInlineTableEditing",!1,"false")},0)),this.tableSelection=e.quirks.tableCellsSelection(d,l.parent)),t.observe(h,"focus",function(e){l.parent.fire("focus",e).fire("focus:composer",e),setTimeout(function(){c=l.getValue(!1,!1)},0)}),t.observe(h,"blur",function(e){if(c!==l.getValue(!1,!1)){var t=e;"function"==typeof Object.create&&(t=Object.create(e,{type:{value:"change"}})),l.parent.fire("change",t).fire("change:composer",t)}l.parent.fire("blur",e).fire("blur:composer",e)}),t.observe(d,"dragenter",function(){l.parent.fire("unset_placeholder")}),t.observe(d,f,function(e){l.parent.fire(e.type,e).fire(e.type+":composer",e)}),this.config.copyedFromMarking&&t.observe(d,"copy",function(e){e.clipboardData&&(e.clipboardData.setData("text/html",l.config.copyedFromMarking+l.selection.getHtml()),e.preventDefault()),l.parent.fire(e.type,e).fire(e.type+":composer",e)}),t.observe(d,"keyup",function(t){var n=t.keyCode;(n===e.SPACE_KEY||n===e.ENTER_KEY)&&l.parent.fire("newword:composer")}),this.parent.on("paste:composer",function(){setTimeout(function(){l.parent.fire("newword:composer")},0)}),n.canSelectImagesInContentEditable()||t.observe(d,"mousedown",function(t){var n=t.target,i=d.querySelectorAll("img"),o=d.querySelectorAll("."+l.config.uneditableContainerClassname+" img"),s=e.lang.array(i).without(o);"IMG"===n.nodeName&&e.lang.array(s).contains(n)&&l.selection.selectNode(n)}),n.canSelectImagesInContentEditable()||t.observe(d,"drop",function(){setTimeout(function(){l.selection.getSelection().removeAllRanges()},0)}),n.hasHistoryIssue()&&n.supportsSelectionModify()&&t.observe(d,"keydown",function(e){if(e.metaKey||e.ctrlKey){var t=e.keyCode,n=d.ownerDocument.defaultView,i=n.getSelection();(37===t||39===t)&&(37===t&&(i.modify("extend","left","lineboundary"),e.shiftKey||i.collapseToStart()),39===t&&(i.modify("extend","right","lineboundary"),e.shiftKey||i.collapseToEnd()),e.preventDefault())}}),t.observe(d,"keydown",function(e){var t=e.keyCode,n=i[t];(e.ctrlKey||e.metaKey)&&!e.altKey&&n&&(l.commands.exec(n),e.preventDefault()),8===t?s(e,l.selection,d,l):l.config.handleTabKey&&9===t&&(e.preventDefault(),r(l,d))}),t.observe(d,"keydown",function(t){var n,i=l.selection.getSelectedNode(!0),o=t.keyCode;!i||"IMG"!==i.nodeName||o!==e.BACKSPACE_KEY&&o!==e.DELETE_KEY||(n=i.parentNode,n.removeChild(i),"A"!==n.nodeName||n.firstChild||n.parentNode.removeChild(n),setTimeout(function(){e.quirks.redraw(d)},0),t.preventDefault())}),!this.config.contentEditableMode&&n.hasIframeFocusIssue()&&(t.observe(u,"focus",function(){setTimeout(function(){l.doc.querySelector(":focus")!==l.element&&l.focus()},0)}),t.observe(this.element,"blur",function(){setTimeout(function(){l.selection.getSelection().removeAllRanges()},0)})),a={IMG:"Image: ",A:"Link: "},t.observe(d,"mouseover",function(e){var t,n,i=e.target,o=i.nodeName;("A"===o||"IMG"===o)&&(n=i.hasAttribute("title"),n||(t=a[o]+(i.getAttribute("href")||i.getAttribute("src")),i.setAttribute("title",t)))})}}(wysihtml5),function(e){var t=400;e.views.Synchronizer=Base.extend({constructor:function(e,t,n){this.editor=e,this.textarea=t,this.composer=n,this._observe()},fromComposerToTextarea:function(t){this.textarea.setValue(e.lang.string(this.composer.getValue(!1,!1)).trim(),t)},fromTextareaToComposer:function(e){var t=this.textarea.getValue(!1,!1);t?this.composer.setValue(t,e):(this.composer.clear(),this.editor.fire("set_placeholder"))},sync:function(e){"textarea"===this.editor.currentView.name?this.fromTextareaToComposer(e):this.fromComposerToTextarea(e)},_observe:function(){var n,i=this,o=this.textarea.element.form,s=function(){n=setInterval(function(){i.fromComposerToTextarea()},t)},r=function(){clearInterval(n),n=null};s(),o&&(e.dom.observe(o,"submit",function(){i.sync(!0)}),e.dom.observe(o,"reset",function(){setTimeout(function(){i.fromTextareaToComposer()},0)})),this.editor.on("change_view",function(e){
"composer"!==e||n?"textarea"===e&&(i.fromComposerToTextarea(!0),r()):(i.fromTextareaToComposer(!0),s())}),this.editor.on("destroy:composer",r)}})}(wysihtml5),wysihtml5.views.Textarea=wysihtml5.views.View.extend({name:"textarea",constructor:function(e,t,n){this.base(e,t,n),this._observe()},clear:function(){this.element.value=""},getValue:function(e){var t=this.isEmpty()?"":this.element.value;return e!==!1&&(t=this.parent.parse(t)),t},setValue:function(e,t){t&&(e=this.parent.parse(e)),this.element.value=e},cleanUp:function(){var e=this.parent.parse(this.element.value);this.element.value=e},hasPlaceholderSet:function(){var e=wysihtml5.browser.supportsPlaceholderAttributeOn(this.element),t=this.element.getAttribute("placeholder")||null,n=this.element.value,i=!n;return e&&i||n===t},isEmpty:function(){return!wysihtml5.lang.string(this.element.value).trim()||this.hasPlaceholderSet()},_observe:function(){var e=this.element,t=this.parent,n={focusin:"focus",focusout:"blur"},i=wysihtml5.browser.supportsEvent("focusin")?["focusin","focusout","change"]:["focus","blur","change"];t.on("beforeload",function(){wysihtml5.dom.observe(e,i,function(e){var i=n[e.type]||e.type;t.fire(i).fire(i+":textarea")}),wysihtml5.dom.observe(e,["paste","drop"],function(){setTimeout(function(){t.fire("paste").fire("paste:textarea")},0)})})}}),function(e){var t,n={name:t,style:!0,toolbar:t,showToolbarAfterInit:!0,autoLink:!0,handleTables:!0,handleTabKey:!0,parserRules:{tags:{br:{},span:{},div:{},p:{}},classes:{}},pasteParserRulesets:null,parser:e.dom.parse,composerClassName:"wysihtml5-editor",bodyClassName:"wysihtml5-supported",useLineBreaks:!0,stylesheets:[],placeholderText:t,supportTouchDevices:!0,cleanUp:!0,contentEditableMode:!1,uneditableContainerClassname:"wysihtml5-uneditable-container",copyedFromMarking:'<meta name="copied-from" content="wysihtml5">'};e.Editor=e.lang.Dispatcher.extend({constructor:function(t,i){if(this.editableElement="string"==typeof t?document.getElementById(t):t,this.config=e.lang.object({}).merge(n).merge(i).get(),this._isCompatible=e.browser.supported(),"textarea"!=this.editableElement.nodeName.toLowerCase()&&(this.config.contentEditableMode=!0,this.config.noTextarea=!0),this.config.noTextarea||(this.textarea=new e.views.Textarea(this,this.editableElement,this.config),this.currentView=this.textarea),!this._isCompatible||!this.config.supportTouchDevices&&e.browser.isTouchDevice()){var o=this;return void setTimeout(function(){o.fire("beforeload").fire("load")},0)}e.dom.addClass(document.body,this.config.bodyClassName),this.composer=new e.views.Composer(this,this.editableElement,this.config),this.currentView=this.composer,"function"==typeof this.config.parser&&this._initParser(),this.on("beforeload",this.handleBeforeLoad)},handleBeforeLoad:function(){this.config.noTextarea||(this.synchronizer=new e.views.Synchronizer(this,this.textarea,this.composer)),this.config.toolbar&&(this.toolbar=new e.toolbar.Toolbar(this,this.config.toolbar,this.config.showToolbarAfterInit))},isCompatible:function(){return this._isCompatible},clear:function(){return this.currentView.clear(),this},getValue:function(e,t){return this.currentView.getValue(e,t)},setValue:function(e,t){return this.fire("unset_placeholder"),e?(this.currentView.setValue(e,t),this):this.clear()},cleanUp:function(){this.currentView.cleanUp()},focus:function(e){return this.currentView.focus(e),this},disable:function(){return this.currentView.disable(),this},enable:function(){return this.currentView.enable(),this},isEmpty:function(){return this.currentView.isEmpty()},hasPlaceholderSet:function(){return this.currentView.hasPlaceholderSet()},parse:function(t,n){var i=this.config.contentEditableMode?document:this.composer?this.composer.sandbox.getDocument():null,o=this.config.parser(t,{rules:this.config.parserRules,cleanUp:this.config.cleanUp,context:i,uneditableClass:this.config.uneditableContainerClassname,clearInternals:n});return"object"==typeof t&&e.quirks.redraw(t),o},_initParser:function(){var t,n=this;e.browser.supportsModenPaste()?this.on("paste:composer",function(i){i.preventDefault(),t=e.dom.getPastedHtml(i),t&&n._cleanAndPaste(t)}):this.on("beforepaste:composer",function(t){t.preventDefault(),e.dom.getPastedHtmlWithDiv(n.composer,function(e){e&&n._cleanAndPaste(e)})})},_cleanAndPaste:function(t){var n=e.quirks.cleanPastedHTML(t,{referenceNode:this.composer.element,rules:this.config.pasteParserRulesets||[{set:this.config.parserRules}],uneditableClass:this.config.uneditableContainerClassname});this.composer.selection.deleteContents(),this.composer.selection.insertHTML(n)}})}(wysihtml5),function(e){var t=e.dom,n="wysihtml5-command-dialog-opened",i="input, select, textarea",o="[data-wysihtml5-dialog-field]",s="data-wysihtml5-dialog-field";e.toolbar.Dialog=e.lang.Dispatcher.extend({constructor:function(e,t){this.link=e,this.container=t},_observe:function(){var o,s,r,a,l,c;if(!this._observed){for(o=this,s=function(e){var t=o._serialize();t==o.elementToChange?o.fire("edit",t):o.fire("save",t),o.hide(),e.preventDefault(),e.stopPropagation()},t.observe(o.link,"click",function(){t.hasClass(o.link,n)&&setTimeout(function(){o.hide()},0)}),t.observe(this.container,"keydown",function(t){var n=t.keyCode;n===e.ENTER_KEY&&s(t),n===e.ESCAPE_KEY&&(o.fire("cancel"),o.hide())}),t.delegate(this.container,"[data-wysihtml5-dialog-action=save]","click",s),t.delegate(this.container,"[data-wysihtml5-dialog-action=cancel]","click",function(e){o.fire("cancel"),o.hide(),e.preventDefault(),e.stopPropagation()}),r=this.container.querySelectorAll(i),a=0,l=r.length,c=function(){clearInterval(o.interval)};l>a;a++)t.observe(r[a],"change",c);this._observed=!0}},_serialize:function(){for(var e=this.elementToChange||{},t=this.container.querySelectorAll(o),n=t.length,i=0;n>i;i++)e[t[i].getAttribute(s)]=t[i].value;return e},_interpolate:function(e){for(var t,n,i,r=document.querySelector(":focus"),a=this.container.querySelectorAll(o),l=a.length,c=0;l>c;c++)t=a[c],t!==r&&(e&&"hidden"===t.type||(n=t.getAttribute(s),i=this.elementToChange&&"boolean"!=typeof this.elementToChange?this.elementToChange.getAttribute(n)||"":t.defaultValue,t.value=i))},show:function(e){if(!t.hasClass(this.link,n)){var o=this,s=this.container.querySelector(i);if(this.elementToChange=e,this._observe(),this._interpolate(),e&&(this.interval=setInterval(function(){o._interpolate(!0)},500)),t.addClass(this.link,n),this.container.style.display="",this.fire("show"),s&&!e)try{s.focus()}catch(r){}}},hide:function(){clearInterval(this.interval),this.elementToChange=null,t.removeClass(this.link,n),this.container.style.display="none",this.fire("hide")}})}(wysihtml5),function(e){var t=e.dom,n={position:"relative"},i={left:0,margin:0,opacity:0,overflow:"hidden",padding:0,position:"absolute",top:0,zIndex:1},o={cursor:"inherit",fontSize:"50px",height:"50px",marginTop:"-25px",outline:0,padding:0,position:"absolute",right:"-4px",top:"50%"},s={"x-webkit-speech":"",speech:""};e.toolbar.Speech=function(r,a){var l,c,u,d=document.createElement("input");return e.browser.supportsSpeechApiOn(d)?(l=r.editor.textarea.element.getAttribute("lang"),l&&(s.lang=l),c=document.createElement("div"),e.lang.object(i).merge({width:a.offsetWidth+"px",height:a.offsetHeight+"px"}),t.insert(d).into(c),t.insert(c).into(a),t.setStyles(o).on(d),t.setAttributes(s).on(d),t.setStyles(i).on(c),t.setStyles(n).on(a),u="onwebkitspeechchange"in d?"webkitspeechchange":"speechchange",t.observe(d,u,function(){r.execCommand("insertText",d.value),d.value=""}),void t.observe(d,"click",function(e){t.hasClass(a,"wysihtml5-command-disabled")&&e.preventDefault(),e.stopPropagation()})):void(a.style.display="none")}}(wysihtml5),function(e){var t="wysihtml5-command-disabled",n="wysihtml5-commands-disabled",i="wysihtml5-command-active",o="wysihtml5-action-active",s=e.dom;e.toolbar.Toolbar=Base.extend({constructor:function(s,r,a){this.editor=s,this.container="string"==typeof r?document.getElementById(r):r,this.composer=s.composer,this._getLinks("command"),this._getLinks("action"),this._observe(),a&&this.show(),null!=s.config.classNameCommandDisabled&&(t=s.config.classNameCommandDisabled),null!=s.config.classNameCommandsDisabled&&(n=s.config.classNameCommandsDisabled),null!=s.config.classNameCommandActive&&(i=s.config.classNameCommandActive),null!=s.config.classNameActionActive&&(o=s.config.classNameActionActive);for(var l=this.container.querySelectorAll("[data-wysihtml5-command=insertSpeech]"),c=l.length,u=0;c>u;u++)new e.toolbar.Speech(this,l[u])},_getLinks:function(t){for(var n,i,o,s,r,a=this[t+"Links"]=e.lang.array(this.container.querySelectorAll("[data-wysihtml5-"+t+"]")).get(),l=a.length,c=0,u=this[t+"Mapping"]={};l>c;c++)n=a[c],o=n.getAttribute("data-wysihtml5-"+t),s=n.getAttribute("data-wysihtml5-"+t+"-value"),i=this.container.querySelector("[data-wysihtml5-"+t+"-group='"+o+"']"),r=this._getDialog(n,o),u[o+":"+s]={link:n,group:i,name:o,value:s,dialog:r,state:!1}},_getDialog:function(t,n){var i,o,s=this,r=this.container.querySelector("[data-wysihtml5-dialog='"+n+"']");return r&&(i=e.toolbar["Dialog_"+n]?new e.toolbar["Dialog_"+n](t,r):new e.toolbar.Dialog(t,r),i.on("show",function(){o=s.composer.selection.getBookmark(),s.editor.fire("show:dialog",{command:n,dialogContainer:r,commandLink:t})}),i.on("save",function(e){o&&s.composer.selection.setBookmark(o),s._execCommand(n,e),s.editor.fire("save:dialog",{command:n,dialogContainer:r,commandLink:t})}),i.on("cancel",function(){s.editor.focus(!1),s.editor.fire("cancel:dialog",{command:n,dialogContainer:r,commandLink:t})})),i},execCommand:function(e,t){if(!this.commandsDisabled){var n=this.commandMapping[e+":"+t];n&&n.dialog&&!n.state?n.dialog.show():this._execCommand(e,t)}},_execCommand:function(e,t){this.editor.focus(!1),this.composer.commands.exec(e,t),this._updateLinkStates()},execAction:function(e){var t=this.editor;"change_view"===e&&t.textarea&&(t.currentView===t.textarea?t.fire("change_view","composer"):t.fire("change_view","textarea")),"showSource"==e&&t.fire("showSource")},_observe:function(){for(var e=this,t=this.editor,i=this.container,o=this.commandLinks.concat(this.actionLinks),r=o.length,a=0;r>a;a++)"A"===o[a].nodeName?s.setAttributes({href:"javascript:;",unselectable:"on"}).on(o[a]):s.setAttributes({unselectable:"on"}).on(o[a]);s.delegate(i,"[data-wysihtml5-command], [data-wysihtml5-action]","mousedown",function(e){e.preventDefault()}),s.delegate(i,"[data-wysihtml5-command]","click",function(t){var n=this,i=n.getAttribute("data-wysihtml5-command"),o=n.getAttribute("data-wysihtml5-command-value");e.execCommand(i,o),t.preventDefault()}),s.delegate(i,"[data-wysihtml5-action]","click",function(t){var n=this.getAttribute("data-wysihtml5-action");e.execAction(n),t.preventDefault()}),t.on("interaction:composer",function(){e._updateLinkStates()}),t.on("focus:composer",function(){e.bookmark=null}),this.editor.config.handleTables&&(t.on("tableselect:composer",function(){e.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display=""}),t.on("tableunselect:composer",function(){e.container.querySelectorAll('[data-wysihtml5-hiddentools="table"]')[0].style.display="none"})),t.on("change_view",function(o){t.textarea&&setTimeout(function(){e.commandsDisabled="composer"!==o,e._updateLinkStates(),e.commandsDisabled?s.addClass(i,n):s.removeClass(i,n)},0)})},_updateLinkStates:function(){var n,r,a,l,c=this.commandMapping,u=this.actionMapping;for(n in c)l=c[n],this.commandsDisabled?(r=!1,s.removeClass(l.link,i),l.group&&s.removeClass(l.group,i),l.dialog&&l.dialog.hide()):(r=this.composer.commands.state(l.name,l.value),s.removeClass(l.link,t),l.group&&s.removeClass(l.group,t)),l.state!==r&&(l.state=r,r?(s.addClass(l.link,i),l.group&&s.addClass(l.group,i),l.dialog&&("object"==typeof r||e.lang.object(r).isArray()?(!l.dialog.multiselect&&e.lang.object(r).isArray()&&(r=1!==r.length||r[0],l.state=r),l.dialog.show(r)):l.dialog.hide())):(s.removeClass(l.link,i),l.group&&s.removeClass(l.group,i),l.dialog&&l.dialog.hide()));for(n in u)a=u[n],"change_view"===a.name&&(a.state=this.editor.currentView===this.editor.textarea,a.state?s.addClass(a.link,o):s.removeClass(a.link,o))},show:function(){this.container.style.display=""},hide:function(){this.container.style.display="none"}})}(wysihtml5),function(e){e.toolbar.Dialog_createTable=e.toolbar.Dialog.extend({show:function(e){this.base(e)}})}(wysihtml5),function(e){var t=(e.dom,"[data-wysihtml5-dialog-field]"),n="data-wysihtml5-dialog-field";e.toolbar.Dialog_foreColorStyle=e.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){for(var e={},i=this.container.querySelectorAll(t),o=i.length,s=0;o>s;s++)e[i[s].getAttribute(n)]=i[s].value;return e},_interpolate:function(i){for(var o,s=document.querySelector(":focus"),r=this.container.querySelectorAll(t),a=r.length,l=0,c=this.elementToChange?e.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,u=c?c.getAttribute("style"):null,d=u?e.quirks.styleParser.parseColor(u,"color"):null;a>l;l++)o=r[l],o!==s&&(i&&"hidden"===o.type||"color"===o.getAttribute(n)&&(o.value=d?d[3]&&1!=d[3]?"rgba("+d[0]+","+d[1]+","+d[2]+","+d[3]+");":"rgb("+d[0]+","+d[1]+","+d[2]+");":"rgb(0,0,0);"))}})}(wysihtml5),function(e){e.dom,e.toolbar.Dialog_fontSizeStyle=e.toolbar.Dialog.extend({multiselect:!0,_serialize:function(){return{size:this.container.querySelector('[data-wysihtml5-dialog-field="size"]').value}},_interpolate:function(){var t=document.querySelector(":focus"),n=this.container.querySelector("[data-wysihtml5-dialog-field='size']"),i=this.elementToChange?e.lang.object(this.elementToChange).isArray()?this.elementToChange[0]:this.elementToChange:null,o=i?i.getAttribute("style"):null,s=o?e.quirks.styleParser.parseFontSize(o):null;n&&n!==t&&s&&!/^\s*$/.test(s)&&(n.value=s)}})}(wysihtml5),Handlebars=function(){var e=function(){"use strict";function e(e){this.string=e}var t;return e.prototype.toString=function(){return""+this.string},t=e}(),t=function(e){"use strict";function t(e){return u[e]||"&amp;"}function n(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}function i(e){return e instanceof c?""+e:e||0===e?(e=""+e,h.test(e)?e.replace(d,t):e):""}function o(e){return!e&&0!==e||!(!a(e)||0!==e.length)}var s,r,a,l={},c=e,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},d=/[&<>"'`]/g,h=/[&<>"'`]/;return l.extend=n,s=Object.prototype.toString,l.toString=s,r=function(e){return"function"==typeof e},r(/x/)&&(r=function(e){return"function"==typeof e&&"[object Function]"===s.call(e)}),l.isFunction=r,a=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===s.call(e)},l.isArray=a,l.escapeExpression=i,l.isEmpty=o,l}(e),n=function(){"use strict";function e(e,t){var i,o,s;for(t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn),o=Error.prototype.constructor.call(this,e),s=0;s<n.length;s++)this[n[s]]=o[n[s]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var t,n=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=Error(),t=e}(),i=function(e,t){"use strict";function n(e,t){this.helpers=e||{},this.partials=t||{},i(this)}function i(e){e.registerHelper("helperMissing",function(e){if(2!==arguments.length)throw new p("Missing helper: '"+e+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse||function(){},o=n.fn;return l(t)&&(t=t.call(this)),t===!0?o(this):t===!1||null==t?i(this):a(t)?t.length>0?e.helpers.each(t,n):i(this):o(t)}),e.registerHelper("each",function(e,t){var n,i,o,s=t.fn,r=t.inverse,c=0,u="";if(l(e)&&(e=e.call(this)),t.data&&(n=h(t.data)),e&&"object"==typeof e)if(a(e))for(i=e.length;i>c;c++)n&&(n.index=c,n.first=0===c,n.last=c===e.length-1),u+=s(e[c],{data:n});else for(o in e)e.hasOwnProperty(o)&&(n&&(n.key=o,n.index=c,n.first=0===c),u+=s(e[o],{data:n}),c++);return 0===c&&(u=r(this)),u}),e.registerHelper("if",function(e,t){return l(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||m.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers["if"].call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){return l(e)&&(e=e.call(this)),m.isEmpty(e)?void 0:t.fn(e)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)})}function o(e,t){d.log(e,t)}var s,r,a,l,c,u,d,h,f={},m=e,p=t,g="1.3.0";return f.VERSION=g,s=4,f.COMPILER_REVISION=s,r={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"},f.REVISION_CHANGES=r,a=m.isArray,l=m.isFunction,c=m.toString,u="[object Object]",f.HandlebarsEnvironment=n,n.prototype={constructor:n,logger:d,log:o,registerHelper:function(e,t,n){if(c.call(e)===u){if(n||t)throw new p("Arg not supported with multiple helpers");m.extend(this.helpers,e)}else n&&(t.not=n),this.helpers[e]=t},registerPartial:function(e,t){c.call(e)===u?m.extend(this.partials,e):this.partials[e]=t}},d={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(d.level<=e){var n=d.methodMap[e];"undefined"!=typeof console&&console[n]&&void 0}}},f.logger=d,f.log=o,h=function(e){var t={};return m.extend(t,e),t},f.createFrame=h,f}(t,n),o=function(e,t,n){"use strict";function i(e){var t,n,i=e&&e[0]||1,o=h;if(i!==o){if(o>i)throw t=f[o],n=f[i],new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+t+") or downgrade your runtime to an older version ("+n+").");throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){if(!t)throw new d("No environment passed to template");var n=function(e,n,i,o,s,r){var a,l=t.VM.invokePartial.apply(this,arguments);if(null!=l)return l;if(t.compile)return a={helpers:o,partials:s,data:r},s[n]=t.compile(e,{data:void 0!==r},t),s[n](i,a);throw new d("The partial "+n+" could not be compiled when running in runtime-only mode")},i={escapeExpression:u.escapeExpression,invokePartial:n,programs:[],program:function(e,t,n){var i=this.programs[e];return n?i=r(e,t,n):i||(i=this.programs[e]=r(e,t)),i},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n={},u.extend(n,t),u.extend(n,e)),n},programWithDepth:t.VM.programWithDepth,noop:t.VM.noop,compilerInfo:null};return function(n,o){var s,r,a,l;return o=o||{},a=o.partial?o:t,o.partial||(s=o.helpers,r=o.partials),l=e.call(i,a,n,s,r,o.data),o.partial||t.VM.checkRevision(i.compilerInfo),l}}function s(e,t,n){var i=Array.prototype.slice.call(arguments,3),o=function(e,o){return o=o||{},t.apply(this,[e,o.data||n].concat(i))};return o.program=e,o.depth=i.length,o}function r(e,t,n){var i=function(e,i){return i=i||{},t(e,i.data||n)};return i.program=e,i.depth=0,i}function a(e,t,n,i,o,s){var r={partial:!0,helpers:i,partials:o,data:s};if(void 0===e)throw new d("The partial "+t+" could not be found");return e instanceof Function?e(n,r):void 0}function l(){return""}var c={},u=e,d=t,h=n.COMPILER_REVISION,f=n.REVISION_CHANGES;return c.checkRevision=i,c.template=o,c.programWithDepth=s,c.program=r,c.invokePartial=a,c.noop=l,c}(t,n,i),s=function(e,t,n,i,o){"use strict";var s,r=e,a=t,l=n,c=i,u=o,d=function(){var e=new r.HandlebarsEnvironment;return c.extend(e,r),e.SafeString=a,e.Exception=l,e.Utils=c,e.VM=u,e.template=function(t){return u.template(t,e)},e},h=d();return h.create=d,s=h}(i,e,n,t,o);return s}(),this.wysihtml5=this.wysihtml5||{},this.wysihtml5.tpl=this.wysihtml5.tpl||{},this.wysihtml5.tpl.blockquote=Handlebars.template(function(e,t,n,i,o){function s(e){var t,n="";return n+="btn-"+d((t=e&&e.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===u?t.apply(e):t))}function r(){return' \n      <span class="fa fa-quote-left"></span>\n    '}function a(){return'\n      <span class="glyphicon glyphicon-quote"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=o||{};var l,c="",u="function",d=this.escapeExpression,h=this;return c+='<li>\n  <a class="btn ',l=n["if"].call(t,(l=t&&t.options,l=null==l||l===!1?l:l.toolbar,null==l||l===!1?l:l.size),{hash:{},inverse:h.noop,fn:h.program(1,s,o),data:o}),(l||0===l)&&(c+=l),c+=' btn-default" data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="blockquote" data-wysihtml5-display-format-name="false" tabindex="-1">\n    ',l=n["if"].call(t,(l=t&&t.options,l=null==l||l===!1?l:l.toolbar,null==l||l===!1?l:l.fa),{hash:{},inverse:h.program(5,a,o),fn:h.program(3,r,o),data:o}),(l||0===l)&&(c+=l),c+="\n  </a>\n</li>\n"}),this.wysihtml5.tpl.color=Handlebars.template(function(e,t,n,i,o){function s(e){var t,n="";return n+="btn-"+c((t=e&&e.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===l?t.apply(e):t))}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=o||{};var r,a="",l="function",c=this.escapeExpression,u=this;return a+='<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ',r=n["if"].call(t,(r=t&&t.options,r=null==r||r===!1?r:r.toolbar,null==r||r===!1?r:r.size),{hash:{},inverse:u.noop,fn:u.program(1,s,o),data:o}),(r||0===r)&&(a+=r),a+='" data-toggle="dropdown" tabindex="-1">\n    <span class="current-color">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.black,typeof r===l?r.apply(t):r))+'</span>\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="black"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="black">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.black,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="silver"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="silver">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.silver,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="gray"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="gray">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.gray,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="maroon"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="maroon">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.maroon,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="red"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="red">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.red,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="purple"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="purple">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.purple,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="green"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="green">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.green,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="olive"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="olive">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.olive,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="navy"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="navy">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.navy,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="blue"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="blue">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.blue,typeof r===l?r.apply(t):r))+'</a></li>\n    <li><div class="wysihtml5-colors" data-wysihtml5-command-value="orange"></div><a class="wysihtml5-colors-title" data-wysihtml5-command="foreColor" data-wysihtml5-command-value="orange">'+c((r=t&&t.locale,r=null==r||r===!1?r:r.colours,r=null==r||r===!1?r:r.orange,typeof r===l?r.apply(t):r))+"</a></li>\n  </ul>\n</li>\n"}),this.wysihtml5.tpl.emphasis=Handlebars.template(function(e,t,n,i,o){function s(e){var t,n="";return n+="btn-"+u((t=e&&e.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===c?t.apply(e):t))}function r(e,t){var i,o="";return o+='\n    <a class="btn ',i=n["if"].call(e,(i=e&&e.options,i=null==i||i===!1?i:i.toolbar,null==i||i===!1?i:i.size),{hash:{},inverse:d.noop,fn:d.program(1,s,t),data:t}),(i||0===i)&&(o+=i),o+=' btn-default" data-wysihtml5-command="small" title="CTRL+S" tabindex="-1">'+u((i=e&&e.locale,i=null==i||i===!1?i:i.emphasis,i=null==i||i===!1?i:i.small,typeof i===c?i.apply(e):i))+"</a>\n    "}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=o||{};var a,l="",c="function",u=this.escapeExpression,d=this;return l+='<li>\n  <div class="btn-group">\n    <a class="btn ',a=n["if"].call(t,(a=t&&t.options,a=null==a||a===!1?a:a.toolbar,null==a||a===!1?a:a.size),{hash:{},inverse:d.noop,fn:d.program(1,s,o),data:o}),(a||0===a)&&(l+=a),l+=' btn-default" data-wysihtml5-command="bold" title="CTRL+B" tabindex="-1">'+u((a=t&&t.locale,a=null==a||a===!1?a:a.emphasis,a=null==a||a===!1?a:a.bold,typeof a===c?a.apply(t):a))+'</a>\n    <a class="btn ',a=n["if"].call(t,(a=t&&t.options,a=null==a||a===!1?a:a.toolbar,null==a||a===!1?a:a.size),{hash:{},inverse:d.noop,fn:d.program(1,s,o),data:o}),(a||0===a)&&(l+=a),l+=' btn-default" data-wysihtml5-command="italic" title="CTRL+I" tabindex="-1">'+u((a=t&&t.locale,a=null==a||a===!1?a:a.emphasis,a=null==a||a===!1?a:a.italic,typeof a===c?a.apply(t):a))+'</a>\n    <a class="btn ',a=n["if"].call(t,(a=t&&t.options,a=null==a||a===!1?a:a.toolbar,null==a||a===!1?a:a.size),{hash:{},inverse:d.noop,fn:d.program(1,s,o),data:o}),(a||0===a)&&(l+=a),l+=' btn-default" data-wysihtml5-command="underline" title="CTRL+U" tabindex="-1">'+u((a=t&&t.locale,a=null==a||a===!1?a:a.emphasis,a=null==a||a===!1?a:a.underline,typeof a===c?a.apply(t):a))+"</a>\n    ",a=n["if"].call(t,(a=t&&t.options,a=null==a||a===!1?a:a.toolbar,a=null==a||a===!1?a:a.emphasis,null==a||a===!1?a:a.small),{hash:{},inverse:d.noop,fn:d.program(3,r,o),data:o}),(a||0===a)&&(l+=a),l+="\n  </div>\n</li>\n"}),this.wysihtml5.tpl["font-styles"]=Handlebars.template(function(e,t,n,i,o){function s(e){var t,n="";return n+="btn-"+d((t=e&&e.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===u?t.apply(e):t))}function r(){return'\n      <span class="fa fa-font"></span>\n    '}function a(){return'\n      <span class="glyphicon glyphicon-font"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=o||{};var l,c="",u="function",d=this.escapeExpression,h=this;return c+='<li class="dropdown">\n  <a class="btn btn-default dropdown-toggle ',l=n["if"].call(t,(l=t&&t.options,l=null==l||l===!1?l:l.toolbar,null==l||l===!1?l:l.size),{hash:{},inverse:h.noop,fn:h.program(1,s,o),data:o}),(l||0===l)&&(c+=l),c+='" data-toggle="dropdown">\n    ',l=n["if"].call(t,(l=t&&t.options,l=null==l||l===!1?l:l.toolbar,null==l||l===!1?l:l.fa),{hash:{},inverse:h.program(5,a,o),fn:h.program(3,r,o),data:o}),(l||0===l)&&(c+=l),c+='\n    <span class="current-font">'+d((l=t&&t.locale,l=null==l||l===!1?l:l.font_styles,l=null==l||l===!1?l:l.normal,typeof l===u?l.apply(t):l))+'</span>\n    <b class="caret"></b>\n  </a>\n  <ul class="dropdown-menu">\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="p" tabindex="-1">'+d((l=t&&t.locale,l=null==l||l===!1?l:l.font_styles,l=null==l||l===!1?l:l.normal,typeof l===u?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h1" tabindex="-1">'+d((l=t&&t.locale,l=null==l||l===!1?l:l.font_styles,l=null==l||l===!1?l:l.h1,typeof l===u?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h2" tabindex="-1">'+d((l=t&&t.locale,l=null==l||l===!1?l:l.font_styles,l=null==l||l===!1?l:l.h2,typeof l===u?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h3" tabindex="-1">'+d((l=t&&t.locale,l=null==l||l===!1?l:l.font_styles,l=null==l||l===!1?l:l.h3,typeof l===u?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h4" tabindex="-1">'+d((l=t&&t.locale,l=null==l||l===!1?l:l.font_styles,l=null==l||l===!1?l:l.h4,typeof l===u?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h5" tabindex="-1">'+d((l=t&&t.locale,l=null==l||l===!1?l:l.font_styles,l=null==l||l===!1?l:l.h5,typeof l===u?l.apply(t):l))+'</a></li>\n    <li><a data-wysihtml5-command="formatBlock" data-wysihtml5-command-value="h6" tabindex="-1">'+d((l=t&&t.locale,l=null==l||l===!1?l:l.font_styles,l=null==l||l===!1?l:l.h6,typeof l===u?l.apply(t):l))+"</a></li>\n  </ul>\n</li>\n"}),this.wysihtml5.tpl.html=Handlebars.template(function(e,t,n,i,o){function s(e){var t,n="";return n+="btn-"+d((t=e&&e.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===u?t.apply(e):t))}function r(){return'\n        <span class="fa fa-pencil"></span>\n      '}function a(){return'\n        <span class="glyphicon glyphicon-pencil"></span>\n      '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=o||{};var l,c="",u="function",d=this.escapeExpression,h=this;return c+='<li>\n  <div class="btn-group">\n    <a class="btn ',l=n["if"].call(t,(l=t&&t.options,l=null==l||l===!1?l:l.toolbar,null==l||l===!1?l:l.size),{hash:{},inverse:h.noop,fn:h.program(1,s,o),data:o}),(l||0===l)&&(c+=l),c+=' btn-default" data-wysihtml5-action="change_view" title="'+d((l=t&&t.locale,l=null==l||l===!1?l:l.html,l=null==l||l===!1?l:l.edit,typeof l===u?l.apply(t):l))+'" tabindex="-1">\n      ',l=n["if"].call(t,(l=t&&t.options,l=null==l||l===!1?l:l.toolbar,null==l||l===!1?l:l.fa),{hash:{},inverse:h.program(5,a,o),fn:h.program(3,r,o),data:o}),(l||0===l)&&(c+=l),c+="\n    </a>\n  </div>\n</li>\n"}),this.wysihtml5.tpl.image=Handlebars.template(function(e,t,n,i,o){function s(){return"modal-sm"}function r(e){var t,n="";return n+="btn-"+h((t=e&&e.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===d?t.apply(e):t))}function a(){return'\n      <span class="fa fa-file-image-o"></span>\n    '}function l(){return'\n      <span class="glyphicon glyphicon-picture"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=o||{};var c,u="",d="function",h=this.escapeExpression,f=this;return u+='<li>\n  <div class="bootstrap-wysihtml5-insert-image-modal modal fade" data-wysihtml5-dialog="insertImage">\n    <div class="modal-dialog ',c=n["if"].call(t,(c=t&&t.options,c=null==c||c===!1?c:c.toolbar,null==c||c===!1?c:c.smallmodals),{hash:{},inverse:f.noop,fn:f.program(1,s,o),data:o}),(c||0===c)&&(u+=c),u+='">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;</a>\n          <h3>'+h((c=t&&t.locale,c=null==c||c===!1?c:c.image,c=null==c||c===!1?c:c.insert,typeof c===d?c.apply(t):c))+'</h3>\n        </div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-image-url form-control" data-wysihtml5-dialog-field="src">\n          </div> \n        </div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">'+h((c=t&&t.locale,
c=null==c||c===!1?c:c.image,c=null==c||c===!1?c:c.cancel,typeof c===d?c.apply(t):c))+'</a>\n          <a class="btn btn-primary" data-dismiss="modal"  data-wysihtml5-dialog-action="save" href="#">'+h((c=t&&t.locale,c=null==c||c===!1?c:c.image,c=null==c||c===!1?c:c.insert,typeof c===d?c.apply(t):c))+'</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <a class="btn ',c=n["if"].call(t,(c=t&&t.options,c=null==c||c===!1?c:c.toolbar,null==c||c===!1?c:c.size),{hash:{},inverse:f.noop,fn:f.program(3,r,o),data:o}),(c||0===c)&&(u+=c),u+=' btn-default" data-wysihtml5-command="insertImage" title="'+h((c=t&&t.locale,c=null==c||c===!1?c:c.image,c=null==c||c===!1?c:c.insert,typeof c===d?c.apply(t):c))+'" tabindex="-1">\n    ',c=n["if"].call(t,(c=t&&t.options,c=null==c||c===!1?c:c.toolbar,null==c||c===!1?c:c.fa),{hash:{},inverse:f.program(7,l,o),fn:f.program(5,a,o),data:o}),(c||0===c)&&(u+=c),u+="\n  </a>\n</li>\n"}),this.wysihtml5.tpl.link=Handlebars.template(function(e,t,n,i,o){function s(){return"modal-sm"}function r(e){var t,n="";return n+="btn-"+h((t=e&&e.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===d?t.apply(e):t))}function a(){return'\n      <span class="fa fa-share-square-o"></span>\n    '}function l(){return'\n      <span class="glyphicon glyphicon-share"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=o||{};var c,u="",d="function",h=this.escapeExpression,f=this;return u+='<li>\n  <div class="bootstrap-wysihtml5-insert-link-modal modal fade" data-wysihtml5-dialog="createLink">\n    <div class="modal-dialog ',c=n["if"].call(t,(c=t&&t.options,c=null==c||c===!1?c:c.toolbar,null==c||c===!1?c:c.smallmodals),{hash:{},inverse:f.noop,fn:f.program(1,s,o),data:o}),(c||0===c)&&(u+=c),u+='">\n      <div class="modal-content">\n        <div class="modal-header">\n          <a class="close" data-dismiss="modal">&times;</a>\n          <h3>'+h((c=t&&t.locale,c=null==c||c===!1?c:c.link,c=null==c||c===!1?c:c.insert,typeof c===d?c.apply(t):c))+'</h3>\n        </div>\n        <div class="modal-body">\n          <div class="form-group">\n            <input value="http://" class="bootstrap-wysihtml5-insert-link-url form-control" data-wysihtml5-dialog-field="href">\n          </div> \n          <div class="checkbox">\n            <label> \n              <input type="checkbox" class="bootstrap-wysihtml5-insert-link-target" checked>'+h((c=t&&t.locale,c=null==c||c===!1?c:c.link,c=null==c||c===!1?c:c.target,typeof c===d?c.apply(t):c))+'\n            </label>\n          </div>\n        </div>\n        <div class="modal-footer">\n          <a class="btn btn-default" data-dismiss="modal" data-wysihtml5-dialog-action="cancel" href="#">'+h((c=t&&t.locale,c=null==c||c===!1?c:c.link,c=null==c||c===!1?c:c.cancel,typeof c===d?c.apply(t):c))+'</a>\n          <a href="#" class="btn btn-primary" data-dismiss="modal" data-wysihtml5-dialog-action="save">'+h((c=t&&t.locale,c=null==c||c===!1?c:c.link,c=null==c||c===!1?c:c.insert,typeof c===d?c.apply(t):c))+'</a>\n        </div>\n      </div>\n    </div>\n  </div>\n  <a class="btn ',c=n["if"].call(t,(c=t&&t.options,c=null==c||c===!1?c:c.toolbar,null==c||c===!1?c:c.size),{hash:{},inverse:f.noop,fn:f.program(3,r,o),data:o}),(c||0===c)&&(u+=c),u+=' btn-default" data-wysihtml5-command="createLink" title="'+h((c=t&&t.locale,c=null==c||c===!1?c:c.link,c=null==c||c===!1?c:c.insert,typeof c===d?c.apply(t):c))+'" tabindex="-1">\n    ',c=n["if"].call(t,(c=t&&t.options,c=null==c||c===!1?c:c.toolbar,null==c||c===!1?c:c.fa),{hash:{},inverse:f.program(7,l,o),fn:f.program(5,a,o),data:o}),(c||0===c)&&(u+=c),u+="\n  </a>\n</li>\n"}),this.wysihtml5.tpl.lists=Handlebars.template(function(e,t,n,i,o){function s(e){var t,n="";return n+="btn-"+y((t=e&&e.options,t=null==t||t===!1?t:t.toolbar,t=null==t||t===!1?t:t.size,typeof t===g?t.apply(e):t))}function r(){return'\n      <span class="fa fa-list-ul"></span>\n    '}function a(){return'\n      <span class="glyphicon glyphicon-list"></span>\n    '}function l(){return'\n      <span class="fa fa-list-ol"></span>\n    '}function c(){return'\n      <span class="glyphicon glyphicon-th-list"></span>\n    '}function u(){return'\n      <span class="fa fa-outdent"></span>\n    '}function d(){return'\n      <span class="glyphicon glyphicon-indent-right"></span>\n    '}function h(){return'\n      <span class="fa fa-indent"></span>\n    '}function f(){return'\n      <span class="glyphicon glyphicon-indent-left"></span>\n    '}this.compilerInfo=[4,">= 1.0.0"],n=this.merge(n,e.helpers),o=o||{};var m,p="",g="function",y=this.escapeExpression,v=this;return p+='<li>\n  <div class="btn-group">\n    <a class="btn ',m=n["if"].call(t,(m=t&&t.options,m=null==m||m===!1?m:m.toolbar,null==m||m===!1?m:m.size),{hash:{},inverse:v.noop,fn:v.program(1,s,o),data:o}),(m||0===m)&&(p+=m),p+=' btn-default" data-wysihtml5-command="insertUnorderedList" title="'+y((m=t&&t.locale,m=null==m||m===!1?m:m.lists,m=null==m||m===!1?m:m.unordered,typeof m===g?m.apply(t):m))+'" tabindex="-1">\n    ',m=n["if"].call(t,(m=t&&t.options,m=null==m||m===!1?m:m.toolbar,null==m||m===!1?m:m.fa),{hash:{},inverse:v.program(5,a,o),fn:v.program(3,r,o),data:o}),(m||0===m)&&(p+=m),p+='\n    </a>\n    <a class="btn ',m=n["if"].call(t,(m=t&&t.options,m=null==m||m===!1?m:m.toolbar,null==m||m===!1?m:m.size),{hash:{},inverse:v.noop,fn:v.program(1,s,o),data:o}),(m||0===m)&&(p+=m),p+=' btn-default" data-wysihtml5-command="insertOrderedList" title="'+y((m=t&&t.locale,m=null==m||m===!1?m:m.lists,m=null==m||m===!1?m:m.ordered,typeof m===g?m.apply(t):m))+'" tabindex="-1">\n    ',m=n["if"].call(t,(m=t&&t.options,m=null==m||m===!1?m:m.toolbar,null==m||m===!1?m:m.fa),{hash:{},inverse:v.program(9,c,o),fn:v.program(7,l,o),data:o}),(m||0===m)&&(p+=m),p+='\n    </a>\n    <a class="btn ',m=n["if"].call(t,(m=t&&t.options,m=null==m||m===!1?m:m.toolbar,null==m||m===!1?m:m.size),{hash:{},inverse:v.noop,fn:v.program(1,s,o),data:o}),(m||0===m)&&(p+=m),p+=' btn-default" data-wysihtml5-command="Outdent" title="'+y((m=t&&t.locale,m=null==m||m===!1?m:m.lists,m=null==m||m===!1?m:m.outdent,typeof m===g?m.apply(t):m))+'" tabindex="-1">\n    ',m=n["if"].call(t,(m=t&&t.options,m=null==m||m===!1?m:m.toolbar,null==m||m===!1?m:m.fa),{hash:{},inverse:v.program(13,d,o),fn:v.program(11,u,o),data:o}),(m||0===m)&&(p+=m),p+='\n    </a>\n    <a class="btn ',m=n["if"].call(t,(m=t&&t.options,m=null==m||m===!1?m:m.toolbar,null==m||m===!1?m:m.size),{hash:{},inverse:v.noop,fn:v.program(1,s,o),data:o}),(m||0===m)&&(p+=m),p+=' btn-default" data-wysihtml5-command="Indent" title="'+y((m=t&&t.locale,m=null==m||m===!1?m:m.lists,m=null==m||m===!1?m:m.indent,typeof m===g?m.apply(t):m))+'" tabindex="-1">\n    ',m=n["if"].call(t,(m=t&&t.options,m=null==m||m===!1?m:m.toolbar,null==m||m===!1?m:m.fa),{hash:{},inverse:v.program(17,f,o),fn:v.program(15,h,o),data:o}),(m||0===m)&&(p+=m),p+="\n    </a>\n  </div>\n</li>\n"}),function(e){"use strict";"function"==typeof define&&define.amd?define("bootstrap.wysihtml5",["jquery","wysihtml5","bootstrap","bootstrap.wysihtml5.templates","bootstrap.wysihtml5.commands"],e):e(jQuery,wysihtml5)}(function(e,t){"use strict";var n=function(e,t){var n,i,o,s=function(e,n,i){return t.tpl[e]?t.tpl[e]({locale:n,options:i}):void 0},r=function(n,o){var s,r;this.el=n,s=e.extend(!0,{},i,o);for(r in s.customTemplates)s.customTemplates.hasOwnProperty(r)&&(t.tpl[r]=s.customTemplates[r]);this.toolbar=this.createToolbar(n,s),this.editor=this.createEditor(s)};r.prototype={constructor:r,createEditor:function(t){t=t||{},t=e.extend(!0,{},t),t.toolbar=this.toolbar[0],this.initializeEditor(this.el[0],t)},initializeEditor:function(e,n){var i,o=new t.Editor(this.el[0],n);if(o.on("beforeload",this.syncBootstrapDialogEvents),o.on("beforeload",this.loadParserRules),o.composer.editableArea.contentDocument?this.addMoreShortcuts(o,o.composer.editableArea.contentDocument.body||o.composer.editableArea.contentDocument,n.shortcuts):this.addMoreShortcuts(o,o.composer.editableArea,n.shortcuts),n&&n.events)for(i in n.events)n.events.hasOwnProperty(i)&&o.on(i,n.events[i]);return o},loadParserRules:function(){"string"===e.type(this.config.parserRules)&&e.ajax({dataType:"json",url:this.config.parserRules,context:this,error:function(e,t,n){},success:function(e){void(this.config.parserRules=e)}}),this.config.pasteParserRulesets&&"string"===e.type(this.config.pasteParserRulesets)&&e.ajax({dataType:"json",url:this.config.pasteParserRulesets,context:this,error:function(e,t,n){},success:function(e){this.config.pasteParserRulesets=e}})},syncBootstrapDialogEvents:function(){var t=this;e.map(this.toolbar.commandMapping,function(e){return[e]}).filter(function(e){return e.dialog}).map(function(e){return e.dialog}).forEach(function(n){n.on("show",function(){e(this.container).modal("show")}),n.on("hide",function(){e(this.container).modal("hide"),setTimeout(t.composer.focus,0)}),e(n.container).on("shown.bs.modal",function(){e(this).find("input, select, textarea").first().focus()})}),this.on("change_view",function(){e(this.toolbar.container.children).find("a.btn").not('[data-wysihtml5-action="change_view"]').toggleClass("disabled")})},createToolbar:function(t,n){var r,a,l=this,c=e("<ul/>",{"class":"wysihtml5-toolbar",style:"display:none"}),u=n.locale||i.locale||"en";o.hasOwnProperty(u)||(u="en"),r=e.extend(!0,{},o.en,o[u]);for(a in n.toolbar)n.toolbar[a]&&c.append(s(a,r,n));return c.find('a[data-wysihtml5-command="formatBlock"]').click(function(t){var n=t.delegateTarget||t.target||t.srcElement,i=e(n),o=i.data("wysihtml5-display-format-name"),s=i.data("wysihtml5-format-name")||i.html();(void 0===o||"true"===o)&&l.toolbar.find(".current-font").text(s)}),c.find('a[data-wysihtml5-command="foreColor"]').click(function(t){var n=t.target||t.srcElement,i=e(n);l.toolbar.find(".current-color").text(i.html())}),this.el.before(c),c},addMoreShortcuts:function(e,n,i){t.dom.observe(n,"keydown",function(n){var o,s=n.keyCode,r=i[s];(n.ctrlKey||n.metaKey||n.altKey)&&r&&t.commands[r]&&(o=e.toolbar.commandMapping[r+":null"],o&&o.dialog&&!o.state?o.dialog.show():t.commands[r].exec(e.composer,r),n.preventDefault())})}},n={resetDefaults:function(){e.fn.wysihtml5.defaultOptions=e.extend(!0,{},e.fn.wysihtml5.defaultOptionsCache)},bypassDefaults:function(t){return this.each(function(){var n=e(this);n.data("wysihtml5",new r(n,t))})},shallowExtend:function(t){var i=e.extend({},e.fn.wysihtml5.defaultOptions,t||{},e(this).data()),o=this;return n.bypassDefaults.apply(o,[i])},deepExtend:function(t){var i=e.extend(!0,{},e.fn.wysihtml5.defaultOptions,t||{}),o=this;return n.bypassDefaults.apply(o,[i])},init:function(e){var t=this;return n.shallowExtend.apply(t,[e])}},e.fn.wysihtml5=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.wysihtml5"):n.init.apply(this,arguments)},e.fn.wysihtml5.Constructor=r,i=e.fn.wysihtml5.defaultOptions={toolbar:{"font-styles":!0,color:!1,emphasis:{small:!0},blockquote:!0,lists:!0,html:!1,link:!0,image:!0,smallmodals:!1},useLineBreaks:!1,parserRules:{classes:{"wysiwyg-color-silver":1,"wysiwyg-color-gray":1,"wysiwyg-color-white":1,"wysiwyg-color-maroon":1,"wysiwyg-color-red":1,"wysiwyg-color-purple":1,"wysiwyg-color-fuchsia":1,"wysiwyg-color-green":1,"wysiwyg-color-lime":1,"wysiwyg-color-olive":1,"wysiwyg-color-yellow":1,"wysiwyg-color-navy":1,"wysiwyg-color-blue":1,"wysiwyg-color-teal":1,"wysiwyg-color-aqua":1,"wysiwyg-color-orange":1},tags:{b:{},i:{},strong:{},em:{},p:{},br:{},ol:{},ul:{},li:{},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},blockquote:{},u:1,img:{check_attributes:{width:"numbers",alt:"alt",src:"url",height:"numbers"}},a:{check_attributes:{href:"url"},set_attributes:{target:"_blank",rel:"nofollow"}},span:1,div:1,small:1,code:1,pre:1}},locale:"en",shortcuts:{83:"small",75:"createLink"}},void 0===e.fn.wysihtml5.defaultOptionsCache&&(e.fn.wysihtml5.defaultOptionsCache=e.extend(!0,{},e.fn.wysihtml5.defaultOptions)),o=e.fn.wysihtml5.locale={}};n(e,t)}),function(e){e.commands.small={exec:function(t,n){return e.commands.formatInline.exec(t,n,"small")},state:function(t,n){return e.commands.formatInline.state(t,n,"small")}}}(wysihtml5),function(e){"function"==typeof define&&define.amd?define("bootstrap.wysihtml5.en-US",["jquery","bootstrap.wysihtml5"],e):e(jQuery)}(function(e){e.fn.wysihtml5.locale.en=e.fn.wysihtml5.locale["en-US"]={font_styles:{normal:"Normal text",h1:"Heading 1",h2:"Heading 2",h3:"Heading 3",h4:"Heading 4",h5:"Heading 5",h6:"Heading 6"},emphasis:{bold:"Bold",italic:"Italic",underline:"Underline",small:"Small"},lists:{unordered:"Unordered list",ordered:"Ordered list",outdent:"Outdent",indent:"Indent"},link:{insert:"Insert link",cancel:"Cancel",target:"Open link in new window"},image:{insert:"Insert image",cancel:"Cancel"},html:{edit:"Edit HTML"},colours:{black:"Black",silver:"Silver",gray:"Grey",maroon:"Maroon",red:"Red",purple:"Purple",green:"Green",olive:"Olive",navy:"Navy",blue:"Blue",orange:"Orange"}}}),!function(e,t,n){"use strict";!function i(e,t,n){function o(r,a){if(!t[r]){if(!e[r]){var l="function"==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return o(n?n:t)},u,u.exports,i,e,t,n)}return t[r].exports}for(var s="function"==typeof require&&require,r=0;r<n.length;r++)o(n[r]);return o}({1:[function(i,o,s){var r=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(s,"__esModule",{value:!0});var a,l,c,u,d=i("./modules/handle-dom"),h=i("./modules/utils"),f=i("./modules/handle-swal-dom"),m=i("./modules/handle-click"),p=i("./modules/handle-key"),g=r(p),y=i("./modules/default-params"),v=r(y),w=i("./modules/set-params"),b=r(w);s["default"]=c=u=function(){function i(e){var t=o;return t[e]===n?v["default"][e]:t[e]}var o=arguments[0];if(d.addClass(t.body,"stop-scrolling"),f.resetInput(),o===n)return h.logStr("SweetAlert expects at least 1 attribute!"),!1;var s=h.extend({},v["default"]);switch(typeof o){case"string":s.title=o,s.text=arguments[1]||"",s.type=arguments[2]||"";break;case"object":if(o.title===n)return h.logStr('Missing "title" argument!'),!1;s.title=o.title;for(var r in v["default"])s[r]=i(r);s.confirmButtonText=s.showCancelButton?"Confirm":v["default"].confirmButtonText,s.confirmButtonText=i("confirmButtonText"),s.doneFunction=arguments[1]||null;break;default:return h.logStr('Unexpected type of argument! Expected "string" or "object", got '+typeof o),!1}b["default"](s),f.fixVerticalPosition(),f.openModal(arguments[1]);for(var c=f.getModal(),p=c.querySelectorAll("button"),y=["onclick","onmouseover","onmouseout","onmousedown","onmouseup","onfocus"],w=function(e){return m.handleButton(e,s,c)},C=0;C<p.length;C++)for(var _=0;_<y.length;_++){var x=y[_];p[C][x]=w}f.getOverlay().onclick=w,a=e.onkeydown;var S=function(e){return g["default"](e,s,c)};e.onkeydown=S,e.onfocus=function(){setTimeout(function(){l!==n&&(l.focus(),l=n)},0)},u.enableButtons()},c.setDefaults=u.setDefaults=function(e){if(!e)throw new Error("userParams is required");if("object"!=typeof e)throw new Error("userParams has to be a object");h.extend(v["default"],e)},c.close=u.close=function(){var i=f.getModal();d.fadeOut(f.getOverlay(),5),d.fadeOut(i,5),d.removeClass(i,"showSweetAlert"),d.addClass(i,"hideSweetAlert"),d.removeClass(i,"visible");var o=i.querySelector(".sa-icon.sa-success");d.removeClass(o,"animate"),d.removeClass(o.querySelector(".sa-tip"),"animateSuccessTip"),d.removeClass(o.querySelector(".sa-long"),"animateSuccessLong");var s=i.querySelector(".sa-icon.sa-error");d.removeClass(s,"animateErrorIcon"),d.removeClass(s.querySelector(".sa-x-mark"),"animateXMark");var r=i.querySelector(".sa-icon.sa-warning");return d.removeClass(r,"pulseWarning"),d.removeClass(r.querySelector(".sa-body"),"pulseWarningIns"),d.removeClass(r.querySelector(".sa-dot"),"pulseWarningIns"),setTimeout(function(){var e=i.getAttribute("data-custom-class");d.removeClass(i,e)},300),d.removeClass(t.body,"stop-scrolling"),e.onkeydown=a,e.previousActiveElement&&e.previousActiveElement.focus(),l=n,clearTimeout(i.timeout),!0},c.showInputError=u.showInputError=function(e){var t=f.getModal(),n=t.querySelector(".sa-input-error");d.addClass(n,"show");var i=t.querySelector(".sa-error-container");d.addClass(i,"show"),i.querySelector("p").innerHTML=e,setTimeout(function(){c.enableButtons()},1),t.querySelector("input").focus()},c.resetInputError=u.resetInputError=function(e){if(e&&13===e.keyCode)return!1;var t=f.getModal(),n=t.querySelector(".sa-input-error");d.removeClass(n,"show");var i=t.querySelector(".sa-error-container");d.removeClass(i,"show")},c.disableButtons=u.disableButtons=function(){var e=f.getModal(),t=e.querySelector("button.confirm"),n=e.querySelector("button.cancel");t.disabled=!0,n.disabled=!0},c.enableButtons=u.enableButtons=function(){var e=f.getModal(),t=e.querySelector("button.confirm"),n=e.querySelector("button.cancel");t.disabled=!1,n.disabled=!1},"undefined"!=typeof e?e.sweetAlert=e.swal=c:h.logStr("SweetAlert is a frontend module!"),o.exports=s["default"]},{"./modules/default-params":2,"./modules/handle-click":3,"./modules/handle-dom":4,"./modules/handle-key":5,"./modules/handle-swal-dom":6,"./modules/set-params":8,"./modules/utils":9}],2:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i={title:"",text:"",type:null,allowOutsideClick:!1,showConfirmButton:!0,showCancelButton:!1,closeOnConfirm:!0,closeOnCancel:!0,confirmButtonText:"OK",confirmButtonColor:"#8CD4F5",cancelButtonText:"Cancel",imageUrl:null,imageSize:null,timer:null,customClass:"",html:!1,animation:!0,allowEscapeKey:!0,inputType:"text",inputPlaceholder:"",inputValue:"",showLoaderOnConfirm:!1};n["default"]=i,t.exports=n["default"]},{}],3:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0});var o=t("./utils"),s=(t("./handle-swal-dom"),t("./handle-dom")),r=function(t,n,i){function r(e){m&&n.confirmButtonColor&&(f.style.backgroundColor=e)}var c,u,d,h=t||e.event,f=h.target||h.srcElement,m=-1!==f.className.indexOf("confirm"),p=-1!==f.className.indexOf("sweet-overlay"),g=s.hasClass(i,"visible"),y=n.doneFunction&&"true"===i.getAttribute("data-has-done-function");switch(m&&n.confirmButtonColor&&(c=n.confirmButtonColor,u=o.colorLuminance(c,-.04),d=o.colorLuminance(c,-.14)),h.type){case"mouseover":r(u);break;case"mouseout":r(c);break;case"mousedown":r(d);break;case"mouseup":r(u);break;case"focus":var v=i.querySelector("button.confirm"),w=i.querySelector("button.cancel");m?w.style.boxShadow="none":v.style.boxShadow="none";break;case"click":var b=i===f,C=s.isDescendant(i,f);if(!b&&!C&&g&&!n.allowOutsideClick)break;m&&y&&g?a(i,n):y&&g||p?l(i,n):s.isDescendant(i,f)&&"BUTTON"===f.tagName&&sweetAlert.close()}},a=function(e,t){var n=!0;s.hasClass(e,"show-input")&&(n=e.querySelector("input").value,n||(n="")),t.doneFunction(n),t.closeOnConfirm&&sweetAlert.close(),t.showLoaderOnConfirm&&sweetAlert.disableButtons()},l=function(e,t){var n=String(t.doneFunction).replace(/\s/g,""),i="function("===n.substring(0,9)&&")"!==n.substring(9,10);i&&t.doneFunction(!1),t.closeOnCancel&&sweetAlert.close()};i["default"]={handleButton:r,handleConfirm:a,handleCancel:l},n.exports=i["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],4:[function(n,i,o){Object.defineProperty(o,"__esModule",{value:!0});var s=function(e,t){return new RegExp(" "+t+" ").test(" "+e.className+" ")},r=function(e,t){s(e,t)||(e.className+=" "+t)},a=function(e,t){var n=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(s(e,t)){for(;n.indexOf(" "+t+" ")>=0;)n=n.replace(" "+t+" "," ");e.className=n.replace(/^\s+|\s+$/g,"")}},l=function(e){var n=t.createElement("div");return n.appendChild(t.createTextNode(e)),n.innerHTML},c=function(e){e.style.opacity="",e.style.display="block"},u=function(e){if(e&&!e.length)return c(e);for(var t=0;t<e.length;++t)c(e[t])},d=function(e){e.style.opacity="",e.style.display="none"},h=function(e){if(e&&!e.length)return d(e);for(var t=0;t<e.length;++t)d(e[t])},f=function(e,t){for(var n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1},m=function(e){e.style.left="-9999px",e.style.display="block";var t,n=e.clientHeight;return t="undefined"!=typeof getComputedStyle?parseInt(getComputedStyle(e).getPropertyValue("padding-top"),10):parseInt(e.currentStyle.padding),e.style.left="",e.style.display="none","-"+parseInt((n+t)/2)+"px"},p=function(e,t){if(+e.style.opacity<1){t=t||16,e.style.opacity=0,e.style.display="block";var n=+new Date,i=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity+(new Date-n)/100,n=+new Date,+e.style.opacity<1&&setTimeout(i,t)});i()}e.style.display="block"},g=function(e,t){t=t||16,e.style.opacity=1;var n=+new Date,i=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){e.style.opacity=+e.style.opacity-(new Date-n)/100,n=+new Date,+e.style.opacity>0?setTimeout(i,t):e.style.display="none"});i()},y=function(n){if("function"==typeof MouseEvent){var i=new MouseEvent("click",{view:e,bubbles:!1,cancelable:!0});n.dispatchEvent(i)}else if(t.createEvent){var o=t.createEvent("MouseEvents");o.initEvent("click",!1,!1),n.dispatchEvent(o)}else t.createEventObject?n.fireEvent("onclick"):"function"==typeof n.onclick&&n.onclick()},v=function(t){"function"==typeof t.stopPropagation?(t.stopPropagation(),t.preventDefault()):e.event&&e.event.hasOwnProperty("cancelBubble")&&(e.event.cancelBubble=!0)};o.hasClass=s,o.addClass=r,o.removeClass=a,o.escapeHtml=l,o._show=c,o.show=u,o._hide=d,o.hide=h,o.isDescendant=f,o.getTopMargin=m,o.fadeIn=p,o.fadeOut=g,o.fireClick=y,o.stopEventPropagation=v},{}],5:[function(t,i,o){Object.defineProperty(o,"__esModule",{value:!0});var s=t("./handle-dom"),r=t("./handle-swal-dom"),a=function(t,i,o){var a=t||e.event,l=a.keyCode||a.which,c=o.querySelector("button.confirm"),u=o.querySelector("button.cancel"),d=o.querySelectorAll("button[tabindex]");if(-1!==[9,13,32,27].indexOf(l)){for(var h=a.target||a.srcElement,f=-1,m=0;m<d.length;m++)if(h===d[m]){f=m;break}9===l?(h=-1===f?c:f===d.length-1?d[0]:d[f+1],s.stopEventPropagation(a),h.focus(),i.confirmButtonColor&&r.setFocusStyle(h,i.confirmButtonColor)):13===l?("INPUT"===h.tagName&&(h=c,c.focus()),h=-1===f?c:n):27===l&&i.allowEscapeKey===!0?(h=u,s.fireClick(h,a)):h=n}};o["default"]=a,i.exports=o["default"]},{"./handle-dom":4,"./handle-swal-dom":6}],6:[function(n,i,o){var s=function(e){return e&&e.__esModule?e:{"default":e}};Object.defineProperty(o,"__esModule",{value:!0});var r=n("./utils"),a=n("./handle-dom"),l=n("./default-params"),c=s(l),u=n("./injected-html"),d=s(u),h=".sweet-alert",f=".sweet-overlay",m=function(){var e=t.createElement("div");for(e.innerHTML=d["default"];e.firstChild;)t.body.appendChild(e.firstChild)},p=function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var e=t.querySelector(h);return e||(m(),e=p()),e}),g=function(){var e=p();return e?e.querySelector("input"):void 0},y=function(){return t.querySelector(f)},v=function(e,t){var n=r.hexToRgb(t);e.style.boxShadow="0 0 2px rgba("+n+", 0.8), inset 0 0 0 1px rgba(0, 0, 0, 0.05)"},w=function(n){var i=p();a.fadeIn(y(),10),a.show(i),a.addClass(i,"showSweetAlert"),a.removeClass(i,"hideSweetAlert"),e.previousActiveElement=t.activeElement;var o=i.querySelector("button.confirm");o.focus(),setTimeout(function(){a.addClass(i,"visible")},500);var s=i.getAttribute("data-timer");if("null"!==s&&""!==s){var r=n;i.timeout=setTimeout(function(){var e=(r||null)&&"true"===i.getAttribute("data-has-done-function");e?r(null):sweetAlert.close()},s)}},b=function(){var e=p(),t=g();a.removeClass(e,"show-input"),t.value=c["default"].inputValue,t.setAttribute("type",c["default"].inputType),t.setAttribute("placeholder",c["default"].inputPlaceholder),C()},C=function(e){if(e&&13===e.keyCode)return!1;var t=p(),n=t.querySelector(".sa-input-error");a.removeClass(n,"show");var i=t.querySelector(".sa-error-container");a.removeClass(i,"show")},_=function(){var e=p();e.style.marginTop=a.getTopMargin(p())};o.sweetAlertInitialize=m,o.getModal=p,o.getOverlay=y,o.getInput=g,o.setFocusStyle=v,o.openModal=w,o.resetInput=b,o.resetInputError=C,o.fixVerticalPosition=_},{"./default-params":2,"./handle-dom":4,"./injected-html":7,"./utils":9}],7:[function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});var i='<div class="sweet-overlay" tabIndex="-1"></div><div class="sweet-alert"><div class="sa-icon sa-error">\n      <span class="sa-x-mark">\n        <span class="sa-line sa-left"></span>\n        <span class="sa-line sa-right"></span>\n      </span>\n    </div><div class="sa-icon sa-warning">\n      <span class="sa-body"></span>\n      <span class="sa-dot"></span>\n    </div><div class="sa-icon sa-info"></div><div class="sa-icon sa-success">\n      <span class="sa-line sa-tip"></span>\n      <span class="sa-line sa-long"></span>\n\n      <div class="sa-placeholder"></div>\n      <div class="sa-fix"></div>\n    </div><div class="sa-icon sa-custom"></div><h2>Title</h2>\n    <p>Text</p>\n    <fieldset>\n      <input type="text" tabIndex="3" />\n      <div class="sa-input-error"></div>\n    </fieldset><div class="sa-error-container">\n      <div class="icon">!</div>\n      <p>Not valid!</p>\n    </div><div class="sa-button-container">\n      <button class="cancel" tabIndex="2">Cancel</button>\n      <div class="sa-confirm-button-container">\n        <button class="confirm" tabIndex="1">OK</button><div class="la-ball-fall">\n          <div></div>\n          <div></div>\n          <div></div>\n        </div>\n      </div>\n    </div></div>';n["default"]=i,t.exports=n["default"]},{}],8:[function(e,t,i){Object.defineProperty(i,"__esModule",{value:!0});var o=e("./utils"),s=e("./handle-swal-dom"),r=e("./handle-dom"),a=["error","warning","info","success","input","prompt"],l=function(e){var t=s.getModal(),i=t.querySelector("h2"),l=t.querySelector("p"),c=t.querySelector("button.cancel"),u=t.querySelector("button.confirm");if(i.innerHTML=e.html?e.title:r.escapeHtml(e.title).split("\n").join("<br>"),l.innerHTML=e.html?e.text:r.escapeHtml(e.text||"").split("\n").join("<br>"),e.text&&r.show(l),e.customClass)r.addClass(t,e.customClass),t.setAttribute("data-custom-class",e.customClass);else{var d=t.getAttribute("data-custom-class");r.removeClass(t,d),t.setAttribute("data-custom-class","")}if(r.hide(t.querySelectorAll(".sa-icon")),e.type&&!o.isIE8()){var h=function(){for(var i=!1,o=0;o<a.length;o++)if(e.type===a[o]){i=!0;break}if(!i)return logStr("Unknown alert type: "+e.type),{v:!1};var l=["success","error","warning","info"],c=n;-1!==l.indexOf(e.type)&&(c=t.querySelector(".sa-icon.sa-"+e.type),r.show(c));var u=s.getInput();switch(e.type){case"success":r.addClass(c,"animate"),r.addClass(c.querySelector(".sa-tip"),"animateSuccessTip"),r.addClass(c.querySelector(".sa-long"),"animateSuccessLong");break;case"error":r.addClass(c,"animateErrorIcon"),r.addClass(c.querySelector(".sa-x-mark"),"animateXMark");break;case"warning":r.addClass(c,"pulseWarning"),r.addClass(c.querySelector(".sa-body"),"pulseWarningIns"),r.addClass(c.querySelector(".sa-dot"),"pulseWarningIns");break;case"input":case"prompt":u.setAttribute("type",e.inputType),u.value=e.inputValue,u.setAttribute("placeholder",e.inputPlaceholder),r.addClass(t,"show-input"),setTimeout(function(){u.focus(),u.addEventListener("keyup",swal.resetInputError)},400)}}();if("object"==typeof h)return h.v}if(e.imageUrl){var f=t.querySelector(".sa-icon.sa-custom");f.style.backgroundImage="url("+e.imageUrl+")",r.show(f);var m=80,p=80;if(e.imageSize){var g=e.imageSize.toString().split("x"),y=g[0],v=g[1];y&&v?(m=y,p=v):logStr("Parameter imageSize expects value with format WIDTHxHEIGHT, got "+e.imageSize)}f.setAttribute("style",f.getAttribute("style")+"width:"+m+"px; height:"+p+"px")}t.setAttribute("data-has-cancel-button",e.showCancelButton),e.showCancelButton?c.style.display="inline-block":r.hide(c),t.setAttribute("data-has-confirm-button",e.showConfirmButton),e.showConfirmButton?u.style.display="inline-block":r.hide(u),e.cancelButtonText&&(c.innerHTML=r.escapeHtml(e.cancelButtonText)),e.confirmButtonText&&(u.innerHTML=r.escapeHtml(e.confirmButtonText)),e.confirmButtonColor&&(u.style.backgroundColor=e.confirmButtonColor,u.style.borderLeftColor=e.confirmLoadingButtonColor,u.style.borderRightColor=e.confirmLoadingButtonColor,s.setFocusStyle(u,e.confirmButtonColor)),t.setAttribute("data-allow-outside-click",e.allowOutsideClick);var w=!!e.doneFunction;t.setAttribute("data-has-done-function",w),e.animation?"string"==typeof e.animation?t.setAttribute("data-animation",e.animation):t.setAttribute("data-animation","pop"):t.setAttribute("data-animation","none"),t.setAttribute("data-timer",e.timer)};i["default"]=l,t.exports=i["default"]},{"./handle-dom":4,"./handle-swal-dom":6,"./utils":9}],9:[function(t,n,i){Object.defineProperty(i,"__esModule",{value:!0});var o=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},s=function(e){var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?parseInt(t[1],16)+", "+parseInt(t[2],16)+", "+parseInt(t[3],16):null},r=function(){return e.attachEvent&&!e.addEventListener},a=function(t){e.console&&e.console.log("SweetAlert: "+t)},l=function(e,t){e=String(e).replace(/[^0-9a-f]/gi,""),e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),t=t||0;var n,i,o="#";for(i=0;3>i;i++)n=parseInt(e.substr(2*i,2),16),n=Math.round(Math.min(Math.max(0,n+n*t),255)).toString(16),o+=("00"+n).substr(n.length);return o};i.extend=o,i.hexToRgb=s,i.isIE8=r,i.logStr=a,i.colorLuminance=l},{}]},{},[1]),"function"==typeof define&&define.amd?define(function(){return sweetAlert}):"undefined"!=typeof module&&module.exports&&(module.exports=sweetAlert)}(window,document),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";function e(){return ri.apply(null,arguments)}function t(e){ri=e}function n(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function i(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function o(e,t){var n,i=[];for(n=0;n<e.length;++n)i.push(t(e[n],n));return i}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function r(e,t){for(var n in t)s(t,n)&&(e[n]=t[n]);return s(t,"toString")&&(e.toString=t.toString),s(t,"valueOf")&&(e.valueOf=t.valueOf),e}function a(e,t,n,i){return Le(e,t,n,i,!0).utc()}function l(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null}}function c(e){return null==e._pf&&(e._pf=l()),e._pf}function u(e){if(null==e._isValid){var t=c(e),n=ai.call(t.parsedDateParts,function(e){return null!=e});e._isValid=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n),e._strict&&(e._isValid=e._isValid&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour)}return e._isValid}function d(e){var t=a(NaN);return null!=e?r(c(t),e):c(t).userInvalidated=!0,t}function h(e){return void 0===e}function f(e,t){var n,i,o;if(h(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),h(t._i)||(e._i=t._i),h(t._f)||(e._f=t._f),h(t._l)||(e._l=t._l),h(t._strict)||(e._strict=t._strict),h(t._tzm)||(e._tzm=t._tzm),h(t._isUTC)||(e._isUTC=t._isUTC),h(t._offset)||(e._offset=t._offset),h(t._pf)||(e._pf=c(t)),h(t._locale)||(e._locale=t._locale),li.length>0)for(n in li)i=li[n],o=t[i],h(o)||(e[i]=o);return e}function m(t){f(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),ci===!1&&(ci=!0,e.updateOffset(this),
ci=!1)}function p(e){return e instanceof m||null!=e&&null!=e._isAMomentObject}function g(e){return e<0?Math.ceil(e):Math.floor(e)}function y(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=g(t)),n}function v(e,t,n){var i,o=Math.min(e.length,t.length),s=Math.abs(e.length-t.length),r=0;for(i=0;i<o;i++)(n&&e[i]!==t[i]||!n&&y(e[i])!==y(t[i]))&&r++;return r+s}function w(t){e.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn}function b(t,n){var i=!0;return r(function(){return null!=e.deprecationHandler&&e.deprecationHandler(null,t),i&&(w(t+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+(new Error).stack),i=!1),n.apply(this,arguments)},n)}function C(t,n){null!=e.deprecationHandler&&e.deprecationHandler(t,n),ui[t]||(w(n),ui[t]=!0)}function _(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function x(e){return"[object Object]"===Object.prototype.toString.call(e)}function S(e){var t,n;for(n in e)t=e[n],_(t)?this[n]=t:this["_"+n]=t;this._config=e,this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function T(e,t){var n,i=r({},e);for(n in t)s(t,n)&&(x(e[n])&&x(t[n])?(i[n]={},r(i[n],e[n]),r(i[n],t[n])):null!=t[n]?i[n]=t[n]:delete i[n]);return i}function N(e){null!=e&&this.set(e)}function E(e){return e?e.toLowerCase().replace("_","-"):e}function D(e){for(var t,n,i,o,s=0;s<e.length;){for(o=E(e[s]).split("-"),t=o.length,n=E(e[s+1]),n=n?n.split("-"):null;t>0;){if(i=k(o.slice(0,t).join("-")))return i;if(n&&n.length>=t&&v(o,n,!0)>=t-1)break;t--}s++}return null}function k(e){var t=null;if(!mi[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=hi._abbr,require("./locale/"+e),R(t)}catch(n){}return mi[e]}function R(e,t){var n;return e&&(n=h(t)?O(e):M(e,t),n&&(hi=n)),hi._abbr}function M(e,t){return null!==t?(t.abbr=e,null!=mi[e]?(C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale"),t=T(mi[e]._config,t)):null!=t.parentLocale&&(null!=mi[t.parentLocale]?t=T(mi[t.parentLocale]._config,t):C("parentLocaleUndefined","specified parentLocale is not defined yet")),mi[e]=new N(t),R(e),mi[e]):(delete mi[e],null)}function A(e,t){if(null!=t){var n;null!=mi[e]&&(t=T(mi[e]._config,t)),n=new N(t),n.parentLocale=mi[e],mi[e]=n,R(e)}else null!=mi[e]&&(null!=mi[e].parentLocale?mi[e]=mi[e].parentLocale:null!=mi[e]&&delete mi[e]);return mi[e]}function O(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return hi;if(!n(e)){if(t=k(e))return t;e=[e]}return D(e)}function I(){return di(mi)}function L(e,t){var n=e.toLowerCase();pi[n]=pi[n+"s"]=pi[t]=e}function P(e){return"string"==typeof e?pi[e]||pi[e.toLowerCase()]:void 0}function B(e){var t,n,i={};for(n in e)s(e,n)&&(t=P(n),t&&(i[t]=e[n]));return i}function H(t,n){return function(i){return null!=i?(Y(this,t,i),e.updateOffset(this,n),this):U(this,t)}}function U(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Y(e,t,n){e.isValid()&&e._d["set"+(e._isUTC?"UTC":"")+t](n)}function W(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else if(e=P(e),_(this[e]))return this[e](t);return this}function q(e,t,n){var i=""+Math.abs(e),o=t-i.length,s=e>=0;return(s?n?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+i}function F(e,t,n,i){var o=i;"string"==typeof i&&(o=function(){return this[i]()}),e&&(wi[e]=o),t&&(wi[t[0]]=function(){return q(o.apply(this,arguments),t[1],t[2])}),n&&(wi[n]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function j(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t,n,i=e.match(gi);for(t=0,n=i.length;t<n;t++)wi[i[t]]?i[t]=wi[i[t]]:i[t]=j(i[t]);return function(t){var o,s="";for(o=0;o<n;o++)s+=i[o]instanceof Function?i[o].call(t,e):i[o];return s}}function V(e,t){return e.isValid()?(t=G(t,e.localeData()),vi[t]=vi[t]||z(t),vi[t](e)):e.localeData().invalidDate()}function G(e,t){function n(e){return t.longDateFormat(e)||e}var i=5;for(yi.lastIndex=0;i>=0&&yi.test(e);)e=e.replace(yi,n),yi.lastIndex=0,i-=1;return e}function $(e,t,n){Bi[e]=_(t)?t:function(e,i){return e&&n?n:t}}function K(e,t){return s(Bi,e)?Bi[e](t._strict,t._locale):new RegExp(X(e))}function X(e){return Z(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,i,o){return t||n||i||o}))}function Z(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(e,t){var n,i=t;for("string"==typeof e&&(e=[e]),"number"==typeof t&&(i=function(e,n){n[t]=y(e)}),n=0;n<e.length;n++)Hi[e[n]]=i}function J(e,t){Q(e,function(e,n,i,o){i._w=i._w||{},t(e,i._w,i,o)})}function ee(e,t,n){null!=t&&s(Hi,e)&&Hi[e](t,n._a,n,e)}function te(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function ne(e,t){return n(this._months)?this._months[e.month()]:this._months[$i.test(t)?"format":"standalone"][e.month()]}function ie(e,t){return n(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[$i.test(t)?"format":"standalone"][e.month()]}function oe(e,t,n){var i,o,s,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],i=0;i<12;++i)s=a([2e3,i]),this._shortMonthsParse[i]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[i]=this.months(s,"").toLocaleLowerCase();return n?"MMM"===t?(o=fi.call(this._shortMonthsParse,r),o!==-1?o:null):(o=fi.call(this._longMonthsParse,r),o!==-1?o:null):"MMM"===t?(o=fi.call(this._shortMonthsParse,r),o!==-1?o:(o=fi.call(this._longMonthsParse,r),o!==-1?o:null)):(o=fi.call(this._longMonthsParse,r),o!==-1?o:(o=fi.call(this._shortMonthsParse,r),o!==-1?o:null))}function se(e,t,n){var i,o,s;if(this._monthsParseExact)return oe.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;i<12;i++){if(o=a([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(s="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[i]=new RegExp(s.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[i].test(e))return i;if(n&&"MMM"===t&&this._shortMonthsParse[i].test(e))return i;if(!n&&this._monthsParse[i].test(e))return i}}function re(e,t){var n;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=y(t);else if(t=e.localeData().monthsParse(t),"number"!=typeof t)return e;return n=Math.min(e.date(),te(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function ae(t){return null!=t?(re(this,t),e.updateOffset(this,!0),this):U(this,"Month")}function le(){return te(this.year(),this.month())}function ce(e){return this._monthsParseExact?(s(this,"_monthsRegex")||de.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex}function ue(e){return this._monthsParseExact?(s(this,"_monthsRegex")||de.call(this),e?this._monthsStrictRegex:this._monthsRegex):this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex}function de(){function e(e,t){return t.length-e.length}var t,n,i=[],o=[],s=[];for(t=0;t<12;t++)n=a([2e3,t]),i.push(this.monthsShort(n,"")),o.push(this.months(n,"")),s.push(this.months(n,"")),s.push(this.monthsShort(n,""));for(i.sort(e),o.sort(e),s.sort(e),t=0;t<12;t++)i[t]=Z(i[t]),o[t]=Z(o[t]),s[t]=Z(s[t]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+i.join("|")+")","i")}function he(e){var t,n=e._a;return n&&c(e).overflow===-2&&(t=n[Yi]<0||n[Yi]>11?Yi:n[Wi]<1||n[Wi]>te(n[Ui],n[Yi])?Wi:n[qi]<0||n[qi]>24||24===n[qi]&&(0!==n[Fi]||0!==n[ji]||0!==n[zi])?qi:n[Fi]<0||n[Fi]>59?Fi:n[ji]<0||n[ji]>59?ji:n[zi]<0||n[zi]>999?zi:-1,c(e)._overflowDayOfYear&&(t<Ui||t>Wi)&&(t=Wi),c(e)._overflowWeeks&&t===-1&&(t=Vi),c(e)._overflowWeekday&&t===-1&&(t=Gi),c(e).overflow=t),e}function fe(e){var t,n,i,o,s,r,a=e._i,l=Ji.exec(a)||eo.exec(a);if(l){for(c(e).iso=!0,t=0,n=no.length;t<n;t++)if(no[t][1].exec(l[1])){o=no[t][0],i=no[t][2]!==!1;break}if(null==o)return void(e._isValid=!1);if(l[3]){for(t=0,n=io.length;t<n;t++)if(io[t][1].exec(l[3])){s=(l[2]||" ")+io[t][0];break}if(null==s)return void(e._isValid=!1)}if(!i&&null!=s)return void(e._isValid=!1);if(l[4]){if(!to.exec(l[4]))return void(e._isValid=!1);r="Z"}e._f=o+(s||"")+(r||""),De(e)}else e._isValid=!1}function me(t){var n=oo.exec(t._i);return null!==n?void(t._d=new Date((+n[1]))):(fe(t),void(t._isValid===!1&&(delete t._isValid,e.createFromInputFallback(t))))}function pe(e,t,n,i,o,s,r){var a=new Date(e,t,n,i,o,s,r);return e<100&&e>=0&&isFinite(a.getFullYear())&&a.setFullYear(e),a}function ge(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&e>=0&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function ye(e){return ve(e)?366:365}function ve(e){return e%4===0&&e%100!==0||e%400===0}function we(){return ve(this.year())}function be(e,t,n){var i=7+t-n,o=(7+ge(e,0,i).getUTCDay()-t)%7;return-o+i-1}function Ce(e,t,n,i,o){var s,r,a=(7+n-i)%7,l=be(e,i,o),c=1+7*(t-1)+a+l;return c<=0?(s=e-1,r=ye(s)+c):c>ye(e)?(s=e+1,r=c-ye(e)):(s=e,r=c),{year:s,dayOfYear:r}}function _e(e,t,n){var i,o,s=be(e.year(),t,n),r=Math.floor((e.dayOfYear()-s-1)/7)+1;return r<1?(o=e.year()-1,i=r+xe(o,t,n)):r>xe(e.year(),t,n)?(i=r-xe(e.year(),t,n),o=e.year()+1):(o=e.year(),i=r),{week:i,year:o}}function xe(e,t,n){var i=be(e,t,n),o=be(e+1,t,n);return(ye(e)-i+o)/7}function Se(e,t,n){return null!=e?e:null!=t?t:n}function Te(t){var n=new Date(e.now());return t._useUTC?[n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate()]:[n.getFullYear(),n.getMonth(),n.getDate()]}function Ne(e){var t,n,i,o,s=[];if(!e._d){for(i=Te(e),e._w&&null==e._a[Wi]&&null==e._a[Yi]&&Ee(e),e._dayOfYear&&(o=Se(e._a[Ui],i[Ui]),e._dayOfYear>ye(o)&&(c(e)._overflowDayOfYear=!0),n=ge(o,0,e._dayOfYear),e._a[Yi]=n.getUTCMonth(),e._a[Wi]=n.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=s[t]=i[t];for(;t<7;t++)e._a[t]=s[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[qi]&&0===e._a[Fi]&&0===e._a[ji]&&0===e._a[zi]&&(e._nextDay=!0,e._a[qi]=0),e._d=(e._useUTC?ge:pe).apply(null,s),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[qi]=24)}}function Ee(e){var t,n,i,o,s,r,a,l;t=e._w,null!=t.GG||null!=t.W||null!=t.E?(s=1,r=4,n=Se(t.GG,e._a[Ui],_e(Pe(),1,4).year),i=Se(t.W,1),o=Se(t.E,1),(o<1||o>7)&&(l=!0)):(s=e._locale._week.dow,r=e._locale._week.doy,n=Se(t.gg,e._a[Ui],_e(Pe(),s,r).year),i=Se(t.w,1),null!=t.d?(o=t.d,(o<0||o>6)&&(l=!0)):null!=t.e?(o=t.e+s,(t.e<0||t.e>6)&&(l=!0)):o=s),i<1||i>xe(n,s,r)?c(e)._overflowWeeks=!0:null!=l?c(e)._overflowWeekday=!0:(a=Ce(n,i,o,s,r),e._a[Ui]=a.year,e._dayOfYear=a.dayOfYear)}function De(t){if(t._f===e.ISO_8601)return void fe(t);t._a=[],c(t).empty=!0;var n,i,o,s,r,a=""+t._i,l=a.length,u=0;for(o=G(t._f,t._locale).match(gi)||[],n=0;n<o.length;n++)s=o[n],i=(a.match(K(s,t))||[])[0],i&&(r=a.substr(0,a.indexOf(i)),r.length>0&&c(t).unusedInput.push(r),a=a.slice(a.indexOf(i)+i.length),u+=i.length),wi[s]?(i?c(t).empty=!1:c(t).unusedTokens.push(s),ee(s,i,t)):t._strict&&!i&&c(t).unusedTokens.push(s);c(t).charsLeftOver=l-u,a.length>0&&c(t).unusedInput.push(a),c(t).bigHour===!0&&t._a[qi]<=12&&t._a[qi]>0&&(c(t).bigHour=void 0),c(t).parsedDateParts=t._a.slice(0),c(t).meridiem=t._meridiem,t._a[qi]=ke(t._locale,t._a[qi],t._meridiem),Ne(t),he(t)}function ke(e,t,n){var i;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?(i=e.isPM(n),i&&t<12&&(t+=12),i||12!==t||(t=0),t):t}function Re(e){var t,n,i,o,s;if(0===e._f.length)return c(e).invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)s=0,t=f({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],De(t),u(t)&&(s+=c(t).charsLeftOver,s+=10*c(t).unusedTokens.length,c(t).score=s,(null==i||s<i)&&(i=s,n=t));r(e,n||t)}function Me(e){if(!e._d){var t=B(e._i);e._a=o([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),Ne(e)}}function Ae(e){var t=new m(he(Oe(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function Oe(e){var t=e._i,o=e._f;return e._locale=e._locale||O(e._l),null===t||void 0===o&&""===t?d({nullInput:!0}):("string"==typeof t&&(e._i=t=e._locale.preparse(t)),p(t)?new m(he(t)):(n(o)?Re(e):o?De(e):i(t)?e._d=t:Ie(e),u(e)||(e._d=null),e))}function Ie(t){var s=t._i;void 0===s?t._d=new Date(e.now()):i(s)?t._d=new Date(s.valueOf()):"string"==typeof s?me(t):n(s)?(t._a=o(s.slice(0),function(e){return parseInt(e,10)}),Ne(t)):"object"==typeof s?Me(t):"number"==typeof s?t._d=new Date(s):e.createFromInputFallback(t)}function Le(e,t,n,i,o){var s={};return"boolean"==typeof n&&(i=n,n=void 0),s._isAMomentObject=!0,s._useUTC=s._isUTC=o,s._l=n,s._i=e,s._f=t,s._strict=i,Ae(s)}function Pe(e,t,n,i){return Le(e,t,n,i,!1)}function Be(e,t){var i,o;if(1===t.length&&n(t[0])&&(t=t[0]),!t.length)return Pe();for(i=t[0],o=1;o<t.length;++o)t[o].isValid()&&!t[o][e](i)||(i=t[o]);return i}function He(){var e=[].slice.call(arguments,0);return Be("isBefore",e)}function Ue(){var e=[].slice.call(arguments,0);return Be("isAfter",e)}function Ye(e){var t=B(e),n=t.year||0,i=t.quarter||0,o=t.month||0,s=t.week||0,r=t.day||0,a=t.hour||0,l=t.minute||0,c=t.second||0,u=t.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+1e3*a*60*60,this._days=+r+7*s,this._months=+o+3*i+12*n,this._data={},this._locale=O(),this._bubble()}function We(e){return e instanceof Ye}function qe(e,t){F(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+q(~~(e/60),2)+t+q(~~e%60,2)})}function Fe(e,t){var n=(t||"").match(e)||[],i=n[n.length-1]||[],o=(i+"").match(co)||["-",0,0],s=+(60*o[1])+y(o[2]);return"+"===o[0]?s:-s}function je(t,n){var o,s;return n._isUTC?(o=n.clone(),s=(p(t)||i(t)?t.valueOf():Pe(t).valueOf())-o.valueOf(),o._d.setTime(o._d.valueOf()+s),e.updateOffset(o,!1),o):Pe(t).local()}function ze(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ve(t,n){var i,o=this._offset||0;return this.isValid()?null!=t?("string"==typeof t?t=Fe(Ii,t):Math.abs(t)<16&&(t=60*t),!this._isUTC&&n&&(i=ze(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!n||this._changeInProgress?ct(this,it(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,e.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?o:ze(this):null!=t?this:NaN}function Ge(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function $e(e){return this.utcOffset(0,e)}function Ke(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(ze(this),"m")),this}function Xe(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Fe(Oi,this._i)),this}function Ze(e){return!!this.isValid()&&(e=e?Pe(e).utcOffset():0,(this.utcOffset()-e)%60===0)}function Qe(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Je(){if(!h(this._isDSTShifted))return this._isDSTShifted;var e={};if(f(e,this),e=Oe(e),e._a){var t=e._isUTC?a(e._a):Pe(e._a);this._isDSTShifted=this.isValid()&&v(e._a,t.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function et(){return!!this.isValid()&&!this._isUTC}function tt(){return!!this.isValid()&&this._isUTC}function nt(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function it(e,t){var n,i,o,r=e,a=null;return We(e)?r={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(r={},t?r[t]=e:r.milliseconds=e):(a=uo.exec(e))?(n="-"===a[1]?-1:1,r={y:0,d:y(a[Wi])*n,h:y(a[qi])*n,m:y(a[Fi])*n,s:y(a[ji])*n,ms:y(a[zi])*n}):(a=ho.exec(e))?(n="-"===a[1]?-1:1,r={y:ot(a[2],n),M:ot(a[3],n),w:ot(a[4],n),d:ot(a[5],n),h:ot(a[6],n),m:ot(a[7],n),s:ot(a[8],n)}):null==r?r={}:"object"==typeof r&&("from"in r||"to"in r)&&(o=rt(Pe(r.from),Pe(r.to)),r={},r.ms=o.milliseconds,r.M=o.months),i=new Ye(r),We(e)&&s(e,"_locale")&&(i._locale=e._locale),i}function ot(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function st(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function rt(e,t){var n;return e.isValid()&&t.isValid()?(t=je(t,e),e.isBefore(t)?n=st(e,t):(n=st(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function at(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function lt(e,t){return function(n,i){var o,s;return null===i||isNaN(+i)||(C(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=i,i=s),n="string"==typeof n?+n:n,o=it(n,i),ct(this,o,e),this}}function ct(t,n,i,o){var s=n._milliseconds,r=at(n._days),a=at(n._months);t.isValid()&&(o=null==o||o,s&&t._d.setTime(t._d.valueOf()+s*i),r&&Y(t,"Date",U(t,"Date")+r*i),a&&re(t,U(t,"Month")+a*i),o&&e.updateOffset(t,r||a))}function ut(e,t){var n=e||Pe(),i=je(n,this).startOf("day"),o=this.diff(i,"days",!0),s=o<-6?"sameElse":o<-1?"lastWeek":o<0?"lastDay":o<1?"sameDay":o<2?"nextDay":o<7?"nextWeek":"sameElse",r=t&&(_(t[s])?t[s]():t[s]);return this.format(r||this.localeData().calendar(s,this,Pe(n)))}function dt(){return new m(this)}function ht(e,t){var n=p(e)?e:Pe(e);return!(!this.isValid()||!n.isValid())&&(t=P(h(t)?"millisecond":t),"millisecond"===t?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf())}function ft(e,t){var n=p(e)?e:Pe(e);return!(!this.isValid()||!n.isValid())&&(t=P(h(t)?"millisecond":t),"millisecond"===t?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf())}function mt(e,t,n,i){return i=i||"()",("("===i[0]?this.isAfter(e,n):!this.isBefore(e,n))&&(")"===i[1]?this.isBefore(t,n):!this.isAfter(t,n))}function pt(e,t){var n,i=p(e)?e:Pe(e);return!(!this.isValid()||!i.isValid())&&(t=P(t||"millisecond"),"millisecond"===t?this.valueOf()===i.valueOf():(n=i.valueOf(),this.clone().startOf(t).valueOf()<=n&&n<=this.clone().endOf(t).valueOf()))}function gt(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function yt(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function vt(e,t,n){var i,o,s,r;return this.isValid()?(i=je(e,this),i.isValid()?(o=6e4*(i.utcOffset()-this.utcOffset()),t=P(t),"year"===t||"month"===t||"quarter"===t?(r=wt(this,i),"quarter"===t?r/=3:"year"===t&&(r/=12)):(s=this-i,r="second"===t?s/1e3:"minute"===t?s/6e4:"hour"===t?s/36e5:"day"===t?(s-o)/864e5:"week"===t?(s-o)/6048e5:s),n?r:g(r)):NaN):NaN}function wt(e,t){var n,i,o=12*(t.year()-e.year())+(t.month()-e.month()),s=e.clone().add(o,"months");return t-s<0?(n=e.clone().add(o-1,"months"),i=(t-s)/(s-n)):(n=e.clone().add(o+1,"months"),i=(t-s)/(n-s)),-(o+i)||0}function bt(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function Ct(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?_(Date.prototype.toISOString)?this.toDate().toISOString():V(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):V(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function _t(t){t||(t=this.isUtc()?e.defaultFormatUtc:e.defaultFormat);var n=V(this,t);return this.localeData().postformat(n)}function xt(e,t){return this.isValid()&&(p(e)&&e.isValid()||Pe(e).isValid())?it({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function St(e){return this.from(Pe(),e)}function Tt(e,t){return this.isValid()&&(p(e)&&e.isValid()||Pe(e).isValid())?it({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function Nt(e){return this.to(Pe(),e)}function Et(e){var t;return void 0===e?this._locale._abbr:(t=O(e),null!=t&&(this._locale=t),this)}function Dt(){return this._locale}function kt(e){switch(e=P(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this}function Rt(e){return e=P(e),void 0===e||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))}function Mt(){return this._d.valueOf()-6e4*(this._offset||0)}function At(){return Math.floor(this.valueOf()/1e3)}function Ot(){return this._offset?new Date(this.valueOf()):this._d}function It(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function Lt(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Pt(){return this.isValid()?this.toISOString():null}function Bt(){return u(this)}function Ht(){return r({},c(this))}function Ut(){return c(this).overflow}function Yt(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Wt(e,t){F(0,[e,e.length],0,t)}function qt(e){return Vt.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Ft(e){return Vt.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function jt(){return xe(this.year(),1,4)}function zt(){var e=this.localeData()._week;return xe(this.year(),e.dow,e.doy)}function Vt(e,t,n,i,o){var s;return null==e?_e(this,i,o).year:(s=xe(e,i,o),t>s&&(t=s),Gt.call(this,e,t,n,i,o))}function Gt(e,t,n,i,o){var s=Ce(e,t,n,i,o),r=ge(s.year,0,s.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}function $t(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)}function Kt(e){return _e(e,this._week.dow,this._week.doy).week}function Xt(){return this._week.dow}function Zt(){return this._week.doy}function Qt(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")}function Jt(e){var t=_e(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")}function en(e,t){return"string"!=typeof e?e:isNaN(e)?(e=t.weekdaysParse(e),"number"==typeof e?e:null):parseInt(e,10)}function tn(e,t){return n(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]}function nn(e){return this._weekdaysShort[e.day()]}function on(e){return this._weekdaysMin[e.day()]}function sn(e,t,n){var i,o,s,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],i=0;i<7;++i)s=a([2e3,1]).day(i),this._minWeekdaysParse[i]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[i]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[i]=this.weekdays(s,"").toLocaleLowerCase();return n?"dddd"===t?(o=fi.call(this._weekdaysParse,r),o!==-1?o:null):"ddd"===t?(o=fi.call(this._shortWeekdaysParse,r),o!==-1?o:null):(o=fi.call(this._minWeekdaysParse,r),o!==-1?o:null):"dddd"===t?(o=fi.call(this._weekdaysParse,r),o!==-1?o:(o=fi.call(this._shortWeekdaysParse,r),o!==-1?o:(o=fi.call(this._minWeekdaysParse,r),o!==-1?o:null))):"ddd"===t?(o=fi.call(this._shortWeekdaysParse,r),o!==-1?o:(o=fi.call(this._weekdaysParse,r),o!==-1?o:(o=fi.call(this._minWeekdaysParse,r),o!==-1?o:null))):(o=fi.call(this._minWeekdaysParse,r),o!==-1?o:(o=fi.call(this._weekdaysParse,r),o!==-1?o:(o=fi.call(this._shortWeekdaysParse,r),o!==-1?o:null)))}function rn(e,t,n){var i,o,s;if(this._weekdaysParseExact)return sn.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),i=0;i<7;i++){if(o=a([2e3,1]).day(i),n&&!this._fullWeekdaysParse[i]&&(this._fullWeekdaysParse[i]=new RegExp("^"+this.weekdays(o,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[i]=new RegExp("^"+this.weekdaysShort(o,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[i]=new RegExp("^"+this.weekdaysMin(o,"").replace(".",".?")+"$","i")),this._weekdaysParse[i]||(s="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[i]=new RegExp(s.replace(".",""),"i")),n&&"dddd"===t&&this._fullWeekdaysParse[i].test(e))return i;if(n&&"ddd"===t&&this._shortWeekdaysParse[i].test(e))return i;if(n&&"dd"===t&&this._minWeekdaysParse[i].test(e))return i;if(!n&&this._weekdaysParse[i].test(e))return i}}function an(e){if(!this.isValid())return null!=e?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=en(e,this.localeData()),this.add(e-t,"d")):t}function ln(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")}function cn(e){return this.isValid()?null==e?this.day()||7:this.day(this.day()%7?e:e-7):null!=e?this:NaN}function un(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fn.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex}function dn(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fn.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex}function hn(e){return this._weekdaysParseExact?(s(this,"_weekdaysRegex")||fn.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex}function fn(){function e(e,t){return t.length-e.length}var t,n,i,o,s,r=[],l=[],c=[],u=[];for(t=0;t<7;t++)n=a([2e3,1]).day(t),i=this.weekdaysMin(n,""),o=this.weekdaysShort(n,""),s=this.weekdays(n,""),r.push(i),l.push(o),c.push(s),u.push(i),u.push(o),u.push(s);for(r.sort(e),l.sort(e),c.sort(e),u.sort(e),t=0;t<7;t++)l[t]=Z(l[t]),c[t]=Z(c[t]),u[t]=Z(u[t]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function mn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")}function pn(){return this.hours()%12||12}function gn(){return this.hours()||24}function yn(e,t){F(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function vn(e,t){return t._meridiemParse}function wn(e){return"p"===(e+"").toLowerCase().charAt(0)}function bn(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function Cn(e,t){t[zi]=y(1e3*("0."+e))}function _n(){return this._isUTC?"UTC":""}function xn(){return this._isUTC?"Coordinated Universal Time":""}function Sn(e){return Pe(1e3*e)}function Tn(){return Pe.apply(null,arguments).parseZone()}function Nn(e,t,n){var i=this._calendar[e];return _(i)?i.call(t,n):i}function En(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])}function Dn(){return this._invalidDate}function kn(e){return this._ordinal.replace("%d",e)}function Rn(e){return e}function Mn(e,t,n,i){var o=this._relativeTime[n];return _(o)?o(e,t,n,i):o.replace(/%d/i,e)}function An(e,t){var n=this._relativeTime[e>0?"future":"past"];return _(n)?n(t):n.replace(/%s/i,t)}function On(e,t,n,i){var o=O(),s=a().set(i,t);return o[n](s,e)}function In(e,t,n){if("number"==typeof e&&(t=e,e=void 0),e=e||"",null!=t)return On(e,t,n,"month");var i,o=[];for(i=0;i<12;i++)o[i]=On(e,i,n,"month");return o}function Ln(e,t,n,i){"boolean"==typeof e?("number"==typeof t&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,"number"==typeof t&&(n=t,t=void 0),t=t||"");var o=O(),s=e?o._week.dow:0;if(null!=n)return On(t,(n+s)%7,i,"day");var r,a=[];for(r=0;r<7;r++)a[r]=On(t,(r+s)%7,i,"day");return a}function Pn(e,t){return In(e,t,"months")}function Bn(e,t){return In(e,t,"monthsShort")}function Hn(e,t,n){return Ln(e,t,n,"weekdays")}function Un(e,t,n){return Ln(e,t,n,"weekdaysShort")}function Yn(e,t,n){return Ln(e,t,n,"weekdaysMin")}function Wn(){var e=this._data;return this._milliseconds=Uo(this._milliseconds),this._days=Uo(this._days),this._months=Uo(this._months),e.milliseconds=Uo(e.milliseconds),e.seconds=Uo(e.seconds),e.minutes=Uo(e.minutes),e.hours=Uo(e.hours),e.months=Uo(e.months),e.years=Uo(e.years),this}function qn(e,t,n,i){var o=it(t,n);return e._milliseconds+=i*o._milliseconds,e._days+=i*o._days,e._months+=i*o._months,e._bubble()}function Fn(e,t){return qn(this,e,t,1)}function jn(e,t){return qn(this,e,t,-1)}function zn(e){return e<0?Math.floor(e):Math.ceil(e)}function Vn(){var e,t,n,i,o,s=this._milliseconds,r=this._days,a=this._months,l=this._data;return s>=0&&r>=0&&a>=0||s<=0&&r<=0&&a<=0||(s+=864e5*zn($n(a)+r),r=0,a=0),l.milliseconds=s%1e3,e=g(s/1e3),l.seconds=e%60,t=g(e/60),l.minutes=t%60,n=g(t/60),l.hours=n%24,r+=g(n/24),o=g(Gn(r)),a+=o,r-=zn($n(o)),i=g(a/12),a%=12,l.days=r,l.months=a,l.years=i,this}function Gn(e){return 4800*e/146097}function $n(e){return 146097*e/4800}function Kn(e){var t,n,i=this._milliseconds;if(e=P(e),"month"===e||"year"===e)return t=this._days+i/864e5,n=this._months+Gn(t),"month"===e?n:n/12;switch(t=this._days+Math.round($n(this._months)),e){case"week":return t/7+i/6048e5;case"day":return t+i/864e5;case"hour":return 24*t+i/36e5;case"minute":return 1440*t+i/6e4;case"second":return 86400*t+i/1e3;case"millisecond":return Math.floor(864e5*t)+i;default:throw new Error("Unknown unit "+e)}}function Xn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*y(this._months/12)}function Zn(e){return function(){return this.as(e)}}function Qn(e){return e=P(e),this[e+"s"]()}function Jn(e){return function(){return this._data[e]}}function ei(){return g(this.days()/7)}function ti(e,t,n,i,o){return o.relativeTime(t||1,!!n,e,i)}function ni(e,t,n){var i=it(e).abs(),o=ts(i.as("s")),s=ts(i.as("m")),r=ts(i.as("h")),a=ts(i.as("d")),l=ts(i.as("M")),c=ts(i.as("y")),u=o<ns.s&&["s",o]||s<=1&&["m"]||s<ns.m&&["mm",s]||r<=1&&["h"]||r<ns.h&&["hh",r]||a<=1&&["d"]||a<ns.d&&["dd",a]||l<=1&&["M"]||l<ns.M&&["MM",l]||c<=1&&["y"]||["yy",c];return u[2]=t,u[3]=+e>0,u[4]=n,ti.apply(null,u)}function ii(e,t){return void 0!==ns[e]&&(void 0===t?ns[e]:(ns[e]=t,!0))}function oi(e){var t=this.localeData(),n=ni(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function si(){var e,t,n,i=is(this._milliseconds)/1e3,o=is(this._days),s=is(this._months);e=g(i/60),t=g(e/60),i%=60,e%=60,n=g(s/12),s%=12;var r=n,a=s,l=o,c=t,u=e,d=i,h=this.asSeconds();return h?(h<0?"-":"")+"P"+(r?r+"Y":"")+(a?a+"M":"")+(l?l+"D":"")+(c||u||d?"T":"")+(c?c+"H":"")+(u?u+"M":"")+(d?d+"S":""):"P0D"}var ri,ai;ai=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),n=t.length>>>0,i=0;i<n;i++)if(i in t&&e.call(this,t[i],i,t))return!0;return!1};var li=e.momentProperties=[],ci=!1,ui={};e.suppressDeprecationWarnings=!1,e.deprecationHandler=null;var di;di=Object.keys?Object.keys:function(e){var t,n=[];for(t in e)s(e,t)&&n.push(t);return n};var hi,fi,mi={},pi={},gi=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,yi=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,vi={},wi={},bi=/\d/,Ci=/\d\d/,_i=/\d{3}/,xi=/\d{4}/,Si=/[+-]?\d{6}/,Ti=/\d\d?/,Ni=/\d\d\d\d?/,Ei=/\d\d\d\d\d\d?/,Di=/\d{1,3}/,ki=/\d{1,4}/,Ri=/[+-]?\d{1,6}/,Mi=/\d+/,Ai=/[+-]?\d+/,Oi=/Z|[+-]\d\d:?\d\d/gi,Ii=/Z|[+-]\d\d(?::?\d\d)?/gi,Li=/[+-]?\d+(\.\d{1,3})?/,Pi=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Bi={},Hi={},Ui=0,Yi=1,Wi=2,qi=3,Fi=4,ji=5,zi=6,Vi=7,Gi=8;
fi=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},F("M",["MM",2],"Mo",function(){return this.month()+1}),F("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),F("MMMM",0,0,function(e){return this.localeData().months(this,e)}),L("month","M"),$("M",Ti),$("MM",Ti,Ci),$("MMM",function(e,t){return t.monthsShortRegex(e)}),$("MMMM",function(e,t){return t.monthsRegex(e)}),Q(["M","MM"],function(e,t){t[Yi]=y(e)-1}),Q(["MMM","MMMM"],function(e,t,n,i){var o=n._locale.monthsParse(e,i,n._strict);null!=o?t[Yi]=o:c(n).invalidMonth=e});var $i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/,Ki="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Xi="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Zi=Pi,Qi=Pi,Ji=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,eo=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,to=/Z|[+-]\d\d(?::?\d\d)?/,no=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],io=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],oo=/^\/?Date\((\-?\d+)/i;e.createFromInputFallback=b("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),F("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),F(0,["YY",2],0,function(){return this.year()%100}),F(0,["YYYY",4],0,"year"),F(0,["YYYYY",5],0,"year"),F(0,["YYYYYY",6,!0],0,"year"),L("year","y"),$("Y",Ai),$("YY",Ti,Ci),$("YYYY",ki,xi),$("YYYYY",Ri,Si),$("YYYYYY",Ri,Si),Q(["YYYYY","YYYYYY"],Ui),Q("YYYY",function(t,n){n[Ui]=2===t.length?e.parseTwoDigitYear(t):y(t)}),Q("YY",function(t,n){n[Ui]=e.parseTwoDigitYear(t)}),Q("Y",function(e,t){t[Ui]=parseInt(e,10)}),e.parseTwoDigitYear=function(e){return y(e)+(y(e)>68?1900:2e3)};var so=H("FullYear",!0);e.ISO_8601=function(){};var ro=b("moment().min is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=Pe.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:d()}),ao=b("moment().max is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=Pe.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:d()}),lo=function(){return Date.now?Date.now():+new Date};qe("Z",":"),qe("ZZ",""),$("Z",Ii),$("ZZ",Ii),Q(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Fe(Ii,e)});var co=/([\+\-]|\d\d)/gi;e.updateOffset=function(){};var uo=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,ho=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;it.fn=Ye.prototype;var fo=lt(1,"add"),mo=lt(-1,"subtract");e.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",e.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var po=b("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});F(0,["gg",2],0,function(){return this.weekYear()%100}),F(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Wt("gggg","weekYear"),Wt("ggggg","weekYear"),Wt("GGGG","isoWeekYear"),Wt("GGGGG","isoWeekYear"),L("weekYear","gg"),L("isoWeekYear","GG"),$("G",Ai),$("g",Ai),$("GG",Ti,Ci),$("gg",Ti,Ci),$("GGGG",ki,xi),$("gggg",ki,xi),$("GGGGG",Ri,Si),$("ggggg",Ri,Si),J(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,i){t[i.substr(0,2)]=y(e)}),J(["gg","GG"],function(t,n,i,o){n[o]=e.parseTwoDigitYear(t)}),F("Q",0,"Qo","quarter"),L("quarter","Q"),$("Q",bi),Q("Q",function(e,t){t[Yi]=3*(y(e)-1)}),F("w",["ww",2],"wo","week"),F("W",["WW",2],"Wo","isoWeek"),L("week","w"),L("isoWeek","W"),$("w",Ti),$("ww",Ti,Ci),$("W",Ti),$("WW",Ti,Ci),J(["w","ww","W","WW"],function(e,t,n,i){t[i.substr(0,1)]=y(e)});var go={dow:0,doy:6};F("D",["DD",2],"Do","date"),L("date","D"),$("D",Ti),$("DD",Ti,Ci),$("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),Q(["D","DD"],Wi),Q("Do",function(e,t){t[Wi]=y(e.match(Ti)[0],10)});var yo=H("Date",!0);F("d",0,"do","day"),F("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),F("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),F("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),F("e",0,0,"weekday"),F("E",0,0,"isoWeekday"),L("day","d"),L("weekday","e"),L("isoWeekday","E"),$("d",Ti),$("e",Ti),$("E",Ti),$("dd",function(e,t){return t.weekdaysMinRegex(e)}),$("ddd",function(e,t){return t.weekdaysShortRegex(e)}),$("dddd",function(e,t){return t.weekdaysRegex(e)}),J(["dd","ddd","dddd"],function(e,t,n,i){var o=n._locale.weekdaysParse(e,i,n._strict);null!=o?t.d=o:c(n).invalidWeekday=e}),J(["d","e","E"],function(e,t,n,i){t[i]=y(e)});var vo="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),wo="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),bo="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),Co=Pi,_o=Pi,xo=Pi;F("DDD",["DDDD",3],"DDDo","dayOfYear"),L("dayOfYear","DDD"),$("DDD",Di),$("DDDD",_i),Q(["DDD","DDDD"],function(e,t,n){n._dayOfYear=y(e)}),F("H",["HH",2],0,"hour"),F("h",["hh",2],0,pn),F("k",["kk",2],0,gn),F("hmm",0,0,function(){return""+pn.apply(this)+q(this.minutes(),2)}),F("hmmss",0,0,function(){return""+pn.apply(this)+q(this.minutes(),2)+q(this.seconds(),2)}),F("Hmm",0,0,function(){return""+this.hours()+q(this.minutes(),2)}),F("Hmmss",0,0,function(){return""+this.hours()+q(this.minutes(),2)+q(this.seconds(),2)}),yn("a",!0),yn("A",!1),L("hour","h"),$("a",vn),$("A",vn),$("H",Ti),$("h",Ti),$("HH",Ti,Ci),$("hh",Ti,Ci),$("hmm",Ni),$("hmmss",Ei),$("Hmm",Ni),$("Hmmss",Ei),Q(["H","HH"],qi),Q(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),Q(["h","hh"],function(e,t,n){t[qi]=y(e),c(n).bigHour=!0}),Q("hmm",function(e,t,n){var i=e.length-2;t[qi]=y(e.substr(0,i)),t[Fi]=y(e.substr(i)),c(n).bigHour=!0}),Q("hmmss",function(e,t,n){var i=e.length-4,o=e.length-2;t[qi]=y(e.substr(0,i)),t[Fi]=y(e.substr(i,2)),t[ji]=y(e.substr(o)),c(n).bigHour=!0}),Q("Hmm",function(e,t,n){var i=e.length-2;t[qi]=y(e.substr(0,i)),t[Fi]=y(e.substr(i))}),Q("Hmmss",function(e,t,n){var i=e.length-4,o=e.length-2;t[qi]=y(e.substr(0,i)),t[Fi]=y(e.substr(i,2)),t[ji]=y(e.substr(o))});var So=/[ap]\.?m?\.?/i,To=H("Hours",!0);F("m",["mm",2],0,"minute"),L("minute","m"),$("m",Ti),$("mm",Ti,Ci),Q(["m","mm"],Fi);var No=H("Minutes",!1);F("s",["ss",2],0,"second"),L("second","s"),$("s",Ti),$("ss",Ti,Ci),Q(["s","ss"],ji);var Eo=H("Seconds",!1);F("S",0,0,function(){return~~(this.millisecond()/100)}),F(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),F(0,["SSS",3],0,"millisecond"),F(0,["SSSS",4],0,function(){return 10*this.millisecond()}),F(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),F(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),F(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),F(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),F(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),L("millisecond","ms"),$("S",Di,bi),$("SS",Di,Ci),$("SSS",Di,_i);var Do;for(Do="SSSS";Do.length<=9;Do+="S")$(Do,Mi);for(Do="S";Do.length<=9;Do+="S")Q(Do,Cn);var ko=H("Milliseconds",!1);F("z",0,0,"zoneAbbr"),F("zz",0,0,"zoneName");var Ro=m.prototype;Ro.add=fo,Ro.calendar=ut,Ro.clone=dt,Ro.diff=vt,Ro.endOf=Rt,Ro.format=_t,Ro.from=xt,Ro.fromNow=St,Ro.to=Tt,Ro.toNow=Nt,Ro.get=W,Ro.invalidAt=Ut,Ro.isAfter=ht,Ro.isBefore=ft,Ro.isBetween=mt,Ro.isSame=pt,Ro.isSameOrAfter=gt,Ro.isSameOrBefore=yt,Ro.isValid=Bt,Ro.lang=po,Ro.locale=Et,Ro.localeData=Dt,Ro.max=ao,Ro.min=ro,Ro.parsingFlags=Ht,Ro.set=W,Ro.startOf=kt,Ro.subtract=mo,Ro.toArray=It,Ro.toObject=Lt,Ro.toDate=Ot,Ro.toISOString=Ct,Ro.toJSON=Pt,Ro.toString=bt,Ro.unix=At,Ro.valueOf=Mt,Ro.creationData=Yt,Ro.year=so,Ro.isLeapYear=we,Ro.weekYear=qt,Ro.isoWeekYear=Ft,Ro.quarter=Ro.quarters=$t,Ro.month=ae,Ro.daysInMonth=le,Ro.week=Ro.weeks=Qt,Ro.isoWeek=Ro.isoWeeks=Jt,Ro.weeksInYear=zt,Ro.isoWeeksInYear=jt,Ro.date=yo,Ro.day=Ro.days=an,Ro.weekday=ln,Ro.isoWeekday=cn,Ro.dayOfYear=mn,Ro.hour=Ro.hours=To,Ro.minute=Ro.minutes=No,Ro.second=Ro.seconds=Eo,Ro.millisecond=Ro.milliseconds=ko,Ro.utcOffset=Ve,Ro.utc=$e,Ro.local=Ke,Ro.parseZone=Xe,Ro.hasAlignedHourOffset=Ze,Ro.isDST=Qe,Ro.isDSTShifted=Je,Ro.isLocal=et,Ro.isUtcOffset=tt,Ro.isUtc=nt,Ro.isUTC=nt,Ro.zoneAbbr=_n,Ro.zoneName=xn,Ro.dates=b("dates accessor is deprecated. Use date instead.",yo),Ro.months=b("months accessor is deprecated. Use month instead",ae),Ro.years=b("years accessor is deprecated. Use year instead",so),Ro.zone=b("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ge);var Mo=Ro,Ao={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Oo={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Io="Invalid date",Lo="%d",Po=/\d{1,2}/,Bo={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Ho=N.prototype;Ho._calendar=Ao,Ho.calendar=Nn,Ho._longDateFormat=Oo,Ho.longDateFormat=En,Ho._invalidDate=Io,Ho.invalidDate=Dn,Ho._ordinal=Lo,Ho.ordinal=kn,Ho._ordinalParse=Po,Ho.preparse=Rn,Ho.postformat=Rn,Ho._relativeTime=Bo,Ho.relativeTime=Mn,Ho.pastFuture=An,Ho.set=S,Ho.months=ne,Ho._months=Ki,Ho.monthsShort=ie,Ho._monthsShort=Xi,Ho.monthsParse=se,Ho._monthsRegex=Qi,Ho.monthsRegex=ue,Ho._monthsShortRegex=Zi,Ho.monthsShortRegex=ce,Ho.week=Kt,Ho._week=go,Ho.firstDayOfYear=Zt,Ho.firstDayOfWeek=Xt,Ho.weekdays=tn,Ho._weekdays=vo,Ho.weekdaysMin=on,Ho._weekdaysMin=bo,Ho.weekdaysShort=nn,Ho._weekdaysShort=wo,Ho.weekdaysParse=rn,Ho._weekdaysRegex=Co,Ho.weekdaysRegex=un,Ho._weekdaysShortRegex=_o,Ho.weekdaysShortRegex=dn,Ho._weekdaysMinRegex=xo,Ho.weekdaysMinRegex=hn,Ho.isPM=wn,Ho._meridiemParse=So,Ho.meridiem=bn,R("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=1===y(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}}),e.lang=b("moment.lang is deprecated. Use moment.locale instead.",R),e.langData=b("moment.langData is deprecated. Use moment.localeData instead.",O);var Uo=Math.abs,Yo=Zn("ms"),Wo=Zn("s"),qo=Zn("m"),Fo=Zn("h"),jo=Zn("d"),zo=Zn("w"),Vo=Zn("M"),Go=Zn("y"),$o=Jn("milliseconds"),Ko=Jn("seconds"),Xo=Jn("minutes"),Zo=Jn("hours"),Qo=Jn("days"),Jo=Jn("months"),es=Jn("years"),ts=Math.round,ns={s:45,m:45,h:22,d:26,M:11},is=Math.abs,os=Ye.prototype;os.abs=Wn,os.add=Fn,os.subtract=jn,os.as=Kn,os.asMilliseconds=Yo,os.asSeconds=Wo,os.asMinutes=qo,os.asHours=Fo,os.asDays=jo,os.asWeeks=zo,os.asMonths=Vo,os.asYears=Go,os.valueOf=Xn,os._bubble=Vn,os.get=Qn,os.milliseconds=$o,os.seconds=Ko,os.minutes=Xo,os.hours=Zo,os.days=Qo,os.weeks=ei,os.months=Jo,os.years=es,os.humanize=oi,os.toISOString=si,os.toString=si,os.toJSON=si,os.locale=Et,os.localeData=Dt,os.toIsoString=b("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",si),os.lang=po,F("X",0,0,"unix"),F("x",0,0,"valueOf"),$("x",Ai),$("X",Li),Q("X",function(e,t,n){n._d=new Date(1e3*parseFloat(e,10))}),Q("x",function(e,t,n){n._d=new Date(y(e))}),e.version="2.13.0",t(Pe),e.fn=Mo,e.min=He,e.max=Ue,e.now=lo,e.utc=a,e.unix=Sn,e.months=Pn,e.isDate=i,e.locale=R,e.invalid=d,e.duration=it,e.isMoment=p,e.weekdays=Hn,e.parseZone=Tn,e.localeData=O,e.isDuration=We,e.monthsShort=Bn,e.weekdaysMin=Yn,e.defineLocale=M,e.updateLocale=A,e.locales=I,e.weekdaysShort=Un,e.normalizeUnits=P,e.relativeTimeThreshold=ii,e.prototype=Mo;var ss=e;return ss});var module,countdown=function(e){function t(e,t){var n=e.getTime();return e.setMonth(e.getMonth()+t),Math.round((e.getTime()-n)/864e5)}function n(e){var t=e.getTime(),n=new Date(t);return n.setMonth(e.getMonth()+1),Math.round((n.getTime()-t)/864e5)}function i(e,t){if(t=t instanceof Date||null!==t&&isFinite(t)?new Date((+t)):new Date,!e)return t;var n=+e.value||0;return n?(t.setTime(t.getTime()+n),t):((n=+e.milliseconds||0)&&t.setMilliseconds(t.getMilliseconds()+n),(n=+e.seconds||0)&&t.setSeconds(t.getSeconds()+n),(n=+e.minutes||0)&&t.setMinutes(t.getMinutes()+n),(n=+e.hours||0)&&t.setHours(t.getHours()+n),(n=+e.weeks||0)&&(n*=7),(n+=+e.days||0)&&t.setDate(t.getDate()+n),(n=+e.months||0)&&t.setMonth(t.getMonth()+n),(n=+e.millennia||0)&&(n*=10),(n+=+e.centuries||0)&&(n*=10),(n+=+e.decades||0)&&(n*=10),(n+=+e.years||0)&&t.setFullYear(t.getFullYear()+n),t)}function o(e,t){return p(e)+(1===e?c[t]:u[t])}function s(){}function r(e,t,i,o,s,r){if(0<=e[i]&&(t+=e[i],delete e[i]),t/=s,1>=t+1)return 0;if(0<=e[o]){switch(e[o]=+(e[o]+t).toFixed(r),o){case"seconds":if(60!==e.seconds||isNaN(e.minutes))break;e.minutes++,e.seconds=0;case"minutes":if(60!==e.minutes||isNaN(e.hours))break;e.hours++,e.minutes=0;case"hours":if(24!==e.hours||isNaN(e.days))break;e.days++,e.hours=0;case"days":if(7!==e.days||isNaN(e.weeks))break;e.weeks++,e.days=0;case"weeks":if(e.weeks!==n(e.refMonth)/7||isNaN(e.months))break;e.months++,e.weeks=0;case"months":if(12!==e.months||isNaN(e.years))break;e.years++,e.months=0;case"years":if(10!==e.years||isNaN(e.decades))break;e.decades++,e.years=0;case"decades":if(10!==e.decades||isNaN(e.centuries))break;e.centuries++,e.decades=0;case"centuries":if(10!==e.centuries||isNaN(e.millennia))break;e.millennia++,e.centuries=0}return 0}return t}function a(e,i,o,s,a,l){var c=new Date;e.start=i=i||c,e.end=o=o||c,e.units=s,e.value=o.getTime()-i.getTime(),0>e.value&&(c=o,o=i,i=c),e.refMonth=new Date(i.getFullYear(),i.getMonth(),15,12,0,0);try{e.millennia=0,e.centuries=0,e.decades=0,e.years=o.getFullYear()-i.getFullYear(),e.months=o.getMonth()-i.getMonth(),e.weeks=0,e.days=o.getDate()-i.getDate(),e.hours=o.getHours()-i.getHours(),e.minutes=o.getMinutes()-i.getMinutes(),e.seconds=o.getSeconds()-i.getSeconds(),e.milliseconds=o.getMilliseconds()-i.getMilliseconds();var u;for(0>e.milliseconds?(u=y(-e.milliseconds/1e3),e.seconds-=u,e.milliseconds+=1e3*u):1e3<=e.milliseconds&&(e.seconds+=v(e.milliseconds/1e3),e.milliseconds%=1e3),0>e.seconds?(u=y(-e.seconds/60),e.minutes-=u,e.seconds+=60*u):60<=e.seconds&&(e.minutes+=v(e.seconds/60),e.seconds%=60),0>e.minutes?(u=y(-e.minutes/60),e.hours-=u,e.minutes+=60*u):60<=e.minutes&&(e.hours+=v(e.minutes/60),e.minutes%=60),0>e.hours?(u=y(-e.hours/24),e.days-=u,e.hours+=24*u):24<=e.hours&&(e.days+=v(e.hours/24),e.hours%=24);0>e.days;)e.months--,e.days+=t(e.refMonth,1);if(7<=e.days&&(e.weeks+=v(e.days/7),e.days%=7),0>e.months?(u=y(-e.months/12),e.years-=u,e.months+=12*u):12<=e.months&&(e.years+=v(e.months/12),e.months%=12),10<=e.years&&(e.decades+=v(e.years/10),e.years%=10,10<=e.decades&&(e.centuries+=v(e.decades/10),e.decades%=10,10<=e.centuries&&(e.millennia+=v(e.centuries/10),e.centuries%=10))),i=0,!(1024&s)||i>=a?(e.centuries+=10*e.millennia,delete e.millennia):e.millennia&&i++,!(512&s)||i>=a?(e.decades+=10*e.centuries,delete e.centuries):e.centuries&&i++,!(256&s)||i>=a?(e.years+=10*e.decades,delete e.decades):e.decades&&i++,!(128&s)||i>=a?(e.months+=12*e.years,delete e.years):e.years&&i++,!(64&s)||i>=a?(e.months&&(e.days+=t(e.refMonth,e.months)),delete e.months,7<=e.days&&(e.weeks+=v(e.days/7),e.days%=7)):e.months&&i++,!(32&s)||i>=a?(e.days+=7*e.weeks,delete e.weeks):e.weeks&&i++,!(16&s)||i>=a?(e.hours+=24*e.days,delete e.days):e.days&&i++,!(8&s)||i>=a?(e.minutes+=60*e.hours,delete e.hours):e.hours&&i++,!(4&s)||i>=a?(e.seconds+=60*e.minutes,delete e.minutes):e.minutes&&i++,!(2&s)||i>=a?(e.milliseconds+=1e3*e.seconds,delete e.seconds):e.seconds&&i++,!(1&s)||i>=a){var d=r(e,0,"milliseconds","seconds",1e3,l);if(d&&(d=r(e,d,"seconds","minutes",60,l))&&(d=r(e,d,"minutes","hours",60,l))&&(d=r(e,d,"hours","days",24,l))&&(d=r(e,d,"days","weeks",7,l))&&(d=r(e,d,"weeks","months",n(e.refMonth)/7,l))){s=d;var h,f=e.refMonth,m=f.getTime(),p=new Date(m);if(p.setFullYear(f.getFullYear()+1),h=Math.round((p.getTime()-m)/864e5),(d=r(e,s,"months","years",h/n(e.refMonth),l))&&(d=r(e,d,"years","decades",10,l))&&(d=r(e,d,"decades","centuries",10,l))&&(d=r(e,d,"centuries","millennia",10,l)))throw Error("Fractional unit overflow")}}}finally{delete e.refMonth}return e}function l(e,t,n,o,r){var l;n=+n||222,o=0<o?o:NaN,r=0<r?20>r?Math.round(r):20:0;var c=null;"function"==typeof e?(l=e,e=null):e instanceof Date||(null!==e&&isFinite(e)?e=new Date((+e)):("object"==typeof c&&(c=e),e=null));var u=null;if("function"==typeof t?(l=t,t=null):t instanceof Date||(null!==t&&isFinite(t)?t=new Date((+t)):("object"==typeof t&&(u=t),t=null)),c&&(e=i(c,t)),u&&(t=i(u,e)),!e&&!t)return new s;if(!l)return a(new s,e,t,n,o,r);var d,c=1&n?1e3/30:2&n?1e3:4&n?6e4:8&n?36e5:16&n?864e5:6048e5,u=function(){l(a(new s,e,t,n,o,r),d)};return u(),d=setInterval(u,c)}var c,u,d,h,f,m,p,g,y=Math.ceil,v=Math.floor;s.prototype.toString=function(e){var t=g(this),n=t.length;return n?1===n?t[0]:(e=d+t.pop(),t.join(h)+e):e?""+e:f},s.prototype.toHTML=function(e,t){e=e||"span";var n=g(this),i=n.length;if(!i)return(t=t||f)?"<"+e+">"+t+"</"+e+">":t;for(var o=0;o<i;o++)n[o]="<"+e+">"+n[o]+"</"+e+">";return 1===i?n[0]:(i=d+n.pop(),n.join(h)+i)},s.prototype.addTo=function(e){return i(this,e)},g=function(e){var t=[],n=e.millennia;return n&&t.push(m(n,10)),(n=e.centuries)&&t.push(m(n,9)),(n=e.decades)&&t.push(m(n,8)),(n=e.years)&&t.push(m(n,7)),(n=e.months)&&t.push(m(n,6)),(n=e.weeks)&&t.push(m(n,5)),(n=e.days)&&t.push(m(n,4)),(n=e.hours)&&t.push(m(n,3)),(n=e.minutes)&&t.push(m(n,2)),(n=e.seconds)&&t.push(m(n,1)),(n=e.milliseconds)&&t.push(m(n,0)),t},l.MILLISECONDS=1,l.SECONDS=2,l.MINUTES=4,l.HOURS=8,l.DAYS=16,l.WEEKS=32,l.MONTHS=64,l.YEARS=128,l.DECADES=256,l.CENTURIES=512,l.MILLENNIA=1024,l.DEFAULTS=222,l.ALL=2047;var w=l.setFormat=function(e){if(e){if("singular"in e||"plural"in e){var t=e.singular||[];t.split&&(t=t.split("|"));var n=e.plural||[];n.split&&(n=n.split("|"));for(var i=0;10>=i;i++)c[i]=t[i]||c[i],u[i]=n[i]||u[i]}"string"==typeof e.last&&(d=e.last),"string"==typeof e.delim&&(h=e.delim),"string"==typeof e.empty&&(f=e.empty),"function"==typeof e.formatNumber&&(p=e.formatNumber),"function"==typeof e.formatter&&(m=e.formatter)}},b=l.resetFormat=function(){c=" millisecond; second; minute; hour; day; week; month; year; decade; century; millennium".split(";"),u=" milliseconds; seconds; minutes; hours; days; weeks; months; years; decades; centuries; millennia".split(";"),d=" and ",h=", ",f="",p=function(e){return e},m=o};return l.setLabels=function(e,t,n,i,o,s,r){w({singular:e,plural:t,last:n,delim:i,empty:o,formatNumber:s,formatter:r})},l.resetLabels=b,b(),e&&e.exports?e.exports=l:"function"==typeof window.define&&"undefined"!=typeof window.define.amd&&window.define("countdown",[],function(){return l}),l}(module);!function(e,t,n){"use strict";var i=function(t,n){return this.el=e(t),this.options=e.extend({},e.fn.lmsPaginate.defaults,n),this.startPage=1,this.currentPage=1,this.totalItems=this.el.children().length,this.totalPages=Math.ceil(this.totalItems/this.options.perPage),this.container=e("<nav></nav>").addClass(this.options.containerClass),this.ul=e("<ul></ul>").addClass(this.options.ulClass),this.show(this.startPage),this};i.prototype={pagination:function(t,n){var i=this,o=e("<li></li>"),s=e("<a></a>").attr("href","#"),r="number"===t?i.options.liClass:t,a="number"===t?n:i.paginationText(t);return o.addClass(r),o.data("pagination-type",t),o.data("page",n),o.append(s.html(a)),o},paginationText:function(e){return this.options[e+"Text"]},buildPagination:function(){var e,t,n=this,i=[],o=n.currentPage-1<n.startPage?n.startPage:n.currentPage-1,s=n.currentPage+1>n.totalPages?n.totalPages:n.currentPage+1,r=n.options.limitPagination;r?n.currentPage<=Math.ceil(r/2)+1?(e=1,t=r):n.currentPage+Math.floor(r/2)>=n.totalPages?(e=n.totalPages-r,t=n.totalPages):(e=n.currentPage-Math.ceil(r/2),t=n.currentPage+Math.floor(r/2)):(e=n.startPage,t=n.totalPages),n.options.firstLast&&i.push(n.pagination("first",n.startPage)),n.options.prevNext&&i.push(n.pagination("prev",o));for(var a=e;a<=t;a++)i.push(n.pagination("number",a));return n.options.prevNext&&i.push(n.pagination("next",s)),n.options.firstLast&&i.push(n.pagination("last",n.totalPages)),i},render:function(t){var n=this,i=n.options,o=n.buildPagination();n.ul.children().remove(),n.ul.append(o);var s=1===t?0:(t-1)*i.perPage,r=t*i.perPage;n.el.children().hide(),n.el.children().slice(s,r).show(),n.ul.children().each(function(){var o=e(this),s=o.data("pagination-type");switch(s){case"number":o.data("page")===t&&o.addClass(i.activeClass);break;case"first":t===n.startPage&&o.toggleClass(i.disabledClass);break;case"last":t===n.totalPages&&o.toggleClass(i.disabledClass);break;case"prev":t-1<n.startPage&&o.toggleClass(i.disabledClass);break;case"next":t+1>n.totalPages&&o.toggleClass(i.disabledClass)}}),i.insertAfter?n.container.append(n.ul).insertAfter(e(i.insertAfter)):n.el.after(n.container.append(n.ul))},handle:function(){var t=this;t.container.find("li").each(function(){var n=e(this);n.click(function(e){e.preventDefault();var i=n.data("page");t.currentPage=i,t.show(i)})})},show:function(e){var t=this;t.render(e),t.handle()}},e.fn.lmsPaginate=function(e){var t=this;return t.each(function(){var t=new i(this,e);return t})},e.fn.lmsPaginate.defaults={perPage:10,limitPagination:!1,prevNext:!0,firstLast:!0,prevText:"&laquo;",nextText:"&raquo;",firstText:"First",lastText:"Last",containerClass:"pagination-container",ulClass:"quiz-paginate",liClass:"page",activeClass:"active",disabledClass:"disabled",insertAfter:null}}(jQuery,window,document),function(e){e(document).ready(function(){e(".hide-auto").length&&setTimeout(function(){e(".hide-auto").remove()},2e3),e(".textarea").wysihtml5(),e(".select2").select2(),e('[data-toggle="tooltip"]').tooltip(),e(".datepicker").length&&e(".datepicker").datepicker({format:"yyyy/mm/dd",startDate:"+1d"}),e("#calendar").length&&e("#calendar").fullCalendar({header:{left:"prev",center:"title",right:"next"},events:"/api/assignments"}),e(document.body).on("click",".warning-delete",function(t){t.preventDefault();var n=e(this).closest("form"),i=e(this).data("title");swal({title:"Anda yakin?",text:"Anda akan menghapus "+i+" !",type:"warning",showCancelButton:!0,cancelButtonText:"Batal",confirmButtonColor:"#DD6B55",confirmButtonText:"Ya, lanjutkan!",closeOnConfirm:!0},function(){n.submit()})}),e(".changeImage").click(function(t){t.preventDefault();var n=e("input.field_type"),i=e(this).attr("id");switch(i){case"chg-picture":n.val("picture");break;case"chg-cover":n.val("cover");break;default:n.val("picture")}})})}(jQuery),function(e){function t(t){data=e(".answers").serialize()+"&"+e.param(t)+"&status=done",e.ajax({method:"POST",url:"/api/quizzes/submit",data:data,beforeSend:function(){e(".quiz-loading").show()}}).always(function(t){e(".quiz-loading").hide()}).done(function(e){e.redirect&&window.location.replace(e.redirect)}).fail(function(t){422===t.status?(e("#err-422").show(),setTimeout(function(){e("#err-422").fadeOut()},3e3)):(e("#refresh").modal("show"),e("#refresh-quiz").click(function(e){e.preventDefault(),window.location.reload()}))})}function n(){var t=e("#questions-container"),n=e('div[id^="question-"]:last'),i=s(n)+1,o=n.clone(!0).appendTo(t);localStorage.setItem("form-count",s(n)),o.find("textarea").val(""),o.find('input[type="text"]').val(""),o.find('input[type="radio"]').removeAttr("checked"),o.attr("id","question-"+i).find(".count-question").html(i),o.find("textarea").attr("name","questions["+i+"][question]"),o.find("input").each(function(){var t=e(this).attr("name").replace("questions["+s(n)+"]","questions["+i+"]");e(this).attr("name",t)})}function i(e,t){var i=0;e.click(function(e){return e.preventDefault(),n(),i++,t(i)})}function o(t,n){t.click(function(t){t.preventDefault();var i=parseInt(localStorage.getItem("form-count"))-1;localStorage.setItem("form-count",i);var o=e(this).parents(".questions-wrapper"),s=o.nextAll(".questions-wrapper");return n(o,s)})}function s(e){return parseInt(e.attr("id").match(/\d+/g))}function r(t){var n=!0,i=e(".questions-wrapper textarea"),o=e(".questions-wrapper input[type=text]"),s=e(".questions-wrapper input[type=radio]");i.each(function(){a(e(this),function(e){e||(n=!1)})}),o.each(function(){a(e(this),function(e){e||(n=!1)})});var r=[];return s.each(function(){var t=e(this).attr("name");e.inArray(t,r)==-1&&r.push(t)}),e.each(r,function(t,i){0===e('input[name="'+i+'"]:checked').length?(e('input[name="'+i+'"]').parents(".anwers_wrapper").css("border","1px solid red"),n=!1):e('input[name="'+i+'"]').parents(".anwers_wrapper").css("border","1px solid #ccc")}),t(n?!0:!1)}function a(e,t){""===e.val()?(e.css("border","1px solid red"),t(!1)):(e.css("border","1px solid #ccc"),t(!0))}function l(t){var n=!0,i=[];return e('.question-detail input[type="radio"]').each(function(){var t=e(this).attr("name");e.inArray(t,i)==-1&&i.push(t)}),e.each(i,function(t,i){0===e('input[name="'+i+'"]:checked').length?(e('input[name="'+i+'"]').parents(".question-detail").css("border","1px solid red"),n=!1):e('input[name="'+i+'"]').parents(".question-detail").css("border","1px solid #fff")}),t(n?!0:!1)}e(document).ready(function(){if(e(".questions-wrapper, .question-detail").length&&e(window).on("beforeunload",function(){return"Quiz akan hilang jika anda berpindah halaman. Submit quiz terlebih dahulu."}),e("#questions-container").length>0){formTotal=parseInt(localStorage.getItem("form-count"));for(var a=0;a<formTotal;a++)n();formTotal>0&&e(".remove-question").removeAttr("disabled")}i(e("#add-question"),function(t){t>0&&e(".remove-question").removeAttr("disabled")}),o(e(".remove-question"),function(t,n){n.each(function(){var t=s(e(this))-1;e(this).attr("id","question-"+t),e(this).find(".count-question").html(t)}),t.remove(),1===e(".remove-question").length&&e(".remove-question").attr("disabled",!0)}),e("#submit-mc").click(function(t){t.preventDefault(),r(function(t){t&&swal({title:"Simpan Quiz?",type:"info",showCancelButton:!0,cancelButtonText:"Batal",confirmButtonColor:"#205081",confirmButtonText:"Ya, simpan!",closeOnConfirm:!0},function(){e(window).unbind("beforeunload"),e(".multiple-choice-form").submit()})})}),e.ajaxSetup({headers:{"X-CSRF-TOKEN":e('meta[name="csrf-token"]').attr("content")},dataType:"json"});var c={classroom_id:e("#mc-form-detail-submit").data("classroom_id"),quiz_id:e("#mc-form-detail-submit").data("quiz_id")};e("#mc-form-detail-submit").click(function(n){n.preventDefault(),l(function(n){n?(e(window).unbind("beforeunload"),t(c)):swal({title:"Kumpul Quiz Sekarang?",text:"Quiz yang tidak terjawab tidak akan mendapatkan nilai.",type:"error",showCancelButton:!0,cancelButtonText:"Batal",confirmButtonColor:"#d9534f",confirmButtonText:"Ya, kumpul sekarang!",closeOnConfirm:!0},function(){e(window).unbind("beforeunload"),t(c)})})}),e("#start-quiz").click(function(t){var n=e(this);t.preventDefault(),swal({title:"Kerjakan Quiz?",text:"Waktu pengerjaan akan berjalan jika anda memulai quiz sekarang",type:"info",showCancelButton:!0,cancelButtonText:"Batal",confirmButtonColor:"#205081",confirmButtonText:"Oke, Saya Mengerti!",closeOnConfirm:!0},function(){e.ajax({method:"POST",url:"/api/quizzes/start",data:{classroom_id:n.data("classroom_id"),quiz_id:n.data("quiz_id")}}).done(function(e){e.redirect&&window.location.replace(e.redirect)}).fail(function(){})})}),e("#lms-paginator").lmsPaginate({perPage:1,prevNext:!1,firstLast:!1,containerClass:"mc-pagination",insertAfter:"#luar"}),e('input[name^="answer"]').each(function(){var t=e(this);t.on("click",function(t){t.stopPropagation(),data=e(".answers").serialize()+"&"+e.param(c),e.ajax({method:"POST",url:"/api/quizzes/submit",data:data,beforeSend:function(){e(".quiz-loading").show()}}).always(function(t){e(".quiz-loading").hide(),e("#unansweredQuestion").html(t.unanswered)}).fail(function(t){e("body").append(t.responseText),e("#refresh").modal("show"),e("#refresh-quiz").click(function(e){e.preventDefault(),window.location.reload()})})})});var u=e(".timer"),d=new Date(u.data("endtime"));countdown.resetLabels(),countdown.setLabels("milidetik | detik | menit | jam | hari | minggu | bulan | tahun | abad | milenium","milidetik | detik | menit | jam | hari | minggu | bulan | tahun | abad | milenium"," ",", ","",function(e){return e.toString()}),u.html(countdown(d).toString()),setInterval(function(){u.text(countdown(moment().valueOf(),d).toString())},1e3),e("#mc-form-detail-submit").length&&setTimeout(function(){t(c)},d-new Date)})}(jQuery);